
   PASS  Tests\ArchTest
  ✓ globals                                                              0.52s  

   PASS  Tests\CaptureForrstDescribeTest
  ✓ capture forrst.describe response                                     0.02s  

   FAIL  Tests\Http\Controller\FunctionControllerTest
  ✓ FunctionController → Happy Paths → returns JSON response with HTTP…  0.01s  
  ✓ FunctionController → Happy Paths → returns JSON response with Spatie Data object converted to array
  ✓ FunctionController → Happy Paths → processes forrst.describe discov… 0.01s  
  ✓ FunctionController → Happy Paths → handles function call with positional parameters
  ✓ FunctionController → Happy Paths → handles function call with named parameters
  ✓ FunctionController → Happy Paths → processes notification without returning response
  ✓ FunctionController → Happy Paths → handles batch requests with mult… 0.01s  
  ⨯ FunctionController → Happy Paths → processes batch with all notific… 0.01s  
  ✓ FunctionController → Happy Paths → returns Collection response properly serialized
  ✓ FunctionController → Happy Paths → returns StreamedResponse for streamable function with stream extension enabled
  ✓ FunctionController → Happy Paths → sends initial connected event when streaming starts
  ✓ FunctionController → Happy Paths → returns JSON for streamable function when stream extension is not requested
  ✓ FunctionController → Happy Paths → returns JSON when stream extensi… 0.01s  
  ✓ FunctionController → Sad Paths → returns HTTP 200 with error in response body for non-existent function
  ✓ FunctionController → Sad Paths → returns HTTP 200 with parse error for invalid JSON
  ✓ FunctionController → Sad Paths → returns HTTP 200 with invalid request error for malformed request object
  ✓ FunctionController → Sad Paths → returns HTTP 200 with parse error for invalid batch JSON
  ✓ FunctionController → Sad Paths → returns HTTP 200 with invalid request error for empty array batch
  ⨯ FunctionController → Sad Paths → returns HTTP 200 with errors for invalid batch items
  ⨯ FunctionController → Sad Paths → returns HTTP 200 with invalid request error for completely invalid batch
  ✓ FunctionController → Edge Cases → handles streaming with empty arguments array
  ✓ FunctionController → Edge Cases → returns error for non-streamable function with stream extension requested
  ✓ FunctionController → Edge Cases → sets correct SSE headers for streaming response
  ✓ FunctionController → Edge Cases → handles single element in streaming arguments

   PASS  Tests\Http\Controller\StreamingControllerTest
  ✓ Streaming Controller → Happy Paths → returns SSE stream for streama… 0.01s  
  ✓ Streaming Controller → Happy Paths → returns JSON for streamable function when accept is false
  ✓ Streaming Controller → Happy Paths → returns JSON for streamable function without stream extension
  ✓ Streaming Controller → Edge Cases → returns error for non-streamable function with stream extension
  ✓ Streaming Controller → Edge Cases → SSE stream returns StreamedResponse with correct headers
  ✓ Streaming Controller → Edge Cases → handles empty arguments in streaming

   PASS  Tests\Http\Helpers\FunctionsTest
  ✓ Helper Functions → post_forrst sends Forrst request                  0.01s  
  ✓ Helper Functions → post_forrst sends request with custom id
  ✓ Helper Functions → post_forrst sends request with function version

   PASS  Tests\Http\Middleware\BootServerTest
  ✓ BootServer Middleware → Happy Paths → binds ServerInterface to the container
  ✓ BootServer Middleware → Happy Paths → passes request to next middleware after binding server
  ✓ BootServer Middleware → Sad Paths → throws BadRequestHttpException when route name is null
  ✓ BootServer Middleware → Sad Paths → throws BadRequestHttpException when route exists but has no name
  ✓ BootServer Middleware → Edge Cases → terminate does nothing during unit tests
  ✓ BootServer Middleware → Edge Cases → terminate forgets ServerInterf… 0.01s  
  ✓ BootServer Middleware → Edge Cases → handles multiple sequential requests with proper cleanup simulation

   PASS  Tests\Unit\Attributes\DescriptorTest
  ✓ Descriptor Attribute → Happy Paths → creates attribute with class string
  ✓ Descriptor Attribute → Happy Paths → is a PHP attribute targeting classes
  ✓ Descriptor Attribute → Happy Paths → can be read from class reflection
  ✓ Descriptor Attribute → Happy Paths → descriptor class can be instantiated and called
  ✓ Descriptor Attribute → Edge Cases → attribute stores exact class string
  ✓ Descriptor Attribute → Edge Cases → class property is readonly

   PASS  Tests\Unit\Data\Configuration\ServerDataTest
  ✓ ServerData → creates instance from array

   PASS  Tests\Unit\Data\ErrorDataTest
  ✓ ErrorData → Happy Paths → creates error data with code, message and data
  ✓ ErrorData → Happy Paths → creates error data without additional data
  ✓ ErrorData → Happy Paths → creates from array using inherited from method
  ✓ ErrorData → Client Error Detection → identifies invalid request as client error
  ✓ ErrorData → Client Error Detection → identifies function not found as client error
  ✓ ErrorData → Client Error Detection → identifies invalid arguments as client error
  ✓ ErrorData → Client Error Detection → identifies parse error as client error
  ✓ ErrorData → Client Error Detection → identifies validation error as client error
  ✓ ErrorData → Client Error Detection → identifies unauthorized as client error
  ✓ ErrorData → Client Error Detection → identifies forbidden as client error
  ✓ ErrorData → Client Error Detection → identifies rate limited as operational error (neither client nor server)
  ✓ ErrorData → Client Error Detection → does not identify internal error as client error
  ✓ ErrorData → Server Error Detection → identifies internal error as server error
  ✓ ErrorData → Server Error Detection → identifies server error as server error
  ✓ ErrorData → Server Error Detection → identifies service unavailable as server error
  ✓ ErrorData → Server Error Detection → custom Server prefixed errors are unclassified
  ✓ ErrorData → Server Error Detection → does not identify client errors as server errors
  ✓ ErrorData → Server Error Detection → does not identify unknown errors as server errors
  ✓ ErrorData → HTTP Status Code Mapping → maps parse error to 400 status code
  ✓ ErrorData → HTTP Status Code Mapping → maps invalid request to 400 status code
  ✓ ErrorData → HTTP Status Code Mapping → maps function not found to 404 status code
  ✓ ErrorData → HTTP Status Code Mapping → maps invalid arguments to 400 status code
  ✓ ErrorData → HTTP Status Code Mapping → maps validation error to 422 status code
  ✓ ErrorData → HTTP Status Code Mapping → maps unauthorized to 401 status code
  ✓ ErrorData → HTTP Status Code Mapping → maps forbidden to 403 status code
  ✓ ErrorData → HTTP Status Code Mapping → maps rate limited to 429 status code
  ✓ ErrorData → HTTP Status Code Mapping → maps internal error to 500 status code
  ✓ ErrorData → HTTP Status Code Mapping → maps server error to 500 status code
  ✓ ErrorData → HTTP Status Code Mapping → maps service unavailable to 503 status code
  ✓ ErrorData → HTTP Status Code Mapping → maps custom prefixed errors to 400 status code
  ✓ ErrorData → HTTP Status Code Mapping → maps unknown errors to 400 status code
  ✓ ErrorData → Edge Cases → handles empty string error code
  ✓ ErrorData → Edge Cases → handles error with null data field
  ✓ ErrorData → Edge Cases → handles error with empty string data
  ✓ ErrorData → Edge Cases → handles error with different data types in details array
  ✓ ErrorData → Edge Cases → handles error with complex data structures
  ✓ ErrorData → Edge Cases → handles error with unicode characters in message
  ✓ ErrorData → Edge Cases → handles error with very long message
  ✓ ErrorData → Regression Tests → ensures all predefined error codes map to correct status codes
  ✓ ErrorData → Regression Tests → ensures all client error codes are correctly classified
  ✓ ErrorData → Regression Tests → ensures all server error codes are correctly classified

   PASS  Tests\Unit\Data\Errors\SourceDataTest
  ✓ SourceData → Happy Paths → creates instance with pointer             0.01s  
  ✓ SourceData → Happy Paths → creates instance with position
  ✓ SourceData → Happy Paths → creates instance with both pointer and position
  ✓ SourceData → Happy Paths → creates instance with pointer using static factory method
  ✓ SourceData → Happy Paths → creates instance with position using static factory method
  ✓ SourceData → Happy Paths → serializes to array with only pointer when using pointer factory
  ✓ SourceData → Happy Paths → serializes to array with only position when using position factory
  ✓ SourceData → Happy Paths → serializes to array with both pointer and position when both are set
  ✓ SourceData → Happy Paths → serializes to empty array when neither pointer nor position is set
  ✓ SourceData → Edge Cases → handles zero position using position factory
  ✓ SourceData → Edge Cases → handles empty string pointer using pointer factory
  ✓ SourceData → Edge Cases → handles complex JSON pointer paths with special characters
  ✓ SourceData → Edge Cases → handles large position values

   FAIL  Tests\Unit\Data\ExtensionDataTest
  ⨯ ExtensionData → Happy Paths → creates extension with string URN via… 0.01s  
  ✓ ExtensionData → Happy Paths → creates extension with BackedEnum URN via constructor
  ✓ ExtensionData → Happy Paths → creates request extension via static factory with string URN
  ✓ ExtensionData → Happy Paths → creates request extension via static factory with BackedEnum URN
  ✓ ExtensionData → Happy Paths → creates response extension via static factory with string URN
  ✓ ExtensionData → Happy Paths → creates response extension via static factory with BackedEnum URN
  ⨯ ExtensionData → Happy Paths → deserializes extension from array with from() method
  ✓ ExtensionData → Happy Paths → serializes to request array with URN and options only
  ✓ ExtensionData → Happy Paths → serializes to response array with URN and data only
  ⨯ ExtensionData → Happy Paths → serializes to complete array with both options and data
  ⨯ ExtensionData → Sad Paths → handles empty URN string from deserialization
  ✓ ExtensionData → Sad Paths → deserializes extension without options field
  ✓ ExtensionData → Sad Paths → deserializes extension without data field
  ✓ ExtensionData → Edge Cases → creates extension with null options and null data
  ✓ ExtensionData → Edge Cases → creates request extension without options
  ✓ ExtensionData → Edge Cases → creates response extension without data
  ✓ ExtensionData → Edge Cases → serializes request array without options field when options are null
  ✓ ExtensionData → Edge Cases → serializes response array without data field when data is null
  ✓ ExtensionData → Edge Cases → serializes to minimal array when both…  0.02s  
  ✓ ExtensionData → Edge Cases → handles complex nested data structures in options
  ✓ ExtensionData → Edge Cases → handles complex nested data structures in data
  ✓ ExtensionData → Edge Cases → handles unicode characters in URN
  ✓ ExtensionData → Edge Cases → handles unicode characters in options
  ✓ ExtensionData → Edge Cases → handles unicode characters in data
  ✓ ExtensionData → Edge Cases → handles empty arrays in options
  ✓ ExtensionData → Edge Cases → handles empty arrays in data
  ✓ ExtensionData → Edge Cases → handles all standard ExtensionUrn enum cases with dataset "Async"
  ✓ ExtensionData → Edge Cases → handles all standard ExtensionUrn enum cases with dataset "Caching"
  ✓ ExtensionData → Edge Cases → handles all standard ExtensionUrn enum cases with dataset "Deadline"
  ✓ ExtensionData → Edge Cases → handles all standard ExtensionUrn enum cases with dataset "Deprecation"
  ✓ ExtensionData → Edge Cases → handles all standard ExtensionUrn enum cases with dataset "DryRun"
  ✓ ExtensionData → Edge Cases → handles all standard ExtensionUrn enum cases with dataset "Idempotency"
  ✓ ExtensionData → Edge Cases → handles all standard ExtensionUrn enum cases with dataset "Maintenance"
  ✓ ExtensionData → Edge Cases → handles all standard ExtensionUrn enum cases with dataset "Priority"
  ✓ ExtensionData → Edge Cases → handles all standard ExtensionUrn enum cases with dataset "Replay"
  ✓ ExtensionData → Edge Cases → handles all standard ExtensionUrn enum cases with dataset "Query"
  ✓ ExtensionData → Edge Cases → handles all standard ExtensionUrn enum cases with dataset "Quota"
  ✓ ExtensionData → Edge Cases → handles all standard ExtensionUrn enum cases with dataset "RateLimit"
  ✓ ExtensionData → Edge Cases → handles all standard ExtensionUrn enum cases with dataset "Locale"
  ✓ ExtensionData → Edge Cases → handles all standard ExtensionUrn enum cases with dataset "Redact"
  ✓ ExtensionData → Edge Cases → handles all standard ExtensionUrn enum cases with dataset "Tracing"
  ✓ ExtensionData → Edge Cases → handles all standard ExtensionUrn enum cases with dataset "Retry"
  ✓ ExtensionData → Edge Cases → handles all standard ExtensionUrn enum cases with dataset "Cancellation"
  ✓ ExtensionData → Edge Cases → handles all standard ExtensionUrn enum cases with dataset "Stream"
  ⨯ ExtensionData → Edge Cases → deserializes from empty array with default values
  ✓ ExtensionData → Edge Cases → converts enum URN to string in toRequestArray
  ✓ ExtensionData → Edge Cases → converts enum URN to string in toResponseArray
  ✓ ExtensionData → Edge Cases → preserves numeric array keys in options
  ✓ ExtensionData → Edge Cases → preserves numeric array keys in data
  ✓ ExtensionData → Regression Tests → ensures request factory never includes data in serialization
  ✓ ExtensionData → Regression Tests → ensures response factory never includes options in serialization
  ✓ ExtensionData → Regression Tests → maintains immutability of readonly properties
  ⨯ ExtensionData → Regression Tests → from() method handles all combinations of missing fields
  ✓ ExtensionData → Regression Tests → serialization round-trip preserves all data for request
  ✓ ExtensionData → Regression Tests → serialization round-trip preserves all data for response

   FAIL  Tests\Unit\Data\RequestObjectDataTest
  ⨯ RequestObjectData → Happy Paths → creates request object with all p… 0.01s  
  ✓ RequestObjectData → Happy Paths → creates request using asRequest factory with auto-generated ID
  ✓ RequestObjectData → Happy Paths → creates request using asRequest factory with custom ID
  ✓ RequestObjectData → Happy Paths → creates request using asRequest factory with version
  ✓ RequestObjectData → Happy Paths → retrieves specific argument using dot notation
  ✓ RequestObjectData → Happy Paths → retrieves all arguments using getArguments method
  ✓ RequestObjectData → Happy Paths → creates from array using inherited from method
  ✓ RequestObjectData → Happy Paths → toArray returns correct Forrst structure
  ✓ RequestObjectData → Sad Paths → returns default value when getting argument from null arguments
  ✓ RequestObjectData → Sad Paths → returns default value when argument does not exist
  ✓ RequestObjectData → Sad Paths → returns null when getting arguments that are null
  ✓ RequestObjectData → Sad Paths → returns null as default when argument not found and no default provided
  ✓ RequestObjectData → Sad Paths → throws exception when ID is missing in from method
  ✓ RequestObjectData → Sad Paths → throws exception when function is missing in from method
  ✓ RequestObjectData → Edge Cases → handles empty arguments array
  ✓ RequestObjectData → Edge Cases → handles deeply nested argument access
  ✓ RequestObjectData → Edge Cases → handles function names with special characters
  ✓ RequestObjectData → Edge Cases → handles complex data structures in arguments
  ✓ RequestObjectData → Edge Cases → handles numeric string keys in arguments
  ✓ RequestObjectData → Edge Cases → handles context data
  ✓ RequestObjectData → Edge Cases → handles unicode characters in ID
  ✓ RequestObjectData → Edge Cases → handles very long string ID
  ✓ RequestObjectData → Edge Cases → toArray omits null context
  ✓ RequestObjectData → Edge Cases → toArray omits null arguments
  ✓ RequestObjectData → Edge Cases → toArray omits null version

   PASS  Tests\Unit\Data\ResponseDataTest
  ✓ ResponseData → Happy Paths → creates success response via factory m… 0.01s  
  ✓ ResponseData → Happy Paths → creates success response with metadata
  ✓ ResponseData → Happy Paths → creates error response from request exception
  ✓ ResponseData → Happy Paths → creates error response via error factory method
  ✓ ResponseData → Happy Paths → identifies successful response with result data
  ✓ ResponseData → Happy Paths → detects server error in isFailed method
  ✓ ResponseData → Happy Paths → converts successful response to array correctly
  ✓ ResponseData → Happy Paths → converts error response to array correctly
  ✓ ResponseData → Happy Paths → includes metadata in array when present
  ✓ ResponseData → Sad Paths → detects client error as failed response
  ✓ ResponseData → Sad Paths → response without error is not failed
  ✓ ResponseData → Edge Cases → handles all server error codes with dataset "internal error"
  ✓ ResponseData → Edge Cases → handles all server error codes with dataset "unavailable"
  ✓ ResponseData → Edge Cases → handles all server error codes with dataset "dependency error"
  ✓ ResponseData → Edge Cases → handles all client error codes with dataset "parse error"
  ✓ ResponseData → Edge Cases → handles all client error codes with dataset "invalid request"
  ✓ ResponseData → Edge Cases → handles all client error codes with dataset "function not found"
  ✓ ResponseData → Edge Cases → handles all client error codes with dataset "invalid arguments"
  ✓ ResponseData → Edge Cases → handles all client error codes with dataset "schema validation failed"
  ✓ ResponseData → Edge Cases → handles all client error codes with dataset "unauthorized"
  ✓ ResponseData → Edge Cases → handles all client error codes with dataset "forbidden"
  ✓ ResponseData → Edge Cases → handles response with null result
  ✓ ResponseData → Edge Cases → handles complex result data
  ✓ ResponseData → Edge Cases → handles unicode characters in result
  ✓ ResponseData → Edge Cases → handles custom Server prefixed error codes as unclassified
  ✓ ResponseData → Edge Cases → handles unknown error codes as unclassified
  ✓ ResponseData → Regression Tests → ensures toArray includes result field on success
  ✓ ResponseData → Regression Tests → ensures error response has null result in array
  ✓ ResponseData → Regression Tests → validates success factory produces exact structure
  ✓ ResponseData → Regression Tests → ensures all predefined error codes are correctly classified

   FAIL  Tests\Unit\Discovery\ArgumentDataTest
  ✓ ArgumentData → Happy Paths → creates instance with required fields…  0.01s  
  ✓ ArgumentData → Happy Paths → creates instance with all fields populated
  ✓ ArgumentData → Happy Paths → creates instance with required true
  ✓ ArgumentData → Happy Paths → creates instance with required false
  ✓ ArgumentData → Happy Paths → creates instance with complex schema
  ✓ ArgumentData → Happy Paths → creates instance with array schema
  ✓ ArgumentData → Happy Paths → creates instance with default value
  ✓ ArgumentData → Happy Paths → creates instance with multiple examples
  ✓ ArgumentData → Happy Paths → toArray includes all required fields
  ✓ ArgumentData → Happy Paths → toArray includes required field with default false
  ✓ ArgumentData → Happy Paths → toArray handles null optional fields
  ⨯ ArgumentData → Happy Paths → toArray with nested Data objects converts correctly
  ✓ ArgumentData → Edge Cases → handles null default value explicitly
  ✓ ArgumentData → Edge Cases → handles default value of zero
  ✓ ArgumentData → Edge Cases → handles default value of false
  ✓ ArgumentData → Edge Cases → handles default value of empty string
  ✓ ArgumentData → Edge Cases → handles empty examples array
  ✓ ArgumentData → Edge Cases → handles schema with $ref
  ✓ ArgumentData → Edge Cases → handles parameter name with underscores
  ✓ ArgumentData → Edge Cases → handles empty schema object
  ✓ ArgumentData → Edge Cases → handles examples with different types
  ✓ ArgumentData → Edge Cases → toArray preserves schema structure
  ✓ ArgumentData → Sad Paths → validates required name field exists
  ✓ ArgumentData → Sad Paths → validates required schema field exists
  ✓ ArgumentData → Sad Paths → validates required field defaults to false

   PASS  Tests\Unit\Discovery\DiscoveryDataTest
  ✓ DiscoveryData → Happy Paths → creates instance with required fields… 0.01s  
  ✓ DiscoveryData → Happy Paths → creates instance with all fields populated
  ✓ DiscoveryData → Happy Paths → creates instance with multiple functions
  ✓ DiscoveryData → Happy Paths → creates instance with multiple servers
  ✓ DiscoveryData → Happy Paths → creates instance with multiple resources
  ✓ DiscoveryData → Happy Paths → toArray maps external_docs correctly
  ✓ DiscoveryData → Happy Paths → toArray includes all required fields
  ✓ DiscoveryData → Happy Paths → toArray handles null optional fields
  ✓ DiscoveryData → Happy Paths → toArray with nested Data objects converts correctly
  ✓ DiscoveryData → Edge Cases → handles null servers
  ✓ DiscoveryData → Edge Cases → handles null resources
  ✓ DiscoveryData → Edge Cases → handles null components
  ✓ DiscoveryData → Edge Cases → handles different version formats
  ✓ DiscoveryData → Edge Cases → resources map preserves keys
  ✓ DiscoveryData → Sad Paths → validates required forrst field exists
  ✓ DiscoveryData → Sad Paths → validates required discovery field exists
  ✓ DiscoveryData → Sad Paths → validates required info field exists
  ✓ DiscoveryData → Sad Paths → validates required functions field exis… 0.02s  

   FAIL  Tests\Unit\Discovery\ErrorDefinitionDataTest
  ✓ ErrorDefinitionData → Happy Paths → creates instance with required…  0.01s  
  ✓ ErrorDefinitionData → Happy Paths → creates instance with all fields populated
  ✓ ErrorDefinitionData → Happy Paths → creates instance with complex details schema
  ✓ ErrorDefinitionData → Happy Paths → toArray includes all required fields
  ✓ ErrorDefinitionData → Happy Paths → toArray handles null optional fields
  ✓ ErrorDefinitionData → Happy Paths → toArray includes details when set
  ✓ ErrorDefinitionData → Edge Cases → handles null description
  ✓ ErrorDefinitionData → Edge Cases → handles null details
  ⨯ ErrorDefinitionData → Edge Cases → handles empty details array
  ✓ ErrorDefinitionData → Edge Cases → handles error code with underscores
  ⨯ ErrorDefinitionData → Edge Cases → handles error code in lowercase
  ✓ ErrorDefinitionData → Edge Cases → handles error code with numbers
  ✓ ErrorDefinitionData → Edge Cases → handles empty description
  ⨯ ErrorDefinitionData → Edge Cases → handles details with $ref
  ✓ ErrorDefinitionData → Edge Cases → handles details with nested schema
  ✓ ErrorDefinitionData → Edge Cases → toArray preserves details schema structure
  ✓ ErrorDefinitionData → Sad Paths → validates required code field exists
  ✓ ErrorDefinitionData → Sad Paths → validates required message field exists
  ✓ ErrorDefinitionData → Sad Paths → validates optional description field
  ✓ ErrorDefinitionData → Sad Paths → validates optional details field

   FAIL  Tests\Unit\Discovery\ExamplePairingDataTest
  ✓ ExamplePairingData → Happy Paths → creates instance with required f… 0.01s  
  ✓ ExamplePairingData → Happy Paths → creates instance with all fields populated
  ✓ ExamplePairingData → Happy Paths → creates instance with multiple parameters
  ✓ ExamplePairingData → Happy Paths → toArray includes all required fields
  ✓ ExamplePairingData → Happy Paths → toArray includes optional fields when provided
  ⨯ ExamplePairingData → Sad Paths - Validation Errors → rejects empty params array
  ⨯ ExamplePairingData → Sad Paths - Validation Errors → rejects param missing name key
  ⨯ ExamplePairingData → Sad Paths - Validation Errors → rejects param missing value key
  ✓ ExamplePairingData → Sad Paths - Validation Errors → rejects invalid parameter name format with hyphens
  ✓ ExamplePairingData → Sad Paths - Validation Errors → rejects invalid parameter name starting with uppercase
  ✓ ExamplePairingData → Sad Paths - Validation Errors → rejects invalid parameter name starting with number
  ⨯ ExamplePairingData → Sad Paths - Validation Errors → rejects non-array parameter
  ⨯ ExamplePairingData → Sad Paths - Validation Errors → rejects param with non-string name
  ⨯ ExamplePairingData → Sad Paths - Validation Errors → rejects result missing name key
  ⨯ ExamplePairingData → Sad Paths - Validation Errors → rejects result missing value key
  ⨯ ExamplePairingData → Sad Paths - Validation Errors → rejects result with non-string name
  ✓ ExamplePairingData → Edge Cases → accepts valid camelCase parameter names
  ✓ ExamplePairingData → Edge Cases → accepts valid snake_case parameter names
  ✓ ExamplePairingData → Edge Cases → handles params with null values
  ✓ ExamplePairingData → Edge Cases → handles params with complex nested values
  ✓ ExamplePairingData → Edge Cases → handles result with null value
  ✓ ExamplePairingData → Edge Cases → handles params with boolean and numeric values
  ✓ ExamplePairingData → Edge Cases → notification-style pairing without result
  ✓ ExamplePairingData → Edge Cases → handles complex result structures

   FAIL  Tests\Unit\Discovery\FunctionDescriptorDataTest
  ✓ FunctionDescriptorData → Happy Paths → creates instance with requir… 0.01s  
  ⨯ FunctionDescriptorData → Happy Paths → creates instance with all fields populated
  ✓ FunctionDescriptorData → Happy Paths → creates instance with multiple side effects
  ✓ FunctionDescriptorData → Happy Paths → creates instance with empty side effects for read-only function
  ✓ FunctionDescriptorData → Happy Paths → creates instance with discoverable false
  ✓ FunctionDescriptorData → Happy Paths → toArray outputs sideEffects in camelCase
  ✓ FunctionDescriptorData → Happy Paths → toArray outputs externalDocs in camelCase
  ✓ FunctionDescriptorData → Happy Paths → toArray includes all required fields
  ✓ FunctionDescriptorData → Happy Paths → toArray handles null optional fields
  ✓ FunctionDescriptorData → Happy Paths → toArray includes discoverable with default
  ✓ FunctionDescriptorData → Edge Cases → handles empty arguments array
  ✓ FunctionDescriptorData → Edge Cases → handles multiple arguments
  ✓ FunctionDescriptorData → Edge Cases → handles tags as array of arrays
  ✓ FunctionDescriptorData → Edge Cases → handles errors as array of arrays
  ✓ FunctionDescriptorData → Edge Cases → handles null side effects
  ✓ FunctionDescriptorData → Edge Cases → handles function name with dots
  ✓ FunctionDescriptorData → Edge Cases → handles version as string with multiple digits
  ✓ FunctionDescriptorData → Edge Cases → toArray with nested Data objects converts correctly
  ✓ FunctionDescriptorData → Sad Paths → validates required name field exists
  ✓ FunctionDescriptorData → Sad Paths → validates required version field exists
  ✓ FunctionDescriptorData → Sad Paths → validates required arguments field exists

   FAIL  Tests\Unit\Discovery\FunctionDescriptorTest
  ✓ FunctionDescriptor → Happy Paths → creates instance with make()      0.01s  
  ✓ FunctionDescriptor → Happy Paths → sets name with string
  ✓ FunctionDescriptor → Happy Paths → sets urn with BackedEnum
  ✓ FunctionDescriptor → Happy Paths → sets version
  ✓ FunctionDescriptor → Happy Paths → defaults version to 1.0.0
  ✓ FunctionDescriptor → Happy Paths → sets summary
  ✓ FunctionDescriptor → Happy Paths → sets description
  ✓ FunctionDescriptor → Happy Paths → defaults to discoverable
  ✓ FunctionDescriptor → Happy Paths → sets hidden
  ✓ FunctionDescriptor → Happy Paths → adds argument with fluent API
  ✓ FunctionDescriptor → Happy Paths → adds multiple arguments
  ✓ FunctionDescriptor → Happy Paths → adds pre-built ArgumentData
  ✓ FunctionDescriptor → Happy Paths → sets result with schema
  ✓ FunctionDescriptor → Happy Paths → sets result with resource
  ✓ FunctionDescriptor → Happy Paths → adds error with string code
  ✓ FunctionDescriptor → Happy Paths → adds error with BackedEnum code
  ✓ FunctionDescriptor → Happy Paths → adds error with ErrorCode enum
  ⨯ FunctionDescriptor → Happy Paths → adds tag with string
  ⨯ FunctionDescriptor → Happy Paths → adds tag with BackedEnum
  ✓ FunctionDescriptor → Happy Paths → sets query capabilities
  ⨯ FunctionDescriptor → Happy Paths → sets deprecated
  ✓ FunctionDescriptor → Happy Paths → sets side effects
  ✓ FunctionDescriptor → Happy Paths → adds example
  ⨯ FunctionDescriptor → Happy Paths → adds link
  ✓ FunctionDescriptor → Happy Paths → sets external docs
  ✓ FunctionDescriptor → Happy Paths → adds simulation
  ✓ FunctionDescriptor → Happy Paths → sets extensions
  ⨯ FunctionDescriptor → Happy Paths → chains all methods fluently
  ✓ FunctionDescriptor → Edge Cases → handles empty arguments
  ✓ FunctionDescriptor → Edge Cases → handles empty errors
  ✓ FunctionDescriptor → Edge Cases → handles null optional fields
  ✓ FunctionDescriptor → Edge Cases → argument with all parameters
  ✓ FunctionDescriptor → Edge Cases → result with description
  ✓ FunctionDescriptor → Edge Cases → error with all parameters
  ⨯ FunctionDescriptor → Edge Cases → multiple tags accumulate
  ✓ FunctionDescriptor → Edge Cases → multiple examples accumulate
  ✓ FunctionDescriptor → Edge Cases → multiple links accumulate
  ⨯ FunctionDescriptor → Edge Cases → multiple simulations accumulate

   FAIL  Tests\Unit\Discovery\FunctionExtensionsDataTest
  ✓ FunctionExtensionsData → Happy Paths → creates instance with suppor… 0.02s  
  ✓ FunctionExtensionsData → Happy Paths → creates instance with excluded extensions (blocklist)
  ✓ FunctionExtensionsData → Happy Paths → creates empty instance for default behavior
  ✓ FunctionExtensionsData → Happy Paths → toArray includes supported extensions
  ✓ FunctionExtensionsData → Happy Paths → toArray includes excluded extensions
  ✓ FunctionExtensionsData → Happy Paths → creates from array with supported
  ✓ FunctionExtensionsData → Happy Paths → creates from array with excluded
  ⨯ FunctionExtensionsData → Edge Cases → handles empty supported array
  ⨯ FunctionExtensionsData → Edge Cases → handles empty excluded array
  ✓ FunctionExtensionsData → Edge Cases → handles multiple supported extensions
  ✓ FunctionExtensionsData → Edge Cases → handles multiple excluded extensions

   FAIL  Tests\Unit\Discovery\LinkDataTest
  ✓ LinkData → Happy Paths → creates instance with required fields only  0.01s  
  ⨯ LinkData → Happy Paths → creates instance with all fields populated
  ⨯ LinkData → Happy Paths → creates instance with function reference
  ⨯ LinkData → Happy Paths → creates instance with runtime expression params
  ✓ LinkData → Happy Paths → toArray includes all required fields
  ⨯ LinkData → Happy Paths → toArray includes nested server object
  ✓ LinkData → Edge Cases → handles informational link without function
  ⨯ LinkData → Edge Cases → handles empty params array
  ⨯ LinkData → Edge Cases → handles params with complex runtime expressions
  ⨯ LinkData → Edge Cases → handles params with static and dynamic values mixed
  ⨯ LinkData → Edge Cases → handles server with full configuration

   FAIL  Tests\Unit\Discovery\ResultDescriptorDataTest
  ✓ ResultDescriptorData → Happy Paths → creates instance with resource… 0.01s  
  ✓ ResultDescriptorData → Happy Paths → creates instance with schema field only
  ✓ ResultDescriptorData → Happy Paths → creates instance for single resource
  ✓ ResultDescriptorData → Happy Paths → creates instance for resource collection
  ✓ ResultDescriptorData → Happy Paths → creates instance for non-resource response
  ⨯ ResultDescriptorData → Happy Paths → creates instance with all fields populated
  ✓ ResultDescriptorData → Happy Paths → toArray includes resource when set
  ✓ ResultDescriptorData → Happy Paths → toArray includes schema when set
  ✓ ResultDescriptorData → Happy Paths → toArray includes collection with default false
  ⨯ ResultDescriptorData → Happy Paths → toArray handles null fields
  ✓ ResultDescriptorData → Happy Paths → toArray includes description when set
  ⨯ ResultDescriptorData → Edge Cases → handles null resource
  ⨯ ResultDescriptorData → Edge Cases → handles null schema
  ✓ ResultDescriptorData → Edge Cases → handles collection false explicitly
  ✓ ResultDescriptorData → Edge Cases → handles collection true
  ⨯ ResultDescriptorData → Edge Cases → handles both resource and schema set
  ⨯ ResultDescriptorData → Edge Cases → handles neither resource nor schema set
  ⨯ ResultDescriptorData → Edge Cases → handles empty schema object
  ✓ ResultDescriptorData → Edge Cases → handles complex schema structure
  ✓ ResultDescriptorData → Edge Cases → handles schema with $ref
  ✓ ResultDescriptorData → Edge Cases → handles empty description
  ✓ ResultDescriptorData → Edge Cases → toArray preserves complex schema structure
  ⨯ ResultDescriptorData → Sad Paths → validates optional resource field
  ⨯ ResultDescriptorData → Sad Paths → validates optional schema field
  ⨯ ResultDescriptorData → Sad Paths → validates collection defaults to false
  ⨯ ResultDescriptorData → Sad Paths → validates optional description field

   FAIL  Tests\Unit\Discovery\ServerExtensionDeclarationDataTest
  ✓ ServerExtensionDeclarationData → Happy Paths → creates instance wit… 0.01s  
  ⨯ ServerExtensionDeclarationData → Happy Paths → supports various URN formats
  ✓ ServerExtensionDeclarationData → Happy Paths → supports prerelease versions
  ✓ ServerExtensionDeclarationData → Happy Paths → toArray includes all fields
  ⨯ ServerExtensionDeclarationData → Edge Cases → handles extension with complex URN namespace
  ✓ ServerExtensionDeclarationData → Edge Cases → handles version with build metadata

   FAIL  Tests\Unit\Discovery\ServerVariableDataTest
  ✓ ServerVariableData → Happy Paths → creates instance with default on… 0.01s  
  ✓ ServerVariableData → Happy Paths → creates instance with enum
  ✓ ServerVariableData → Happy Paths → creates instance with default in enum list
  ✓ ServerVariableData → Happy Paths → creates instance with minimal fields
  ✓ ServerVariableData → Happy Paths → creates instance with all fields populated
  ✓ ServerVariableData → Happy Paths → toArray includes all fields
  ✓ ServerVariableData → Happy Paths → toArray handles null optional fields
  ✓ ServerVariableData → Happy Paths → creates instance with single enum value matching default
  ✓ ServerVariableData → Happy Paths → creates instance with numeric string default
  ✓ ServerVariableData → Edge Cases → handles whitespace in default value
  ✓ ServerVariableData → Edge Cases → handles enum with duplicate values
  ✓ ServerVariableData → Edge Cases → handles long description
  ✓ ServerVariableData → Edge Cases → handles special characters in default
  ✓ ServerVariableData → Edge Cases → handles case-sensitive enum matching
  ✓ ServerVariableData → Sad Paths → rejects default not in enum
  ✓ ServerVariableData → Sad Paths → rejects empty default
  ✓ ServerVariableData → Sad Paths → rejects whitespace-only default
  ⨯ ServerVariableData → Sad Paths → rejects empty enum array
  ✓ ServerVariableData → Sad Paths → rejects non-string enum values
  ✓ ServerVariableData → Sad Paths → rejects mixed type enum values
  ✓ ServerVariableData → Sad Paths → rejects null in enum values
  ✓ ServerVariableData → Sad Paths → rejects boolean in enum values
  ✓ ServerVariableData → Sad Paths → rejects array in enum values
  ✓ ServerVariableData → Sad Paths → rejects object in enum values
  ✓ ServerVariableData → Sad Paths → error message includes all enum va… 0.01s  
  ⨯ ServerVariableData → Sad Paths → error message identifies index of invalid enum value
  ⨯ ServerVariableData → Sad Paths → validates enum before checking default is in enum

   FAIL  Tests\Unit\Discovery\SimulationScenarioDataTest
  ⨯ SimulationScenarioData → Happy Paths → creates instance with all pa… 0.01s  
  ✓ SimulationScenarioData → Happy Paths → creates instance with only required parameters
  ✓ SimulationScenarioData → Happy Paths → creates success scenario using factory method with description
  ✓ SimulationScenarioData → Happy Paths → creates success scenario using factory method without description
  ✓ SimulationScenarioData → Happy Paths → creates error scenario using factory method with error code and message
  ✓ SimulationScenarioData → Happy Paths → creates error scenario using factory method with error data included
  ✓ SimulationScenarioData → Happy Paths → handles complex nested input structures
  ✓ SimulationScenarioData → Happy Paths → handles complex nested output structures
  ✓ SimulationScenarioData → Happy Paths → handles unicode characters in name field
  ✓ SimulationScenarioData → Happy Paths → handles unicode characters in description field
  ✓ SimulationScenarioData → Happy Paths → handles different output types with scalar values
  ⨯ SimulationScenarioData → Happy Paths → handles empty arrays in input and output
  ✓ SimulationScenarioData → Edge Cases → handles null output value explicitly
  ✓ SimulationScenarioData → Edge Cases → handles error scenario without optional data parameter
  ⨯ SimulationScenarioData → Edge Cases → handles empty string as error code
  ⨯ SimulationScenarioData → Edge Cases → handles lowercase error codes
  ⨯ SimulationScenarioData → Edge Cases → handles empty string as name
  ✓ SimulationScenarioData → Edge Cases → handles very long scenario name
  ✓ SimulationScenarioData → Edge Cases → handles very long description
  ✓ SimulationScenarioData → Edge Cases → handles special characters in error message
  ✓ SimulationScenarioData → Edge Cases → handles null values within nested input arrays
  ✓ SimulationScenarioData → Edge Cases → handles metadata with various data types
  ✓ SimulationScenarioData → Edge Cases → handles input with numeric string keys

   FAIL  Tests\Unit\Exceptions\AbstractRequestExceptionTest
  ✓ AbstractRequestException → Happy Paths → creates exception with err… 0.01s  
  ✓ AbstractRequestException → Happy Paths → returns error data via getErrorDetails
  ✓ AbstractRequestException → Happy Paths → converts exception to error data object
  ✓ AbstractRequestException → Happy Paths → converts exception to array representation
  ✓ AbstractRequestException → Happy Paths → returns empty headers by default
  ✓ AbstractRequestException → Sad Paths → handles exception with null data
  ✓ AbstractRequestException → Edge Cases → includes debug information when debug mode is enabled
  ✓ AbstractRequestException → Edge Cases → excludes debug information when debug mode is disabled
  ✓ AbstractRequestException → Edge Cases → filters out null values in array representation
  ✓ AbstractRequestException → Edge Cases → merges debug data with existing error data
  ⨯ AbstractRequestException → Edge Cases → handles empty data array
  ✓ AbstractRequestException → getStatusCode - Standard Error Codes → returns 400 for parse error
  ✓ AbstractRequestException → getStatusCode - Standard Error Codes → returns 400 for invalid request
  ✓ AbstractRequestException → getStatusCode - Standard Error Codes → returns 404 for function not found
  ✓ AbstractRequestException → getStatusCode - Standard Error Codes → returns 400 for invalid arguments
  ✓ AbstractRequestException → getStatusCode - Standard Error Codes → returns 500 for internal error
  ✓ AbstractRequestException → getStatusCode - Standard Error Codes → returns 500 for server error
  ✓ AbstractRequestException → getStatusCode - Standard Error Codes → returns 401 for unauthorized
  ✓ AbstractRequestException → getStatusCode - Standard Error Codes → returns 403 for forbidden
  ✓ AbstractRequestException → getStatusCode - Standard Error Codes → returns 422 for validation error
  ✓ AbstractRequestException → getStatusCode - Standard Error Codes → returns 429 for rate limited
  ✓ AbstractRequestException → getStatusCode - Standard Error Codes → returns 503 for service unavailable

   PASS  Tests\Unit\Exceptions\Actions\RendersThrowableTest
  ✓ RendersThrowable → Happy Paths → registers renderable on Exceptions… 0.01s  
  ✓ RendersThrowable → Happy Paths → returns JSON response for JSON req… 0.01s  
  ✓ RendersThrowable → Happy Paths → maps exception through ExceptionMapper
  ✓ RendersThrowable → Happy Paths → includes request ID in response
  ✓ RendersThrowable → Happy Paths → maps authentication exception to unauthorized error
  ✓ RendersThrowable → Happy Paths → maps authorization exception to forbidden error
  ✓ RendersThrowable → Happy Paths → maps model not found exception to resource not found error
  ✓ RendersThrowable → Happy Paths → maps item not found exception to resource not found error
  ✓ RendersThrowable → Happy Paths → maps throttle requests exception to too many requests error
  ✓ RendersThrowable → Happy Paths → maps validation exception to valid… 0.01s  
  ✓ RendersThrowable → Happy Paths → maps generic exception to internal error
  ✓ RendersThrowable → Sad Paths → returns null for non-JSON request
  ✓ RendersThrowable → Sad Paths → generates ID when request ID is missing
  ✓ RendersThrowable → Edge Cases → response includes protocol and result fields
  ✓ RendersThrowable → Edge Cases → preserves exception headers
  ✓ RendersThrowable → Edge Cases → preserves exception status code
  ✓ RendersThrowable → Edge Cases → generates ID for request with empty string id
  ✓ RendersThrowable → Edge Cases → handles request with string id
  ✓ RendersThrowable → Edge Cases → handles exception with empty message
  ✓ RendersThrowable → Edge Cases → handles unicode characters in exception messages

   PASS  Tests\Unit\Exceptions\Concerns\RendersThrowableTest
  ✓ RendersThrowable → renderableThrowable registers a renderable closu… 0.01s  
  ✓ RendersThrowable → returns null when request does not want JSON      0.01s  
  ✓ RendersThrowable → maps exception through ExceptionMapper for JSON requests
  ✓ RendersThrowable → includes request ID in response when present
  ✓ RendersThrowable → generates ID when not present in request
  ✓ RendersThrowable → uses status code from mapped exception
  ✓ RendersThrowable → includes headers from mapped exception
  ✓ RendersThrowable → maps ValidationException to SemanticValidationException
  ✓ RendersThrowable → preserves Forrst compliant exception without remapping
  ✓ RendersThrowable → returns Forrst protocol compliant response structure

   PASS  Tests\Unit\Exceptions\ExceptionMapperTest
  ✓ ExceptionMapper → maps exception to Forrst exception                 0.01s  

   PASS  Tests\Unit\Exceptions\ForbiddenExceptionTest
  ✓ ForbiddenException → Happy Paths → creates an forbidden exception

   PASS  Tests\Unit\Exceptions\FunctionNotFoundExceptionTest
  ✓ FunctionNotFoundException → Happy Paths → creates a method not found exception

   PASS  Tests\Unit\Exceptions\InternalErrorExceptionTest
  ✓ InternalErrorException → Happy Paths → creates an internal error exception

   PASS  Tests\Unit\Exceptions\InvalidDataExceptionTest
  ✓ InvalidDataException → Happy Paths → creates an invalid params exception from a validation exception

   PASS  Tests\Unit\Exceptions\InvalidFieldsExceptionTest
  ✓ InvalidFieldsException → Happy Paths → creates an invalid fields exception

   PASS  Tests\Unit\Exceptions\InvalidFiltersExceptionTest
  ✓ InvalidFiltersException → Happy Paths → creates an invalid filters exception

   PASS  Tests\Unit\Exceptions\InvalidParamsExceptionTest
  ✓ InvalidParamsException → Happy Paths → creates a server error exception

   PASS  Tests\Unit\Exceptions\InvalidRelationshipsExceptionTest
  ✓ InvalidRelationshipsException → Happy Paths → creates exception with unknown and allowed relationships
  ✓ InvalidRelationshipsException → Happy Paths → creates exception wit… 0.01s  
  ✓ InvalidRelationshipsException → Happy Paths → creates exception with multiple unknown relationships
  ✓ InvalidRelationshipsException → Sad Paths → creates exception when some unknown relationships overlap with allowed
  ✓ InvalidRelationshipsException → Sad Paths → creates exception with empty unknown relationships after filtering
  ✓ InvalidRelationshipsException → Edge Cases → creates exception with special characters in relationship names
  ✓ InvalidRelationshipsException → Edge Cases → creates exception with very long relationship names
  ✓ InvalidRelationshipsException → Edge Cases → creates exception with duplicate unknown relationships

   PASS  Tests\Unit\Exceptions\InvalidRequestExceptionTest
  ✓ InvalidRequestException → Happy Paths → creates an invalid request…  0.01s  

   PASS  Tests\Unit\Exceptions\InvalidSortsExceptionTest
  ✓ InvalidSortsException → Happy Paths → creates an invalid filters exception

   PASS  Tests\Unit\Exceptions\JsonSchemaExceptionTest
  ✓ JsonSchemaException → Happy Paths → creates exception for invalid rule

   PASS  Tests\Unit\Exceptions\OperationFailedExceptionTest
  ✓ OperationFailedException → Happy Paths → creates exception with operation id and custom reason
  ✓ OperationFailedException → Happy Paths → creates exception with default message when reason is null
  ✓ OperationFailedException → Edge Cases → handles empty operation id
  ✓ OperationFailedException → Edge Cases → handles empty reason string

   PASS  Tests\Unit\Exceptions\ParseErrorExceptionTest
  ✓ ParseErrorException → Happy Paths → creates a parse error exception  0.01s  

   PASS  Tests\Unit\Exceptions\ResourceNotFoundExceptionTest
  ✓ ResourceNotFoundException → Happy Paths → creates exception with default detail
  ✓ ResourceNotFoundException → Happy Paths → creates exception with custom detail

   PASS  Tests\Unit\Exceptions\ServerErrorExceptionTest
  ✓ ServerErrorException → Happy Paths → creates a server error exception

   PASS  Tests\Unit\Exceptions\ServerNotFoundExceptionTest
  ✓ ServerNotFoundException → Happy Paths → creates a server not error exception

   PASS  Tests\Unit\Exceptions\ServiceUnavailableExceptionTest
  ✓ ServiceUnavailableException → Happy Paths → creates exception with…  0.01s  
  ✓ ServiceUnavailableException → Happy Paths → creates exception with custom detail

   PASS  Tests\Unit\Exceptions\TooManyRequestsExceptionTest
  ✓ TooManyRequestsException → Happy Paths → creates basic rate limit exception with default detail message
  ✓ TooManyRequestsException → Happy Paths → creates basic rate limit exception with custom detail message
  ✓ TooManyRequestsException → Happy Paths → creates exception with complete rate limit details for client backoff
  ✓ TooManyRequestsException → Happy Paths → includes rate limit threshold in structured details
  ✓ TooManyRequestsException → Happy Paths → includes current usage count in structured details
  ✓ TooManyRequestsException → Happy Paths → includes time window definition with value and unit
  ✓ TooManyRequestsException → Happy Paths → includes retry timing information with value and unit
  ✓ TooManyRequestsException → Happy Paths → serializes to array with all rate limit information
  ✓ TooManyRequestsException → Happy Paths → returns 429 status code for HTTP responses
  ✓ TooManyRequestsException → Sad Paths → handles zero limit indicating no requests allowed
  ✓ TooManyRequestsException → Sad Paths → handles excessive usage count far exceeding limit
  ✓ TooManyRequestsException → Sad Paths → uses default detail message when null is provided to create method
  ✓ TooManyRequestsException → Sad Paths → uses default detail message when null is provided to createWithDetails method
  ✓ TooManyRequestsException → Edge Cases → handles rate limit at exact threshold with equal used and limit
  ✓ TooManyRequestsException → Edge Cases → handles very short time window of 1 second
  ✓ TooManyRequestsException → Edge Cases → handles very long time window of 24 hours
  ✓ TooManyRequestsException → Edge Cases → handles immediate retry with zero retry-after value
  ✓ TooManyRequestsException → Edge Cases → handles large retry-after value for long backoff period
  ✓ TooManyRequestsException → Edge Cases → includes HTTP status code in details for basic create method
  ✓ TooManyRequestsException → Edge Cases → includes HTTP status code in details for createWithDetails method
  ✓ TooManyRequestsException → Edge Cases → includes error title in details for basic create method
  ✓ TooManyRequestsException → Edge Cases → includes error title in details for createWithDetails method
  ✓ TooManyRequestsException → Edge Cases → handles custom detail message with special characters
  ✓ TooManyRequestsException → Edge Cases → handles very large limit values for high-throughput APIs
  ✓ TooManyRequestsException → Edge Cases → handles different time unit combinations for window and retry
  ✓ TooManyRequestsException → Edge Cases → preserves all structured da… 0.01s  

   PASS  Tests\Unit\Exceptions\UnauthorizedExceptionTest
  ✓ UnauthorizedException → Happy Paths → creates an unauthorized excep… 0.01s  

   PASS  Tests\Unit\Exceptions\UnprocessableEntityExceptionTest
  ✓ UnprocessableEntityException → Happy Paths → creates exception with default detail
  ✓ UnprocessableEntityException → Happy Paths → creates exception with custom detail
  ✓ UnprocessableEntityException → Happy Paths → creates exception from Laravel validation exception

   PASS  Tests\Unit\Extensions\AbstractExtensionTest
  ✓ AbstractExtension → Happy Paths → implements ExtensionInterface contract
  ✓ AbstractExtension → Happy Paths → isGlobal returns false by default for opt-in behavior
  ✓ AbstractExtension → Happy Paths → isErrorFatal returns true by default for fatal error handling
  ✓ AbstractExtension → Happy Paths → getSubscribedEvents returns empty array by default
  ✓ AbstractExtension → Happy Paths → toCapabilities returns URN in capabilities format
  ✓ AbstractExtension → Happy Paths → toCapabilities array contains only URN by default
  ✓ AbstractExtension → Happy Paths → getUrn is called by toCapabilities method
  ✓ AbstractExtension → Sad Paths → getSubscribedEvents does not subscribe to RequestValidated by default
  ✓ AbstractExtension → Sad Paths → getSubscribedEvents does not subscribe to ExecutingFunction by default
  ✓ AbstractExtension → Sad Paths → getSubscribedEvents does not subscribe to FunctionExecuted by default
  ✓ AbstractExtension → Sad Paths → getSubscribedEvents does not subscribe to SendingResponse by default
  ✓ AbstractExtension → Edge Cases → concrete extension can override isGlobal to return true
  ✓ AbstractExtension → Edge Cases → concrete extension can override isErrorFatal to return false
  ✓ AbstractExtension → Edge Cases → concrete extension can override getSubscribedEvents with custom subscriptions
  ✓ AbstractExtension → Edge Cases → concrete extension can override getCapabilityMetadata to include documentation URL
  ✓ AbstractExtension → Edge Cases → toCapabilities uses getUrn method consistently
  ✓ AbstractExtension → Edge Cases → multiple instances maintain independent state

   FAIL  Tests\Unit\Extensions\Async\AsyncExtensionTest
  ✓ AsyncExtension → Happy Paths → returns correct URN constant          0.01s  
  ✓ AsyncExtension → Happy Paths → isPreferred returns true when preferred option is set
  ✓ AsyncExtension → Happy Paths → getCallbackUrl returns callback URL from options
  ✓ AsyncExtension → Happy Paths → isErrorFatal returns true
  ⨯ AsyncExtension → Happy Paths → createAsyncOperation generates opera… 0.01s  
  ⨯ AsyncExtension → Happy Paths → createAsyncOperation includes callback URL in operation metadata when provided
  ⨯ AsyncExtension → Happy Paths → createAsyncOperation includes original request ID in operation metadata
  ⨯ AsyncExtension → Happy Paths → createAsyncOperation uses custom retry seconds in response
  ⨯ AsyncExtension → Happy Paths → createAsyncOperation includes poll function specification in response
  ✓ AsyncExtension → Happy Paths → markProcessing transitions operation to processing status with start timestamp
  ✓ AsyncExtension → Happy Paths → markProcessing sets initial progress when provided
  ✓ AsyncExtension → Happy Paths → complete transitions operation to completed status with result and timestamp
  ✓ AsyncExtension → Happy Paths → fail transitions operation to failed status with errors and timestamp
  ✓ AsyncExtension → Happy Paths → updateProgress updates operation progress and preserves existing data
  ⨯ AsyncExtension → Happy Paths → updateProgress includes progress message in metadata when provided
  ✓ AsyncExtension → Edge Cases → isPreferred returns false when preferred option is missing
  ✓ AsyncExtension → Edge Cases → isPreferred returns false when preferred is not boolean true
  ✓ AsyncExtension → Edge Cases → isPreferred handles null options gracefully
  ✓ AsyncExtension → Edge Cases → getCallbackUrl returns null when not specified
  ✓ AsyncExtension → Edge Cases → getCallbackUrl handles null options
  ⨯ AsyncExtension → Edge Cases → markProcessing does nothing when operation not found
  ⨯ AsyncExtension → Edge Cases → complete does nothing when operation not found
  ⨯ AsyncExtension → Edge Cases → fail does nothing when operation not found
  ⨯ AsyncExtension → Edge Cases → updateProgress does nothing when operation not found
  ⨯ AsyncExtension → Edge Cases → updateProgress clamps progress above…  0.01s  
  ⨯ AsyncExtension → Edge Cases → updateProgress clamps progress below 0.0 to 0.0
  ⨯ AsyncExtension → Edge Cases → updateProgress handles null metadata in existing operation
  ⨯ AsyncExtension → Edge Cases → createAsyncOperation merges custom metadata with default metadata
  ⨯ AsyncExtension → Edge Cases → createAsyncOperation generates unique operation IDs
  ⨯ AsyncExtension → Edge Cases → createAsyncOperation includes function version in operation
  ✓ AsyncExtension → Edge Cases → markProcessing preserves existing metadata
  ⨯ AsyncExtension → Edge Cases → complete preserves existing metadata
  ⨯ AsyncExtension → Edge Cases → fail preserves existing metadata
  ⨯ AsyncExtension → Edge Cases → fail preserves progress from processing operation
  ✓ AsyncExtension → Edge Cases → complete preserves startedAt timestamp from processing operation
  ✓ AsyncExtension → Edge Cases → fail preserves startedAt timestamp from processing operation
  ✓ AsyncExtension → Sad Paths → isPreferred returns false for false value

   FAIL  Tests\Unit\Extensions\Async\Functions\OperationCancelFunctionTest
  ✓ OperationCancelFunction → Happy Paths → getName() → returns standar… 0.01s  
  ✓ OperationCancelFunction → Happy Paths → getVersion() → returns default version
  ✓ OperationCancelFunction → Happy Paths → getSummary() → returns description of operation cancel function
  ✓ OperationCancelFunction → Happy Paths → getArguments() → returns operation_id argument
  ⨯ OperationCancelFunction → Happy Paths → getArguments() → operation_id argument is required string
  ✓ OperationCancelFunction → Happy Paths → getResult() → returns ResultDescriptorData with cancellation response schema
  ✓ OperationCancelFunction → Happy Paths → getResult() → schema defines status as const cancelled
  ✓ OperationCancelFunction → Happy Paths → getResult() → schema requires operation_id, status, and cancelled_at
  ✓ OperationCancelFunction → Happy Paths → getErrors() → returns both error definitions
  ✓ OperationCancelFunction → Happy Paths → getErrors() → includes Asyn… 0.01s  
  ✓ OperationCancelFunction → Happy Paths → getErrors() → includes AsyncCannotCancel error definition
  ⨯ OperationCancelFunction → Happy Paths → __invoke() → cancels pendin… 0.01s  
  ⨯ OperationCancelFunction → Happy Paths → __invoke() → cancels processing operation
  ⨯ OperationCancelFunction → Happy Paths → __invoke() → updates operation status to cancelled
  ⨯ OperationCancelFunction → Happy Paths → __invoke() → sets cancelled_at timestamp on operation
  ⨯ OperationCancelFunction → Happy Paths → __invoke() → saves operation to repository
  ⨯ OperationCancelFunction → Edge Cases → terminal status checks → operation is terminal after cancellation
  ⨯ OperationCancelFunction → Edge Cases → timestamp precision → cancelled_at matches return value timestamp
  ⨯ OperationCancelFunction → Sad Paths → operation not found → throws NotFoundException when operation does not exist
  ⨯ OperationCancelFunction → Sad Paths → cannot cancel terminal operations → throws OperationException when trying to cancel completed operation
  ⨯ OperationCancelFunction → Sad Paths → cannot cancel terminal operations → throws OperationException when trying to cancel failed operation
  ⨯ OperationCancelFunction → Sad Paths → cannot cancel terminal operations → throws OperationException when trying to cancel already cancelled operation
  ✓ OperationCancelFunction → Sad Paths → repository errors → propagates repository find exception
  ✓ OperationCancelFunction → Sad Paths → repository errors → propagates repository save exception

   FAIL  Tests\Unit\Extensions\Async\Functions\OperationListFunctionTest
  ✓ OperationListFunction → Happy Paths → getName() → returns standard…  0.01s  
  ✓ OperationListFunction → Happy Paths → getVersion() → returns default version
  ✓ OperationListFunction → Happy Paths → getSummary() → returns description of operation list function
  ✓ OperationListFunction → Happy Paths → getArguments() → returns four optional filter arguments
  ✓ OperationListFunction → Happy Paths → getArguments() → status argument is optional string with enum
  ✓ OperationListFunction → Happy Paths → getArguments() → function argument is optional string
  ✓ OperationListFunction → Happy Paths → getArguments() → limit argume… 0.01s  
  ⨯ OperationListFunction → Happy Paths → getArguments() → cursor argument is optional string
  ⨯ OperationListFunction → Happy Paths → getResult() → returns ResultDescriptorData with operation list schema
  ✓ OperationListFunction → Happy Paths → getResult() → schema requires operations array
  ✓ OperationListFunction → Happy Paths → getResult() → schema defines operations as array of objects
  ✓ OperationListFunction → Happy Paths → __invoke() → returns empty operations list when no operations exist
  ⨯ OperationListFunction → Happy Paths → __invoke() → returns list of operations
  ⨯ OperationListFunction → Happy Paths → __invoke() → passes status filter to repository
  ⨯ OperationListFunction → Happy Paths → __invoke() → passes function…  0.01s  
  ⨯ OperationListFunction → Happy Paths → __invoke() → passes limit to repository
  ⨯ OperationListFunction → Happy Paths → __invoke() → uses default limit of 50 when not provided
  ⨯ OperationListFunction → Happy Paths → __invoke() → passes cursor to repository
  ✓ OperationListFunction → Happy Paths → __invoke() → includes next_cursor when more results available
  ✓ OperationListFunction → Happy Paths → __invoke() → excludes next_cursor when no more results
  ⨯ OperationListFunction → Happy Paths → __invoke() → passes multiple filters to repository
  ✓ OperationListFunction → Edge Cases → operation data conversion → converts all operation fields to array
  ✓ OperationListFunction → Edge Cases → operation data conversion → handles large number of operations
  ⨯ OperationListFunction → Edge Cases → limit edge values → respects minimum limit of 1
  ⨯ OperationListFunction → Edge Cases → limit edge values → respects maximum limit of 100
  ✓ OperationListFunction → Sad Paths → repository errors → propagates repository exception

   FAIL  Tests\Unit\Extensions\Async\Functions\OperationStatusFunctionTest
  ✓ OperationStatusFunction → Happy Paths → getName() → returns standar… 0.01s  
  ✓ OperationStatusFunction → Happy Paths → getVersion() → returns default version
  ✓ OperationStatusFunction → Happy Paths → getSummary() → returns description of operation status function
  ✓ OperationStatusFunction → Happy Paths → getArguments() → returns operation_id argument
  ⨯ OperationStatusFunction → Happy Paths → getArguments() → operation_id argument is required string
  ✓ OperationStatusFunction → Happy Paths → getResult() → returns ResultDescriptorData with operation status schema
  ✓ OperationStatusFunction → Happy Paths → getResult() → schema defines status enum with operation states
  ✓ OperationStatusFunction → Happy Paths → getResult() → schema requires id and status fields
  ✓ OperationStatusFunction → Happy Paths → getErrors() → returns AsyncOperationNotFound error definition
  ⨯ OperationStatusFunction → Happy Paths → __invoke() → returns operation data for pending operation
  ⨯ OperationStatusFunction → Happy Paths → __invoke() → returns operation data for processing operation with progress
  ⨯ OperationStatusFunction → Happy Paths → __invoke() → returns operation data for completed operation with result
  ⨯ OperationStatusFunction → Happy Paths → __invoke() → returns operation data for failed operation with errors
  ⨯ OperationStatusFunction → Happy Paths → __invoke() → returns operation data for cancelled operation
  ⨯ OperationStatusFunction → Edge Cases → operation data conversion → handles operation with minimal fields
  ⨯ OperationStatusFunction → Edge Cases → operation data conversion → handles operation with all optional fields
  ⨯ OperationStatusFunction → Sad Paths → operation not found → throws NotFoundException when operation does not exist
  ⨯ OperationStatusFunction → Sad Paths → operation not found → exception message includes operation ID
  ✓ OperationStatusFunction → Sad Paths → repository errors → propagates repository exception

   FAIL  Tests\Unit\Extensions\AtomicLockExtensionTest
  ✓ AtomicLockExtension → Happy Paths → getUrn returns correct URN cons… 0.01s  
  ✓ AtomicLockExtension → Happy Paths → buildLockKey creates function-scoped key by default
  ✓ AtomicLockExtension → Happy Paths → buildLockKey creates global key when scope is global
  ✓ AtomicLockExtension → Happy Paths → onExecutingFunction acquires lo… 0.01s  
  ✓ AtomicLockExtension → Happy Paths → onExecutingFunction acquires lock with blocking
  ⨯ AtomicLockExtension → Happy Paths → onFunctionExecuted releases loc… 0.01s  
  ✓ AtomicLockExtension → Happy Paths → onFunctionExecuted does not release lock when auto_release is false
  ✓ AtomicLockExtension → Happy Paths → releaseLock releases lock with correct owner
  ✓ AtomicLockExtension → Happy Paths → forceReleaseLock releases lock without ownership check
  ✓ AtomicLockExtension → Happy Paths → getLockStatus returns locked status with metadata
  ✓ AtomicLockExtension → Happy Paths → getLockStatus returns unlocked status when no lock exists
  ✓ AtomicLockExtension → Edge Cases → onExecutingFunction uses custom owner token when provided
  ✓ AtomicLockExtension → Edge Cases → onExecutingFunction uses global scope when specified
  ✓ AtomicLockExtension → Edge Cases → onFunctionExecuted does nothing when context is null
  ✓ AtomicLockExtension → Edge Cases → parseDuration handles minutes correctly
  ✓ AtomicLockExtension → Edge Cases → parseDuration handles hours correctly
  ✓ AtomicLockExtension → Edge Cases → parseDuration handles days correctly
  ✓ AtomicLockExtension → Edge Cases → getLockStatus returns 0 for ttl_remaining when lock is expired
  ✓ AtomicLockExtension → Sad Paths → onExecutingFunction throws when key is missing
  ✓ AtomicLockExtension → Sad Paths → onExecutingFunction throws when ttl is missing
  ✓ AtomicLockExtension → Sad Paths → onExecutingFunction throws LockAcquisitionFailedException when lock is held
  ✓ AtomicLockExtension → Sad Paths → onExecutingFunction throws LockTimeoutException when blocking times out
  ✓ AtomicLockExtension → Sad Paths → releaseLock throws LockNotFoundException when lock does not exist
  ✓ AtomicLockExtension → Sad Paths → releaseLock throws LockOwnershipMismatchException when owner does not match
  ✓ AtomicLockExtension → Sad Paths → forceReleaseLock throws LockNotFoundException when lock does not exist

   FAIL  Tests\Unit\Extensions\CachingExtensionTest
  ✓ CachingExtension → Happy Paths → returns correct URN constant        0.01s  
  ✓ CachingExtension → Happy Paths → getIfNoneMatch returns ETag from options
  ✓ CachingExtension → Happy Paths → getIfModifiedSince returns Carbon timestamp from options
  ✓ CachingExtension → Happy Paths → isValid returns true when ETags match
  ✓ CachingExtension → Happy Paths → isValid returns true when current is not modified since client timestamp
  ✓ CachingExtension → Happy Paths → generateEtag creates consistent hash
  ✓ CachingExtension → Happy Paths → buildCacheHitResponse returns not modified response
  ✓ CachingExtension → Happy Paths → buildCacheMetadata creates metadata with etag and status
  ✓ CachingExtension → Happy Paths → buildCacheMetadata includes max_age when provided
  ✓ CachingExtension → Happy Paths → buildCacheMetadata includes last_modified when provided
  ✓ CachingExtension → Happy Paths → enrichResponse adds cache extension to response
  ⨯ CachingExtension → Happy Paths → enrichResponse preserves existing extensions
  ✓ CachingExtension → Happy Paths → getCached returns null when cache is not configured
  ✓ CachingExtension → Happy Paths → getCached returns null when cached value is not array
  ✓ CachingExtension → Happy Paths → setCached stores response in cache
  ✓ CachingExtension → Happy Paths → setCached uses custom TTL when provided
  ⨯ CachingExtension → Happy Paths → buildCacheKey creates consistent key from request
  ✓ CachingExtension → Happy Paths → buildCacheKey creates different keys for different arguments
  ✓ CachingExtension → Edge Cases → getIfNoneMatch returns null when option not set
  ✓ CachingExtension → Edge Cases → getIfNoneMatch handles null options
  ✓ CachingExtension → Edge Cases → getIfModifiedSince returns null when option not set
  ✓ CachingExtension → Edge Cases → getIfModifiedSince handles null options
  ✓ CachingExtension → Edge Cases → isValid returns false when ETags do not match
  ✓ CachingExtension → Edge Cases → isValid returns false when current is newer than client timestamp
  ✓ CachingExtension → Edge Cases → isValid normalizes ETags for comparison
  ✓ CachingExtension → Edge Cases → isValid handles weak validator prefix
  ✓ CachingExtension → Edge Cases → isValid returns false when neither ETag nor timestamp provided
  ✓ CachingExtension → Edge Cases → isValid prioritizes ETag over timestamp
  ✓ CachingExtension → Edge Cases → generateEtag creates different ETag… 0.01s  
  ✓ CachingExtension → Edge Cases → buildCacheMetadata uses default TTL when maxAge is null
  ✓ CachingExtension → Edge Cases → buildCacheMetadata omits max_age when TTL is 0
  ✓ CachingExtension → Edge Cases → getCached returns null when cache misses
  ✓ CachingExtension → Edge Cases → setCached does nothing when cache is not configured
  ✓ CachingExtension → Edge Cases → buildCacheKey handles null version
  ✓ CachingExtension → Edge Cases → buildCacheKey handles null arguments
  ✓ CachingExtension → Edge Cases → enrichResponse with custom cache status
  ✓ CachingExtension → Edge Cases → buildCacheMetadata includes all optional fields
  ✓ CachingExtension → Sad Paths → isValid returns false when only client timestamp provided without current

   FAIL  Tests\Unit\Extensions\CancellationExtensionTest
  ✓ CancellationExtension → Happy Paths → getUrn returns correct URN co… 0.01s  
  ✓ CancellationExtension → Happy Paths → onRequestValidated registers token as active in cache
  ✓ CancellationExtension → Happy Paths → cancel marks active token as cancelled in cache
  ✓ CancellationExtension → Happy Paths → onExecutingFunction returns cancelled error when token is cancelled
  ✓ CancellationExtension → Happy Paths → cleanup removes token from cache
  ✓ CancellationExtension → Happy Paths → onExecutingFunction does not stop propagation when token is active
  ✓ CancellationExtension → Happy Paths → cancel returns true when called multiple times on same token
  ✓ CancellationExtension → Happy Paths → isCancelled returns false for active token
  ✓ CancellationExtension → Happy Paths → isActive returns false for cancelled token
  ✓ CancellationExtension → Happy Paths → onExecutingFunction cleans up token after detecting cancellation
  ✓ CancellationExtension → Sad Paths → onRequestValidated returns error when token is missing from options
  ✓ CancellationExtension → Sad Paths → onRequestValidated returns error when token is empty string
  ✓ CancellationExtension → Sad Paths → cancel returns false for non-existent token
  ✓ CancellationExtension → Sad Paths → cancel returns false for expire… 2.01s  
  ✓ CancellationExtension → Sad Paths → onRequestValidated returns error when token is not a string
  ✓ CancellationExtension → Edge Cases → onRequestValidated does nothing when extension is not present
  ✓ CancellationExtension → Edge Cases → onExecutingFunction does nothing when token is missing from extension data
  ✓ CancellationExtension → Edge Cases → onExecutingFunction does nothing when token is empty string
  ✓ CancellationExtension → Edge Cases → onExecutingFunction does nothing when token is not a string
  ✓ CancellationExtension → Edge Cases → isCancelled returns false for non-existent token
  ✓ CancellationExtension → Edge Cases → isActive returns false for non-existent token
  ✓ CancellationExtension → Edge Cases → cleanup does nothing for non-existent token
  ✓ CancellationExtension → Edge Cases → token respects custom TTL configuration
  ✓ CancellationExtension → Edge Cases → multiple tokens can be active simultaneously
  ✓ CancellationExtension → Edge Cases → cancelling one token does not affect other tokens
  ⨯ CancellationExtension → Edge Cases → token can contain special characters
  ⨯ CancellationExtension → Edge Cases → token can be very long string
  ✓ CancellationExtension → Edge Cases → cleanup can be called multiple times on same token

   FAIL  Tests\Unit\Extensions\DeadlineExtensionTest
  ✓ DeadlineExtension → Happy Paths → returns correct URN constant       0.01s  
  ✓ DeadlineExtension → Happy Paths → getSubscribedEvents returns event configuration with priorities
  ✓ DeadlineExtension → Happy Paths → onExecutingFunction does not short-circuit when deadline is in future
  ✓ DeadlineExtension → Happy Paths → onExecutingFunction does not short-circuit when timeout is in future
  ✓ DeadlineExtension → Happy Paths → onExecutingFunction does not short-circuit when no deadline specified
  ✓ DeadlineExtension → Happy Paths → onFunctionExecuted adds deadline info to response
  ✓ DeadlineExtension → Happy Paths → onFunctionExecuted preserves response data
  ✓ DeadlineExtension → Happy Paths → onFunctionExecuted returns unmodified response when no deadline
  ✓ DeadlineExtension → Happy Paths → onFunctionExecuted handles timeout option
  ✓ DeadlineExtension → Happy Paths → onFunctionExecuted extracts timeo… 0.01s  
  ✓ DeadlineExtension → Edge Cases → onExecutingFunction handles null options
  ✓ DeadlineExtension → Edge Cases → onFunctionExecuted with null options returns unmodified response
  ✓ DeadlineExtension → Edge Cases → onFunctionExecuted includes remaining in response even for past deadline
  ⨯ DeadlineExtension → Edge Cases → onExecutingFunction parses ISO 8601 deadline timestamp
  ✓ DeadlineExtension → Edge Cases → onExecutingFunction handles timeout with different units with ('millisecond')
  ✓ DeadlineExtension → Edge Cases → onExecutingFunction handles timeout with different units with ('second')
  ✓ DeadlineExtension → Edge Cases → onExecutingFunction handles timeout with different units with ('minute')
  ✓ DeadlineExtension → Edge Cases → onExecutingFunction handles timeout with different units with ('hour')
  ⨯ DeadlineExtension → Edge Cases → onExecutingFunction handles timeout with different units with ('day')
  ⨯ DeadlineExtension → Edge Cases → onFunctionExecuted preserves existing response extensions
  ✓ DeadlineExtension → Edge Cases → onFunctionExecuted handles timeout value of 0
  ✓ DeadlineExtension → Edge Cases → onExecutingFunction prioritizes absolute deadline over timeout
  ✓ DeadlineExtension → Edge Cases → onFunctionExecuted calculates utilization for millisecond timeout
  ✓ DeadlineExtension → Edge Cases → onFunctionExecuted calculates utilization for minute timeout
  ✓ DeadlineExtension → Edge Cases → onFunctionExecuted calculates utilization for hour timeout
  ✓ DeadlineExtension → Edge Cases → onFunctionExecuted handles timeout with invalid unit gracefully
  ✓ DeadlineExtension → Sad Paths → onExecutingFunction returns error when absolute deadline has passed
  ✓ DeadlineExtension → Sad Paths → onExecutingFunction error response includes extension data
  ✓ DeadlineExtension → Sad Paths → onExecutingFunction returns error when timeout has already expired
  ✓ DeadlineExtension → Sad Paths → onExecutingFunction error response has null result

   FAIL  Tests\Unit\Extensions\DeprecationExtensionTest
  ✓ DeprecationExtension → Happy Paths → returns correct URN constant    0.01s  
  ✓ DeprecationExtension → Happy Paths → registerWarning registers a deprecation warning
  ✓ DeprecationExtension → Happy Paths → registerWarning supports method chaining
  ✓ DeprecationExtension → Happy Paths → deprecateFunction creates func… 0.01s  
  ✓ DeprecationExtension → Happy Paths → deprecateVersion creates version deprecation warning
  ✓ DeprecationExtension → Happy Paths → afterExecute adds deprecation warnings to response
  ✓ DeprecationExtension → Happy Paths → afterExecute returns unmodified response when no warnings apply
  ⨯ DeprecationExtension → Happy Paths → afterExecute filters acknowledged warnings
  ✓ DeprecationExtension → Happy Paths → afterExecute includes all warning fields
  ⨯ DeprecationExtension → Happy Paths → deprecateFunction includes replacement information
  ⨯ DeprecationExtension → Happy Paths → deprecateVersion applies to specific version
  ✓ DeprecationExtension → Happy Paths → afterExecute preserves response data
  ✓ DeprecationExtension → Edge Cases → registerWarning without optional fields
  ✓ DeprecationExtension → Edge Cases → deprecateFunction without replacement information
  ⨯ DeprecationExtension → Edge Cases → deprecateFunction with replacement function but no version
  ✓ DeprecationExtension → Edge Cases → deprecateVersion without replacement version
  ✓ DeprecationExtension → Edge Cases → afterExecute with empty acknowledge array shows all warnings
  ✓ DeprecationExtension → Edge Cases → afterExecute handles null acknowledge option
  ⨯ DeprecationExtension → Edge Cases → afterExecute preserves existing extensions
  ✓ DeprecationExtension → Edge Cases → deprecateVersion does not apply to different version
  ✓ DeprecationExtension → Edge Cases → multiple warnings for same function
  ✓ DeprecationExtension → Edge Cases → registerWarning overwrites existing warning with same URN
  ✓ DeprecationExtension → Edge Cases → supports all deprecation types with ('function')
  ✓ DeprecationExtension → Edge Cases → supports all deprecation types with ('version')
  ✓ DeprecationExtension → Edge Cases → supports all deprecation types with ('argument')
  ✓ DeprecationExtension → Edge Cases → supports all deprecation types with ('field')
  ✓ DeprecationExtension → Sad Paths → afterExecute handles request without version for version deprecation

   FAIL  Tests\Unit\Extensions\Discovery\DescribeFunctionTest
  ✓ DescribeFunction → Full Service Discovery → returns complete discov… 0.01s  
  ✓ DescribeFunction → Full Service Discovery → returns all discoverabl… 0.01s  
  ✓ DescribeFunction → Full Service Discovery → each function has requi… 0.01s  
  ✓ DescribeFunction → Full Service Discovery → includes standard error… 0.01s  
  ✓ DescribeFunction → Full Service Discovery → components section cont… 0.01s  
  ✓ DescribeFunction → Single Function Discovery → returns single function descriptor when function argument provided
  ✓ DescribeFunction → Single Function Discovery → returns empty array for non-existent function
  ✓ DescribeFunction → Single Function Discovery → filters by version when both function and version provided
  ✓ DescribeFunction → Single Function Discovery → returns empty for wrong version
  ✓ DescribeFunction → Ping Function Descriptor → has correct metadata
  ✓ DescribeFunction → Health Function Descriptor → has correct metadata with optional arguments
  ✓ DescribeFunction → Cancel Function Descriptor → has correct metadata with required token argument
  ✓ DescribeFunction → Capabilities Function Descriptor → has correct metadata
  ✓ DescribeFunction → Describe Function Descriptor → has correct metadata with optional arguments
  ✓ DescribeFunction → Lock Status Function Descriptor → has correct metadata with required key argument
  ✓ DescribeFunction → Lock Release Function Descriptor → has correct metadata with required arguments
  ✓ DescribeFunction → Lock Force Release Function Descriptor → has correct metadata
  ✓ DescribeFunction → Operation Status Function Descriptor → has correct metadata with operation_id argument
  ✓ DescribeFunction → Operation List Function Descriptor → has correct… 0.01s  
  ✓ DescribeFunction → Operation Cancel Function Descriptor → has correct metadata with operation_id argument
  ✓ DescribeFunction → Result Schema Validation → all functions with re… 0.01s  
  ✓ DescribeFunction → Argument Schema Validation → all arguments have…  0.01s  
  ✓ DescribeFunction → Snapshot Tests → ping descriptor matches snapsho… 0.01s  
  ⨯ DescribeFunction → Snapshot Tests → health descriptor matches snaps… 0.01s  
  ✓ DescribeFunction → Snapshot Tests → cancel descriptor matches snaps… 0.01s  
  ✓ DescribeFunction → Snapshot Tests → capabilities descriptor matches… 0.01s  
  ✓ DescribeFunction → Snapshot Tests → describe descriptor matches sna… 0.01s  
  ⨯ DescribeFunction → Snapshot Tests → lock status descriptor matches…  0.01s  
  ⨯ DescribeFunction → Snapshot Tests → lock release descriptor matches… 0.01s  
  ⨯ DescribeFunction → Snapshot Tests → lock force release descriptor m… 0.01s  
  ⨯ DescribeFunction → Snapshot Tests → operation status descriptor mat… 0.01s  
  ⨯ DescribeFunction → Snapshot Tests → operation list descriptor match… 0.01s  
  ⨯ DescribeFunction → Snapshot Tests → operation cancel descriptor mat… 0.01s  

   PASS  Tests\Unit\Extensions\DryRunExtensionTest
  ✓ DryRunExtension → Happy Paths → getUrn returns correct URN constant  0.01s  
  ✓ DryRunExtension → Happy Paths → isEnabled returns true when enabled option is true
  ✓ DryRunExtension → Happy Paths → isEnabled returns false when enabled option is false
  ✓ DryRunExtension → Happy Paths → shouldIncludeDiff returns true when include_diff is true
  ✓ DryRunExtension → Happy Paths → shouldIncludeSideEffects returns true when include_side_effects is true
  ✓ DryRunExtension → Happy Paths → buildValidResponse creates successful dry-run response
  ✓ DryRunExtension → Happy Paths → buildValidResponse includes diff when provided
  ✓ DryRunExtension → Happy Paths → buildValidResponse includes side effects when provided
  ✓ DryRunExtension → Happy Paths → buildValidResponse includes estimat… 0.01s  
  ✓ DryRunExtension → Happy Paths → buildInvalidResponse creates validation error response
  ✓ DryRunExtension → Happy Paths → buildValidationError creates properly formatted error entry
  ✓ DryRunExtension → Happy Paths → buildWouldAffect creates resource entry with string ID
  ✓ DryRunExtension → Happy Paths → buildWouldAffect creates resource entry with integer ID
  ✓ DryRunExtension → Happy Paths → buildWouldAffectCount creates count-based entry
  ✓ DryRunExtension → Happy Paths → buildSideEffect creates side effect entry
  ✓ DryRunExtension → Happy Paths → buildSideEffect uses default count of 1
  ✓ DryRunExtension → Edge Cases → isEnabled returns false when enabled option is missing
  ✓ DryRunExtension → Edge Cases → isEnabled returns false when options is null
  ✓ DryRunExtension → Edge Cases → shouldIncludeDiff returns false when option is missing
  ✓ DryRunExtension → Edge Cases → shouldIncludeSideEffects returns false when option is missing
  ✓ DryRunExtension → Edge Cases → isEnabled returns false for non-boolean true values
  ✓ DryRunExtension → Edge Cases → buildValidResponse handles empty would_affect array
  ✓ DryRunExtension → Edge Cases → buildValidResponse with all optional parameters
  ✓ DryRunExtension → Edge Cases → buildValidationError handles special characters in field names
  ✓ DryRunExtension → Edge Cases → buildInvalidResponse with multiple validation errors
  ✓ DryRunExtension → Edge Cases → buildWouldAffectCount handles zero count
  ✓ DryRunExtension → Edge Cases → buildSideEffect handles very large count
  ✓ DryRunExtension → Sad Paths → buildValidResponse preserves request ID in response
  ✓ DryRunExtension → Sad Paths → buildInvalidResponse preserves request ID in error response
  ✓ DryRunExtension → Sad Paths → isEnabled strictly checks for boolean true

   PASS  Tests\Unit\Extensions\ExtensionEventSubscriberTest
  ✓ ExtensionEventSubscriber → Happy Paths → subscribes to all extensio… 0.01s  
  ✓ ExtensionEventSubscriber → Happy Paths → events are dispatched through Laravel event system
  ✓ ExtensionEventSubscriber → Happy Paths → ExecutingFunction carries…  0.01s  
  ✓ ExtensionEventSubscriber → Happy Paths → FunctionExecuted carries response data
  ✓ ExtensionEventSubscriber → Happy Paths → SendingResponse is final event before serialization
  ✓ ExtensionEventSubscriber → Happy Paths → rebuild clears listener cache
  ✓ ExtensionEventSubscriber → Edge Cases → event propagation can be stopped
  ✓ ExtensionEventSubscriber → Edge Cases → event can set short-circuit response
  ✓ ExtensionEventSubscriber → Edge Cases → FunctionExecuted response is mutable
  ✓ ExtensionEventSubscriber → Edge Cases → SendingResponse response is mutable
  ✓ ExtensionEventSubscriber → Edge Cases → events carry request context through lifecycle
  ✓ ExtensionEventSubscriber → Sad Paths → getResponse returns null when not set
  ✓ ExtensionEventSubscriber → Sad Paths → propagation is not stopped by default

   FAIL  Tests\Unit\Extensions\ExtensionRegistryTest
  ⨯ ExtensionRegistry → Happy Paths → registers extension by URN succes… 0.01s  
  ⨯ ExtensionRegistry → Happy Paths → retrieves registered extension by URN
  ⨯ ExtensionRegistry → Happy Paths → returns true when checking for registered extension
  ⨯ ExtensionRegistry → Happy Paths → returns all registered extensions as associative array
  ⨯ ExtensionRegistry → Happy Paths → returns list of all registered URNs
  ⨯ ExtensionRegistry → Happy Paths → converts all extensions to capabilities format
  ⨯ ExtensionRegistry → Happy Paths → unregisters extension by URN successfully
  ⨯ ExtensionRegistry → Happy Paths → replaces existing extension when registering with same URN
  ✓ ExtensionRegistry → Sad Paths → returns null when retrieving non-existent extension
  ✓ ExtensionRegistry → Sad Paths → returns false when checking for non-existent extension
  ✓ ExtensionRegistry → Edge Cases → returns empty array when no extensions are registered
  ✓ ExtensionRegistry → Edge Cases → returns empty array when getting URNs with no registered extensions
  ✓ ExtensionRegistry → Edge Cases → returns empty array when converting to capabilities with no extensions
  ✓ ExtensionRegistry → Edge Cases → handles unregistering non-existent… 0.01s  
  ⨯ ExtensionRegistry → Edge Cases → handles multiple unregister calls for same URN
  ⨯ ExtensionRegistry → Edge Cases → maintains correct count after register and unregister operations
  ⨯ ExtensionRegistry → Edge Cases → handles URN with special characters correctly
  ⨯ ExtensionRegistry → Edge Cases → toCapabilities maintains order of registration
  ⨯ ExtensionRegistry → Edge Cases → handles empty URN string gracefully
  ⨯ ExtensionRegistry → Edge Cases → returns all registered extensions…  0.01s  

   FAIL  Tests\Unit\Extensions\IdempotencyExtensionTest
  ✓ IdempotencyExtension → Happy Paths → getUrn returns correct URN con… 0.01s  
  ✓ IdempotencyExtension → Happy Paths → getIdempotencyKey extracts key from options
  ✓ IdempotencyExtension → Happy Paths → getIdempotencyKey returns null when key missing
  ✓ IdempotencyExtension → Happy Paths → getTtl returns default TTL when not specified
  ✓ IdempotencyExtension → Happy Paths → getTtl converts seconds correctly
  ✓ IdempotencyExtension → Happy Paths → getTtl converts minutes to seconds
  ✓ IdempotencyExtension → Happy Paths → getTtl converts hours to seconds
  ✓ IdempotencyExtension → Happy Paths → getTtl converts days to seconds
  ⨯ IdempotencyExtension → Happy Paths → onExecutingFunction does not short-circuit when no cached result exists
  ✓ IdempotencyExtension → Happy Paths → onExecutingFunction returns error when key is missing
  ⨯ IdempotencyExtension → Happy Paths → onFunctionExecuted caches response and adds extension metadata
  ✓ IdempotencyExtension → Happy Paths → onFunctionExecuted returns response unchanged when context is null
  ✓ IdempotencyExtension → Edge Cases → getIdempotencyKey returns null for null options
  ✓ IdempotencyExtension → Edge Cases → getTtl handles unknown unit by treating as seconds
  ⨯ IdempotencyExtension → Edge Cases → getTtl handles missing value
  ✓ IdempotencyExtension → Edge Cases → getTtl handles missing unit
  ⨯ IdempotencyExtension → Edge Cases → onExecutingFunction acquires pr… 0.01s  
  ⨯ IdempotencyExtension → Edge Cases → onExecutingFunction returns processing response when lock exists
  ⨯ IdempotencyExtension → Edge Cases → getTtl handles zero value
  ⨯ IdempotencyExtension → Edge Cases → onFunctionExecuted uses custom TTL from options
  ✓ IdempotencyExtension → Sad Paths → onExecutingFunction returns conflict for duplicate request with different arguments
  ✓ IdempotencyExtension → Sad Paths → onExecutingFunction returns conflict for same key with different arguments
  ✓ IdempotencyExtension → Sad Paths → onExecutingFunction detects conflict when arguments differ
  ⨯ IdempotencyExtension → Sad Paths → onFunctionExecuted removes proce… 0.01s  
  ⨯ IdempotencyExtension → Sad Paths → onExecutingFunction error response includes retry_after hint

   FAIL  Tests\Unit\Extensions\LocaleExtensionTest
  ✓ LocaleExtension → Happy Paths → getUrn returns correct URN constant  0.01s  
  ✓ LocaleExtension → Happy Paths → isErrorFatal returns false for graceful degradation
  ✓ LocaleExtension → Happy Paths → getSupportedLanguages returns configured languages
  ✓ LocaleExtension → Happy Paths → default supported language is en
  ✓ LocaleExtension → Happy Paths → isValidLanguageTag validates known…  0.01s  
  ✓ LocaleExtension → Happy Paths → isValidLanguageTag validates language tags with region
  ✓ LocaleExtension → Happy Paths → toCapabilities includes supported languages
  ✓ LocaleExtension → Happy Paths → getSubscribedEvents returns RequestValidated and FunctionExecuted
  ✓ LocaleExtension → Edge Cases → isValidLanguageTag returns false for invalid language codes
  ✓ LocaleExtension → Edge Cases → isValidLanguageTag returns false for empty string
  ✓ LocaleExtension → Edge Cases → empty supported languages array still works
  ✓ LocaleExtension → Edge Cases → default language constant is en
  ✓ LocaleExtension → Edge Cases → default timezone constant is UTC
  ✓ LocaleExtension → Edge Cases → getLanguage returns default before any request
  ✓ LocaleExtension → Edge Cases → getTimezone returns null before any…  0.01s  
  ✓ LocaleExtension → Edge Cases → getCurrency returns null before any request
  ✓ LocaleExtension → Edge Cases → wasFallbackUsed returns false before any request
  ✓ LocaleExtension → Sad Paths → isValidLanguageTag handles null-like values gracefully
  ✓ LocaleExtension → Sad Paths → isValidLanguageTag handles special characters
  ✓ LocaleExtension → Sad Paths → supported languages are case sensitive
  ⨯ LocaleExtension → Request/Response Handling → Happy Paths → onReque… 0.01s  
  ⨯ LocaleExtension → Request/Response Handling → Happy Paths → onReque… 0.01s  
  ✓ LocaleExtension → Request/Response Handling → Happy Paths → onRequestValidated does nothing when extension not present
  ✓ LocaleExtension → Request/Response Handling → Happy Paths → onFunctionExecuted adds locale metadata to response
  ✓ LocaleExtension → Request/Response Handling → Happy Paths → onFunctionExecuted preserves response data and errors
  ⨯ LocaleExtension → Request/Response Handling → Happy Paths → onFunctionExecuted preserves existing extensions in response
  ✓ LocaleExtension → Request/Response Handling → Happy Paths → onFunctionExecuted filters out null values from response metadata
  ⨯ LocaleExtension → Request/Response Handling → Sad Paths → onRequestValidated handles missing language option by using default
  ✓ LocaleExtension → Request/Response Handling → Sad Paths → onRequestValidated rejects invalid timezone
  ✓ LocaleExtension → Request/Response Handling → Sad Paths → onRequestValidated rejects invalid currency code
  ⨯ LocaleExtension → Request/Response Handling → Sad Paths → onRequestValidated normalizes currency to uppercase
  ⨯ LocaleExtension → Request/Response Handling → Edge Cases → onRequestValidated handles empty extension options
  ⨯ LocaleExtension → Request/Response Handling → Edge Cases → onRequestValidated handles null extension options
  ✓ LocaleExtension → Request/Response Handling → Edge Cases → onRequestValidated accepts null for optional timezone
  ✓ LocaleExtension → Request/Response Handling → Edge Cases → onRequestValidated accepts null for optional currency
  ⨯ LocaleExtension → Language Resolution and Fallback → Happy Paths →…  0.01s  
  ⨯ LocaleExtension → Language Resolution and Fallback → Happy Paths →…  0.01s  
  ⨯ LocaleExtension → Language Resolution and Fallback → Happy Paths → resolves progressively shorter language tags
  ⨯ LocaleExtension → Language Resolution and Fallback → Happy Paths → uses first fallback language when requested language not supported
  ⨯ LocaleExtension → Language Resolution and Fallback → Happy Paths → tries multiple fallback languages until match found
  ⨯ LocaleExtension → Language Resolution and Fallback → Happy Paths → uses shorter version of fallback language when exact not supported
  ⨯ LocaleExtension → Language Resolution and Fallback → Happy Paths → defaults to en when no languages match
  ⨯ LocaleExtension → Language Resolution and Fallback → Edge Cases → h… 0.01s  
  ⨯ LocaleExtension → Language Resolution and Fallback → Edge Cases → handles single-character language code
  ⨯ LocaleExtension → Language Resolution and Fallback → Edge Cases → handles language tag with multiple hyphens
  ⨯ LocaleExtension → Timezone Validation → Happy Paths → validates common IANA timezone identifiers
  ⨯ LocaleExtension → Timezone Validation → Happy Paths → validates timezone with offset format
  ✓ LocaleExtension → Timezone Validation → Sad Paths → rejects completely invalid timezone identifier
  ✓ LocaleExtension → Timezone Validation → Sad Paths → rejects empty timezone string
  ✓ LocaleExtension → Timezone Validation → Sad Paths → rejects malformed timezone with special characters
  ⨯ LocaleExtension → Timezone Validation → Edge Cases → handles deprecated timezone identifiers
  ⨯ LocaleExtension → Currency Validation → Happy Paths → validates common ISO 4217 currency codes
  ⨯ LocaleExtension → Currency Validation → Happy Paths → normalizes lowercase currency codes to uppercase
  ⨯ LocaleExtension → Currency Validation → Happy Paths → normalizes mixed-case currency codes to uppercase
  ✓ LocaleExtension → Currency Validation → Sad Paths → rejects invalid currency codes
  ✓ LocaleExtension → Currency Validation → Sad Paths → rejects currency codes that are too short
  ✓ LocaleExtension → Currency Validation → Sad Paths → rejects currency codes that are too long
  ✓ LocaleExtension → Currency Validation → Sad Paths → rejects empty currency string
  ✓ LocaleExtension → Currency Validation → Sad Paths → rejects currency codes with numbers
  ✓ LocaleExtension → Currency Validation → Sad Paths → rejects currency codes with special characters
  ⨯ LocaleExtension → Currency Validation → Edge Cases → validates less common but valid currency codes
  ⨯ LocaleExtension → Currency Validation → Edge Cases → validates Swiss Franc currency code

   FAIL  Tests\Unit\Extensions\MaintenanceExtensionTest
  ✓ MaintenanceExtension → Happy Paths → getUrn returns correct URN con… 0.02s  
  ✓ MaintenanceExtension → Happy Paths → isErrorFatal returns true for maintenance mode
  ✓ MaintenanceExtension → Happy Paths → isGlobal returns true for maintenance extension
  ✓ MaintenanceExtension → Happy Paths → buildDuration creates duration object
  ✓ MaintenanceExtension → Happy Paths → buildServerMaintenance creates complete server maintenance data
  ✓ MaintenanceExtension → Happy Paths → buildServerMaintenance works without until timestamp
  ⨯ MaintenanceExtension → Happy Paths → buildFunctionMaintenance creates complete function maintenance data
  ✓ MaintenanceExtension → Happy Paths → buildServerMaintenanceErrorDetails creates error details
  ⨯ MaintenanceExtension → Happy Paths → buildFunctionMaintenanceErrorDetails creates error details with function
  ✓ MaintenanceExtension → Happy Paths → enrichResponse adds maintenance extension to response
  ✓ MaintenanceExtension → Happy Paths → calculateRetryAfterSeconds converts seconds correctly
  ✓ MaintenanceExtension → Happy Paths → calculateRetryAfterSeconds converts minutes correctly
  ✓ MaintenanceExtension → Happy Paths → calculateRetryAfterSeconds converts hours correctly
  ✓ MaintenanceExtension → Happy Paths → isMaintenanceActive returns true for null until
  ✓ MaintenanceExtension → Happy Paths → isMaintenanceActive returns true for future until
  ✓ MaintenanceExtension → Happy Paths → isMaintenanceActive returns false for past until
  ✓ MaintenanceExtension → Happy Paths → calculateRemainingSeconds returns positive for future until
  ✓ MaintenanceExtension → Edge Cases → buildDuration with various time units
  ✓ MaintenanceExtension → Edge Cases → enrichResponse appends to existing extensions
  ✓ MaintenanceExtension → Edge Cases → calculateRemainingSeconds returns zero for past until
  ✓ MaintenanceExtension → Edge Cases → calculateRetryAfterSeconds with unknown unit returns value as-is
  ✓ MaintenanceExtension → Edge Cases → buildFunctionMaintenance works without until timestamp
  ✓ MaintenanceExtension → Edge Cases → scope constants have correct values
  ✓ MaintenanceExtension → Edge Cases → unit constants have correct values
  ✓ MaintenanceExtension → Sad Paths → enrichResponse preserves error responses
  ✓ MaintenanceExtension → Sad Paths → isMaintenanceActive handles exact boundary

   PASS  Tests\Unit\Extensions\PriorityExtensionTest
  ✓ PriorityExtension → Happy Paths → getUrn returns correct URN consta… 0.01s  
  ✓ PriorityExtension → Happy Paths → getLevel returns requested priority level
  ✓ PriorityExtension → Happy Paths → getLevel returns normal when level not specified
  ✓ PriorityExtension → Happy Paths → getLevel returns normal for invalid level
  ✓ PriorityExtension → Happy Paths → getReason extracts reason from options
  ✓ PriorityExtension → Happy Paths → getReason returns null when not provided
  ✓ PriorityExtension → Happy Paths → getLevelValue returns correct numeric values
  ✓ PriorityExtension → Happy Paths → getLevelValue returns normal value for unknown level
  ✓ PriorityExtension → Happy Paths → compareLevels returns negative when first is lower
  ✓ PriorityExtension → Happy Paths → compareLevels returns positive when first is higher
  ✓ PriorityExtension → Happy Paths → compareLevels returns zero when levels are equal
  ✓ PriorityExtension → Happy Paths → isHigherPriority returns true when first is higher
  ✓ PriorityExtension → Happy Paths → isHigherPriority returns false when first is lower
  ✓ PriorityExtension → Happy Paths → isHigherPriority returns false when levels are equal
  ✓ PriorityExtension → Happy Paths → getValidLevels returns all priority levels
  ✓ PriorityExtension → Happy Paths → enrichResponse adds priority extension to response
  ✓ PriorityExtension → Happy Paths → enrichResponse includes queue position when provided
  ✓ PriorityExtension → Happy Paths → enrichResponse includes wait time when provided
  ✓ PriorityExtension → Happy Paths → buildResponseData creates complete response data structure
  ✓ PriorityExtension → Happy Paths → buildResponseData works without optional parameters
  ✓ PriorityExtension → Edge Cases → getLevel handles null options
  ✓ PriorityExtension → Edge Cases → getReason handles null options
  ✓ PriorityExtension → Edge Cases → enrichResponse preserves existing response data
  ✓ PriorityExtension → Edge Cases → enrichResponse appends to existing extensions
  ✓ PriorityExtension → Edge Cases → buildResponseData with zero queue position
  ✓ PriorityExtension → Edge Cases → buildResponseData with zero wait time
  ✓ PriorityExtension → Edge Cases → compareLevels handles unknown levels as normal priority
  ✓ PriorityExtension → Edge Cases → isHigherPriority handles unknown l… 0.01s  
  ✓ PriorityExtension → Edge Cases → getValidLevels returns keys in correct order
  ✓ PriorityExtension → Sad Paths → enrichResponse with honored false indicates priority was not applied
  ✓ PriorityExtension → Sad Paths → enrichResponse shows effective level different from requested
  ✓ PriorityExtension → Sad Paths → buildResponseData with very large queue position
  ✓ PriorityExtension → Sad Paths → buildResponseData with very large wait time
  ✓ PriorityExtension → Sad Paths → compareLevels demonstrates priority ordering

   PASS  Tests\Unit\Extensions\QueryExtensionTest
  ✓ QueryExtension → Happy Paths → getUrn returns correct URN constant   0.01s  
  ✓ QueryExtension → Happy Paths → isErrorFatal returns true for query validation errors
  ✓ QueryExtension → Happy Paths → getFilters extracts filters from options
  ✓ QueryExtension → Happy Paths → getSorts extracts sorts from options
  ✓ QueryExtension → Happy Paths → getPagination extracts pagination from options
  ✓ QueryExtension → Happy Paths → getFields extracts sparse fieldsets from options
  ✓ QueryExtension → Happy Paths → getRelationships extracts relationships from options
  ✓ QueryExtension → Happy Paths → getUsedCapabilities detects filtering capability
  ✓ QueryExtension → Happy Paths → getUsedCapabilities detects all capabilities
  ✓ QueryExtension → Happy Paths → buildOffsetPagination creates offset pagination metadata
  ✓ QueryExtension → Happy Paths → buildCursorPagination creates cursor pagination metadata
  ✓ QueryExtension → Happy Paths → buildKeysetPagination creates keyset pagination metadata
  ✓ QueryExtension → Happy Paths → buildSort creates sort directive
  ✓ QueryExtension → Happy Paths → buildFilter creates filter condition
  ✓ QueryExtension → Happy Paths → buildFilter includes boolean when not AND
  ✓ QueryExtension → Happy Paths → enrichResponse adds query extension to response
  ✓ QueryExtension → Happy Paths → isOffsetPagination detects offset pa… 0.01s  
  ✓ QueryExtension → Happy Paths → isCursorPagination detects cursor pagination
  ✓ QueryExtension → Happy Paths → isKeysetPagination detects keyset pagination
  ✓ QueryExtension → Happy Paths → getPaginationLimit returns limit with default
  ✓ QueryExtension → Happy Paths → getPaginationLimit respects custom max
  ✓ QueryExtension → Edge Cases → getFilters returns empty array for null options
  ✓ QueryExtension → Edge Cases → getSorts returns empty array for empty options
  ✓ QueryExtension → Edge Cases → getPagination returns empty array when not specified
  ✓ QueryExtension → Edge Cases → getUsedCapabilities returns empty array for null options
  ✓ QueryExtension → Edge Cases → getUsedCapabilities returns empty array for empty options
  ✓ QueryExtension → Edge Cases → buildOffsetPagination omits total when null
  ✓ QueryExtension → Edge Cases → buildCursorPagination omits cursors when null
  ✓ QueryExtension → Edge Cases → buildKeysetPagination omits IDs when null
  ✓ QueryExtension → Edge Cases → buildSort uses ascending direction by default
  ✓ QueryExtension → Edge Cases → buildFilter handles null value for null operators
  ✓ QueryExtension → Edge Cases → enrichResponse appends to existing extensions
  ✓ QueryExtension → Edge Cases → enrichResponse with empty capabilities
  ✓ QueryExtension → Edge Cases → getPaginationLimit with custom default
  ✓ QueryExtension → Edge Cases → getFilters with complex nested filters
  ✓ QueryExtension → Sad Paths → getUsedCapabilities handles partial options
  ✓ QueryExtension → Sad Paths → enrichResponse preserves response data
  ✓ QueryExtension → Sad Paths → buildFilter with OR boolean for multiple conditions
  ✓ QueryExtension → Sad Paths → pagination style detection with mixed parameters

   PASS  Tests\Unit\Extensions\QuotaExtensionTest
  ✓ QuotaExtension → Happy Paths → getUrn returns correct URN constant   0.01s  
  ✓ QuotaExtension → Happy Paths → getIncludedTypes extracts include array from options
  ✓ QuotaExtension → Happy Paths → getIncludedTypes returns null when not specified
  ✓ QuotaExtension → Happy Paths → buildQuota creates complete quota entry
  ✓ QuotaExtension → Happy Paths → buildQuota calculates remaining correctly
  ✓ QuotaExtension → Happy Paths → buildQuota handles zero remaining
  ✓ QuotaExtension → Happy Paths → buildQuota prevents negative remaining
  ✓ QuotaExtension → Happy Paths → buildQuota omits resets_at when null
  ✓ QuotaExtension → Happy Paths → buildRequestsQuota creates requests quota entry
  ✓ QuotaExtension → Happy Paths → buildComputeQuota creates compute quota entry
  ✓ QuotaExtension → Happy Paths → buildComputeQuota accepts custom unit
  ✓ QuotaExtension → Happy Paths → buildStorageQuota creates storage quota entry
  ✓ QuotaExtension → Happy Paths → buildBandwidthQuota creates bandwidth quota entry
  ✓ QuotaExtension → Happy Paths → buildCustomQuota creates custom quota entry
  ✓ QuotaExtension → Happy Paths → enrichResponse adds quota extension to response
  ✓ QuotaExtension → Happy Paths → isNearLimit returns true when at threshold
  ✓ QuotaExtension → Happy Paths → isNearLimit returns true when above threshold
  ✓ QuotaExtension → Happy Paths → isNearLimit returns false when below threshold
  ✓ QuotaExtension → Happy Paths → isNearLimit accepts custom threshold
  ✓ QuotaExtension → Happy Paths → isExceeded returns true when limit reached
  ✓ QuotaExtension → Happy Paths → isExceeded returns true when limit exceeded
  ✓ QuotaExtension → Happy Paths → isExceeded returns false when below limit
  ✓ QuotaExtension → Edge Cases → getIncludedTypes handles null options
  ✓ QuotaExtension → Edge Cases → buildQuota handles zero limit
  ✓ QuotaExtension → Edge Cases → buildRequestsQuota with custom period
  ✓ QuotaExtension → Edge Cases → buildComputeQuota with custom period
  ✓ QuotaExtension → Edge Cases → buildStorageQuota with billing cycle period
  ✓ QuotaExtension → Edge Cases → enrichResponse appends to existing extensions
  ✓ QuotaExtension → Edge Cases → enrichResponse with empty quotas array
  ✓ QuotaExtension → Edge Cases → isNearLimit returns false for zero li… 0.01s  
  ✓ QuotaExtension → Edge Cases → isNearLimit returns false for negative limit
  ✓ QuotaExtension → Edge Cases → isExceeded handles zero limit
  ✓ QuotaExtension → Edge Cases → buildQuota with all quota types
  ✓ QuotaExtension → Edge Cases → buildQuota with all period types
  ✓ QuotaExtension → Edge Cases → isNearLimit with various thresholds
  ✓ QuotaExtension → Sad Paths → buildQuota handles usage exceeding limit
  ✓ QuotaExtension → Sad Paths → isExceeded detects over-quota usage
  ✓ QuotaExtension → Sad Paths → isNearLimit with exactly at threshold
  ✓ QuotaExtension → Sad Paths → buildRequestsQuota at exactly limit
  ✓ QuotaExtension → Sad Paths → buildComputeQuota shows over-quota state
  ✓ QuotaExtension → Sad Paths → enrichResponse with multiple quota types showing various states

   PASS  Tests\Unit\Extensions\RateLimitExtensionTest
  ✓ RateLimitExtension → Happy Paths → getUrn returns correct URN const… 0.01s  
  ✓ RateLimitExtension → Happy Paths → isErrorFatal returns false for advisory rate limit info
  ✓ RateLimitExtension → Happy Paths → getRequestedScope extracts scope from options
  ✓ RateLimitExtension → Happy Paths → getRequestedScope returns null when not specified
  ✓ RateLimitExtension → Happy Paths → buildDuration creates duration object
  ✓ RateLimitExtension → Happy Paths → buildRateLimit creates complete rate limit entry
  ✓ RateLimitExtension → Happy Paths → buildRateLimit includes custom warning
  ✓ RateLimitExtension → Happy Paths → buildRateLimit adds automatic warning when near limit
  ✓ RateLimitExtension → Happy Paths → buildMultiScopeData creates scopes wrapper
  ✓ RateLimitExtension → Happy Paths → buildScopeEntry creates entry without scope field
  ✓ RateLimitExtension → Happy Paths → enrichResponse adds rate limit e… 0.01s  
  ✓ RateLimitExtension → Happy Paths → isNearLimit returns true when remaining is at threshold
  ✓ RateLimitExtension → Happy Paths → isNearLimit returns true when remaining is below threshold
  ✓ RateLimitExtension → Happy Paths → isNearLimit returns false when above threshold
  ✓ RateLimitExtension → Happy Paths → isNearLimit accepts custom threshold
  ✓ RateLimitExtension → Happy Paths → isExceeded returns true when limit reached
  ✓ RateLimitExtension → Happy Paths → isExceeded returns true when limit exceeded
  ✓ RateLimitExtension → Happy Paths → isExceeded returns false when below limit
  ✓ RateLimitExtension → Happy Paths → calculateRemaining returns correct value
  ✓ RateLimitExtension → Edge Cases → getRequestedScope handles null options
  ✓ RateLimitExtension → Edge Cases → buildRateLimit handles zero remaining
  ✓ RateLimitExtension → Edge Cases → buildRateLimit prevents negative remaining
  ✓ RateLimitExtension → Edge Cases → buildDuration with various time units
  ✓ RateLimitExtension → Edge Cases → buildRateLimit with all scope types
  ✓ RateLimitExtension → Edge Cases → enrichResponse appends to existing extensions
  ✓ RateLimitExtension → Edge Cases → enrichResponse with multi-scope data
  ✓ RateLimitExtension → Edge Cases → isNearLimit returns false for zero limit
  ✓ RateLimitExtension → Edge Cases → isNearLimit returns false for negative limit
  ✓ RateLimitExtension → Edge Cases → calculateRemaining returns zero when limit exceeded
  ✓ RateLimitExtension → Edge Cases → calculateRemaining returns zero when exactly at limit
  ✓ RateLimitExtension → Edge Cases → isNearLimit with various custom thresholds
  ✓ RateLimitExtension → Sad Paths → buildRateLimit handles usage exceeding limit
  ✓ RateLimitExtension → Sad Paths → isExceeded detects over-limit usage
  ✓ RateLimitExtension → Sad Paths → buildRateLimit at exactly limit with warning
  ✓ RateLimitExtension → Sad Paths → buildScopeEntry shows over-limit state
  ✓ RateLimitExtension → Sad Paths → enrichResponse with exhausted rate limit
  ✓ RateLimitExtension → Sad Paths → multi-scope data with mixed exhaustion states

   PASS  Tests\Unit\Extensions\RedactExtensionTest
  ✓ RedactExtension → Happy Paths → getUrn returns correct URN constant  0.01s  
  ✓ RedactExtension → Happy Paths → default mode is full redaction
  ✓ RedactExtension → Happy Paths → FULL_MASK constant is asterisks
  ✓ RedactExtension → Happy Paths → DEFAULT_REDACTED_FIELDS contains all categories
  ✓ RedactExtension → Happy Paths → authentication fields include password and token
  ✓ RedactExtension → Happy Paths → payment fields include card_number and cvv
  ✓ RedactExtension → Happy Paths → pii fields include ssn and tax_id
  ✓ RedactExtension → Happy Paths → contact fields include email and phone
  ✓ RedactExtension → Happy Paths → getRedactionFields returns all default fields
  ✓ RedactExtension → Happy Paths → shouldRedact returns true for redactable fields in full mode
  ✓ RedactExtension → Happy Paths → shouldRedact returns false for non-redactable fields
  ✓ RedactExtension → Happy Paths → redactField returns full mask in full mode
  ✓ RedactExtension → Happy Paths → getSubscribedEvents returns RequestValidated and FunctionExecuted
  ✓ RedactExtension → Partial Redaction → redacts email address in partial mode showing first letter and TLD
  ✓ RedactExtension → Partial Redaction → redacts phone number in partial mode showing last 4 digits
  ✓ RedactExtension → Partial Redaction → redacts card number in partial mode showing last 4 digits
  ✓ RedactExtension → Partial Redaction → redacts SSN in partial mode showing last 4 digits
  ✓ RedactExtension → Partial Redaction → redacts full name in partial mode showing first letter of each word
  ✓ RedactExtension → Partial Redaction → redacts cardholder name in partial mode using name pattern
  ✓ RedactExtension → Partial Redaction → partial mode uses default pattern for unknown fields with long values
  ✓ RedactExtension → Partial Redaction → partial mode handles phone number with various formats
  ✓ RedactExtension → Partial Redaction → partial mode handles card number with spaces
  ✓ RedactExtension → Partial Redaction → partial mode handles email with single character username
  ✓ RedactExtension → Partial Redaction → partial mode handles name with extra whitespace
  ✓ RedactExtension → Edge Cases → redactField handles non-string values
  ✓ RedactExtension → Edge Cases → redactField handles empty string      0.01s  
  ✓ RedactExtension → Edge Cases → redactField handles very short strings
  ✓ RedactExtension → Edge Cases → constructor accepts custom unredacted scopes
  ✓ RedactExtension → Edge Cases → constructor accepts custom default policy
  ✓ RedactExtension → Edge Cases → shouldRedact is case sensitive
  ✓ RedactExtension → Recursive Redaction → onFunctionExecuted redacts sensitive fields in flat array response
  ✓ RedactExtension → Recursive Redaction → onFunctionExecuted redacts sensitive fields in nested array response
  ✓ RedactExtension → Recursive Redaction → onFunctionExecuted tracks redacted field paths in nested structures
  ✓ RedactExtension → Recursive Redaction → onFunctionExecuted handles array of objects with sensitive fields
  ✓ RedactExtension → Recursive Redaction → onFunctionExecuted does not redact when mode is None by manually setting state
  ✓ RedactExtension → Recursive Redaction → onFunctionExecuted handles null response result gracefully
  ✓ RedactExtension → Recursive Redaction → onFunctionExecuted skips processing when extension not present in request
  ✓ RedactExtension → Authorization and Access Control → onRequestValidated denies unredacted access by default
  ✓ RedactExtension → Authorization and Access Control → onRequestValidated denies unredacted access even with purpose provided
  ✓ RedactExtension → Authorization and Access Control → onRequestValidated uses custom fields when provided
  ✓ RedactExtension → Authorization and Access Control → onRequestValidated falls back to Full mode for invalid mode value
  ✓ RedactExtension → Authorization and Access Control → onRequestValidated skips processing when extension not present
  ✓ RedactExtension → Authorization and Access Control → constructor accepts custom unredacted scopes array
  ✓ RedactExtension → Partial Redaction Edge Cases → partial email redaction handles malformed email without @ symbol
  ✓ RedactExtension → Partial Redaction Edge Cases → partial email redaction handles empty username
  ✓ RedactExtension → Partial Redaction Edge Cases → partial phone redaction handles very short phone numbers
  ✓ RedactExtension → Partial Redaction Edge Cases → partial card number redaction handles very short card numbers
  ✓ RedactExtension → Partial Redaction Edge Cases → partial SSN redaction handles very short SSN
  ✓ RedactExtension → Partial Redaction Edge Cases → partial name redaction handles empty name
  ✓ RedactExtension → Partial Redaction Edge Cases → partial name redaction handles single character name
  ✓ RedactExtension → Partial Redaction Edge Cases → partial redaction for short values defaults to full mask
  ✓ RedactExtension → Sad Paths → redactField masks unknown fields with default pattern
  ✓ RedactExtension → Sad Paths → isErrorFatal returns true for security-critical extension
  ✓ RedactExtension → Sad Paths → getMode returns full before request p… 0.01s  
  ✓ RedactExtension → Sad Paths → shouldRedact returns false when mode is None via reflection
  ✓ RedactExtension → Redaction Mode Enum → RedactionMode has three valid modes
  ✓ RedactExtension → Redaction Mode Enum → RedactionMode Full value is full
  ✓ RedactExtension → Redaction Mode Enum → RedactionMode Partial value is partial
  ✓ RedactExtension → Redaction Mode Enum → RedactionMode None value is none
  ✓ RedactExtension → Redaction Mode Enum → RedactionMode can be created from string
  ✓ RedactExtension → Redaction Mode Enum → RedactionMode returns null for invalid string

   FAIL  Tests\Unit\Extensions\ReplayExtensionTest
  ✓ ReplayExtension → Happy Paths → getUrn returns correct URN constant  0.01s  
  ✓ ReplayExtension → Happy Paths → isErrorFatal returns false for replay extension
  ✓ ReplayExtension → Happy Paths → isGlobal returns false for replay extension
  ✓ ReplayExtension → Happy Paths → buildDuration creates duration object
  ✓ ReplayExtension → Happy Paths → buildOptions creates complete options
  ✓ ReplayExtension → Happy Paths → buildCallback creates callback configuration
  ✓ ReplayExtension → Happy Paths → buildProcessedResponse creates processed data
  ✓ ReplayExtension → Happy Paths → buildQueuedResponse creates complete queued data
  ✓ ReplayExtension → Happy Paths → buildCompletedResponse creates completed data
  ✓ ReplayExtension → Happy Paths → buildFailedResponse creates failed data
  ✓ ReplayExtension → Happy Paths → buildCancelledResponse creates cancelled data
  ✓ ReplayExtension → Happy Paths → buildExpiredResponse creates expired data
  ✓ ReplayExtension → Happy Paths → buildProcessingResponse creates pro… 0.01s  
  ✓ ReplayExtension → Happy Paths → enrichResponse adds replay extension to response
  ⨯ ReplayExtension → Happy Paths → calculateTtlSeconds converts seconds correctly
  ✓ ReplayExtension → Happy Paths → calculateTtlSeconds converts minutes correctly
  ✓ ReplayExtension → Happy Paths → calculateTtlSeconds converts hours correctly
  ✓ ReplayExtension → Happy Paths → calculateTtlSeconds converts days correctly
  ✓ ReplayExtension → Happy Paths → calculateExpiresAt returns future timestamp
  ✓ ReplayExtension → Happy Paths → isExpired returns true for past timestamp
  ✓ ReplayExtension → Happy Paths → isExpired returns false for future timestamp
  ✓ ReplayExtension → Happy Paths → isTerminalStatus returns true for terminal statuses
  ✓ ReplayExtension → Happy Paths → isTerminalStatus returns false for non-terminal statuses
  ✓ ReplayExtension → Happy Paths → isValidPriority returns true for all priorities
  ✓ ReplayExtension → Edge Cases → buildOptions with minimal parameters
  ✓ ReplayExtension → Edge Cases → buildQueuedResponse without optional fields
  ✓ ReplayExtension → Edge Cases → buildCallback without headers
  ✓ ReplayExtension → Edge Cases → enrichResponse appends to existing extensions
  ✓ ReplayExtension → Edge Cases → ReplayStatus enum has correct values
  ✓ ReplayExtension → Edge Cases → ReplayPriority enum has correct values
  ✓ ReplayExtension → Edge Cases → TimeUnit enum has correct values
  ⨯ ReplayExtension → Edge Cases → TimeUnit toSeconds converts correctly
  ✓ ReplayExtension → Edge Cases → ReplayStatus isTerminal returns correct values
  ✓ ReplayExtension → Sad Paths → enrichResponse preserves error responses
  ✓ ReplayExtension → Sad Paths → isExpired handles exact boundary

   FAIL  Tests\Unit\Extensions\SimulationExtensionTest
  ✓ SimulationExtension → Happy Paths → getUrn returns correct URN cons… 0.01s  
  ✓ SimulationExtension → Happy Paths → isErrorFatal returns true
  ✓ SimulationExtension → Happy Paths → isEnabled returns true when enabled option is true
  ✓ SimulationExtension → Happy Paths → isEnabled returns false when enabled option is false
  ✓ SimulationExtension → Happy Paths → shouldListScenarios returns true when list_scenarios is true
  ✓ SimulationExtension → Happy Paths → shouldListScenarios returns false when list_scenarios is false
  ✓ SimulationExtension → Happy Paths → getRequestedScenario returns scenario name when provided as string
  ✓ SimulationExtension → Happy Paths → getRequestedScenario returns null when scenario is not provided
  ✓ SimulationExtension → Happy Paths → supportsSimulation returns true for SimulatableInterface
  ✓ SimulationExtension → Happy Paths → supportsSimulation returns false for regular FunctionInterface
  ✓ SimulationExtension → Happy Paths → findScenario returns matching scenario by name
  ✓ SimulationExtension → Happy Paths → findScenario returns null when scenario not found
  ✓ SimulationExtension → Happy Paths → getScenarioToExecute returns requested scenario when specified
  ✓ SimulationExtension → Happy Paths → getScenarioToExecute returns default scenario when none specified
  ✓ SimulationExtension → Happy Paths → buildSimulatedResponse creates successful simulation response
  ✓ SimulationExtension → Happy Paths → buildSimulatedErrorResponse creates error simulation response with default error
  ✓ SimulationExtension → Happy Paths → buildSimulatedErrorResponse creates error simulation response with custom error
  ✓ SimulationExtension → Happy Paths → buildScenarioListResponse lists all available scenarios
  ✓ SimulationExtension → Happy Paths → buildUnsupportedResponse creates error for non-simulatable function
  ✓ SimulationExtension → Happy Paths → buildScenarioNotFoundResponse creates error for missing scenario
  ✓ SimulationExtension → Edge Cases → isEnabled returns false when enabled option is missing
  ✓ SimulationExtension → Edge Cases → isEnabled returns false when options is null
  ✓ SimulationExtension → Edge Cases → isEnabled returns false for non-boolean true values
  ✓ SimulationExtension → Edge Cases → shouldListScenarios returns false when option is missing
  ✓ SimulationExtension → Edge Cases → shouldListScenarios returns false when options is null
  ✓ SimulationExtension → Edge Cases → shouldListScenarios returns false for non-boolean true values
  ✓ SimulationExtension → Edge Cases → getRequestedScenario returns null when options is null
  ✓ SimulationExtension → Edge Cases → getRequestedScenario returns null for non-string scenario values
  ✓ SimulationExtension → Edge Cases → findScenario returns null when f… 0.01s  
  ✓ SimulationExtension → Edge Cases → findScenario handles scenario names with special characters
  ✓ SimulationExtension → Edge Cases → getScenarioToExecute returns null when default scenario not found
  ✓ SimulationExtension → Edge Cases → getScenarioToExecute returns null when requested scenario not found
  ✓ SimulationExtension → Edge Cases → buildSimulatedResponse handles null output
  ✓ SimulationExtension → Edge Cases → buildSimulatedResponse handles complex nested output
  ✓ SimulationExtension → Edge Cases → buildScenarioListResponse handles function with no scenarios
  ✓ SimulationExtension → Edge Cases → buildScenarioListResponse handles scenarios without descriptions
  ✓ SimulationExtension → Edge Cases → buildUnsupportedResponse handles function names with special characters
  ✓ SimulationExtension → Edge Cases → buildScenarioNotFoundResponse handles scenario names with special characters
  ✓ SimulationExtension → Edge Cases → buildSimulatedErrorResponse handles error without data field
  ⨯ SimulationExtension → Sad Paths → buildSimulatedResponse preserves request ID in response
  ⨯ SimulationExtension → Sad Paths → buildSimulatedErrorResponse preserves request ID in error response
  ✓ SimulationExtension → Sad Paths → buildScenarioListResponse preserves request ID
  ✓ SimulationExtension → Sad Paths → buildUnsupportedResponse preserves request ID
  ✓ SimulationExtension → Sad Paths → buildScenarioNotFoundResponse preserves request ID
  ✓ SimulationExtension → Sad Paths → isEnabled strictly checks for boolean true
  ✓ SimulationExtension → Sad Paths → shouldListScenarios strictly checks for boolean true

   PASS  Tests\Unit\Extensions\StreamExtensionTest
  ✓ StreamExtension → Happy Paths → returns correct URN constant         0.01s  
  ✓ StreamExtension → Happy Paths → returns subscribed events
  ✓ StreamExtension → Happy Paths → toCapabilities returns stream capability info
  ✓ StreamExtension → Happy Paths → shouldStream returns false when no…  0.01s  
  ✓ StreamExtension → Happy Paths → getContext returns null when no context set
  ✓ StreamExtension → Happy Paths → onRequestValidated ignores requests without stream extension
  ✓ StreamExtension → Happy Paths → onRequestValidated ignores requests with accept false
  ✓ StreamExtension → Edge Cases → getContext returns null for invalid context structure
  ✓ StreamExtension → Edge Cases → getContext returns null for incomplete context array
  ✓ StreamExtension → Edge Cases → shouldStream returns false for non-array context
  ✓ StreamExtension → Edge Cases → shouldStream returns false when enabled is not true
  ✓ StreamExtension → Edge Cases → CONTEXT_KEY constant has correct value
  ✓ StreamExtension → Edge Cases → onRequestValidated ignores requests with accept not strictly true
  ✓ StreamExtension → Edge Cases → onRequestValidated ignores requests with missing accept option

   PASS  Tests\Unit\Extensions\TracingExtensionTest
  ✓ TracingExtension → Happy Paths → getUrn returns correct URN constan… 0.01s  
  ✓ TracingExtension → Happy Paths → getTraceId extracts trace ID from options
  ✓ TracingExtension → Happy Paths → getTraceId returns null when not provided
  ✓ TracingExtension → Happy Paths → getSpanId extracts span ID from options
  ✓ TracingExtension → Happy Paths → getSpanId returns null when not provided
  ✓ TracingExtension → Happy Paths → getParentSpanId extracts parent span ID from options
  ✓ TracingExtension → Happy Paths → getParentSpanId returns null when not provided
  ✓ TracingExtension → Happy Paths → getBaggage extracts baggage from options
  ✓ TracingExtension → Happy Paths → getBaggage returns null when not provided
  ✓ TracingExtension → Happy Paths → generateSpanId creates unique span ID
  ✓ TracingExtension → Happy Paths → generateSpanId accepts custom prefix
  ✓ TracingExtension → Happy Paths → generateTraceId creates unique trace ID
  ✓ TracingExtension → Happy Paths → buildDownstreamContext creates tracing context
  ✓ TracingExtension → Happy Paths → buildDownstreamContext includes baggage when provided
  ✓ TracingExtension → Happy Paths → enrichResponse adds tracing extension to response
  ✓ TracingExtension → Happy Paths → buildResponseData creates complete… 0.01s  
  ✓ TracingExtension → Happy Paths → extractOrCreateContext uses existing trace ID
  ✓ TracingExtension → Happy Paths → extractOrCreateContext generates trace ID when missing
  ✓ TracingExtension → Happy Paths → extractOrCreateContext uses client span as parent
  ✓ TracingExtension → Happy Paths → extractOrCreateContext generates new server span
  ✓ TracingExtension → Happy Paths → extractOrCreateContext preserves baggage
  ✓ TracingExtension → Happy Paths → isGlobal returns true indicating extension runs on all requests
  ✓ TracingExtension → Happy Paths → isErrorFatal returns false indicating tracing errors should not fail requests
  ✓ TracingExtension → Happy Paths → getSubscribedEvents returns correct event configuration
  ✓ TracingExtension → Happy Paths → onExecutingFunction initializes context from extension options
  ✓ TracingExtension → Happy Paths → onFunctionExecuted enriches response with trace metadata and duration
  ✓ TracingExtension → Happy Paths → onFunctionExecuted calculates dura… 0.01s  
  ✓ TracingExtension → Happy Paths → onFunctionExecuted resets context after enriching response
  ✓ TracingExtension → Happy Paths → onExecutingFunction captures high-resolution start time
  ✓ TracingExtension → Happy Paths → onExecutingFunction with baggage preserves context through lifecycle
  ✓ TracingExtension → Happy Paths → onExecutingFunction generates trace ID when not provided in options
  ✓ TracingExtension → Happy Paths → onExecutingFunction uses client span as parent span in context
  ✓ TracingExtension → Edge Cases → getTraceId handles null options
  ✓ TracingExtension → Edge Cases → getSpanId handles null options
  ✓ TracingExtension → Edge Cases → getParentSpanId handles null options
  ✓ TracingExtension → Edge Cases → getBaggage handles null options
  ✓ TracingExtension → Edge Cases → generateSpanId with empty prefix
  ✓ TracingExtension → Edge Cases → buildDownstreamContext without baggage
  ✓ TracingExtension → Edge Cases → buildDownstreamContext with empty baggage
  ✓ TracingExtension → Edge Cases → enrichResponse appends to existing extensions
  ✓ TracingExtension → Edge Cases → enrichResponse preserves response data
  ✓ TracingExtension → Edge Cases → buildResponseData with zero duration
  ✓ TracingExtension → Edge Cases → extractOrCreateContext with all options provided
  ✓ TracingExtension → Edge Cases → extractOrCreateContext with no opti… 0.01s  
  ✓ TracingExtension → Edge Cases → generateTraceId format is valid hex
  ✓ TracingExtension → Edge Cases → generateSpanId format is valid with prefix
  ✓ TracingExtension → Sad Paths → onFunctionExecuted does nothing when context is null
  ✓ TracingExtension → Sad Paths → onFunctionExecuted handles response with existing errors
  ✓ TracingExtension → Sad Paths → enrichResponse with very large duration
  ✓ TracingExtension → Sad Paths → buildDownstreamContext propagates trace through multiple hops
  ✓ TracingExtension → Sad Paths → buildDownstreamContext with complex baggage
  ✓ TracingExtension → Sad Paths → extractOrCreateContext when client provides incomplete trace
  ✓ TracingExtension → Sad Paths → extractOrCreateContext generates different server spans
  ✓ TracingExtension → Sad Paths → enrichResponse maintains baggage context across services

   PASS  Tests\Unit\Facades\ServerTest
  ✓ Server Facade → Happy Paths → retrieves the function repository      0.01s  
  ✓ Server Facade → Happy Paths → retrieves middleware
  ✓ Server Facade → Happy Paths → retrieves the name
  ✓ Server Facade → Happy Paths → retrieves the route name
  ✓ Server Facade → Happy Paths → retrieves the route path
  ✓ Server Facade → Happy Paths → retrieves the version

   FAIL  Tests\Unit\FunctionConditionCoverageTest
  ✓ Function Condition Coverage → covers the false branch of the function definition guard
  ✓ Function Condition Coverage → simulates all possible condition states for complete coverage
  ⨯ Function Condition Coverage → verifies guard clause prevents actual… 0.01s  

   PASS  Tests\Unit\Functions\AbstractFunctionTest
  ✓ AbstractFunction → Happy Paths → getName() → generates function name from class name in snake_case format
  ✓ AbstractFunction → Happy Paths → getName() → converts multi-word class names to snake_case correctly
  ✓ AbstractFunction → Happy Paths → getName() → handles single-word class names correctly
  ✓ AbstractFunction → Happy Paths → getName() → can be overridden to provide custom function names
  ✓ AbstractFunction → Happy Paths → getName() → always prefixes auto-generated names with app namespace
  ✓ AbstractFunction → Happy Paths → getVersion() → returns default version 1
  ✓ AbstractFunction → Happy Paths → getVersion() → can be overridden to provide custom version
  ✓ AbstractFunction → Happy Paths → getSummary() → returns function name by default
  ✓ AbstractFunction → Happy Paths → getSummary() → can be overridden to provide custom summaries
  ✓ AbstractFunction → Happy Paths → getSummary() → returns string type summary
  ✓ AbstractFunction → Happy Paths → getArguments() → returns empty array by default
  ✓ AbstractFunction → Happy Paths → getArguments() → can be overridden to define function arguments
  ✓ AbstractFunction → Happy Paths → getArguments() → returns ArgumentData instances for Forrst Discovery compatibility
  ✓ AbstractFunction → Happy Paths → getResult() → returns null by default
  ✓ AbstractFunction → Happy Paths → getResult() → can be overridden to define result descriptor
  ✓ AbstractFunction → Happy Paths → getResult() → returns ResultDescriptorData with schema definition
  ✓ AbstractFunction → Happy Paths → getErrors() → returns empty array by default
  ✓ AbstractFunction → Happy Paths → getErrors() → can be overridden to define error descriptors
  ✓ AbstractFunction → Happy Paths → getErrors() → returns error arrays with string-based codes for Forrst compatibility
  ✓ AbstractFunction → Happy Paths → setRequest() → stores request object for later access
  ✓ AbstractFunction → Happy Paths → setRequest() → accepts request with null arguments
  ✓ AbstractFunction → Happy Paths → setRequest() → accepts request with nested arguments structure
  ✓ AbstractFunction → Happy Paths → FunctionInterface implementation → implements FunctionInterface contract
  ✓ AbstractFunction → Happy Paths → FunctionInterface implementation → provides all required FunctionInterface methods
  ✓ AbstractFunction → Sad Paths → getName() error handling → handles empty class name suffix gracefully
  ✓ AbstractFunction → Sad Paths → setRequest() validation → allows overwriting previous request object
  ✓ AbstractFunction → Edge Cases → getName() with special characters →… 0.01s  
  ✓ AbstractFunction → Edge Cases → getName() with special characters → handles consecutive uppercase letters
  ✓ AbstractFunction → Edge Cases → getArguments() edge cases → handles empty arguments array definition
  ✓ AbstractFunction → Edge Cases → getArguments() edge cases → handles large number of arguments
  ✓ AbstractFunction → Edge Cases → getErrors() edge cases → handles single error definition
  ✓ AbstractFunction → Edge Cases → getErrors() edge cases → handles many error definitions
  ✓ AbstractFunction → Edge Cases → setRequest() with various request types → handles request with standard id
  ✓ AbstractFunction → Edge Cases → setRequest() with various request types → handles request with string id
  ✓ AbstractFunction → Edge Cases → setRequest() with various request types → handles request with numeric-like string id
  ✓ AbstractFunction → Edge Cases → setRequest() with various request types → handles request with complex arguments array
  ✓ AbstractFunction → Edge Cases → method chaining scenarios → allows setting request before calling getName
  ✓ AbstractFunction → Edge Cases → method chaining scenarios → getName remains consistent after setRequest
  ✓ AbstractFunction → Trait Integration → InteractsWithAuthentication trait → includes InteractsWithAuthentication trait
  ✓ AbstractFunction → Trait Integration → InteractsWithAuthentication trait → provides getCurrentUser method from trait
  ✓ AbstractFunction → Trait Integration → InteractsWithQueryBuilder trait → includes InteractsWithQueryBuilder trait
  ✓ AbstractFunction → Trait Integration → InteractsWithQueryBuilder trait → provides query method from trait
  ✓ AbstractFunction → Trait Integration → InteractsWithTransformer trait → includes InteractsWithTransformer trait
  ✓ AbstractFunction → Trait Integration → InteractsWithTransformer trait → provides item method from trait
  ✓ AbstractFunction → Trait Integration → InteractsWithTransformer trait → provides collection method from trait
  ✓ AbstractFunction → Trait Integration → InteractsWithTransformer trait → provides cursorPaginate method from trait
  ✓ AbstractFunction → Trait Integration → InteractsWithTransformer trait → provides paginate method from trait
  ✓ AbstractFunction → Trait Integration → InteractsWithTransformer trait → provides simplePaginate method from trait
  ✓ AbstractFunction → Trait Integration → all three traits work together → function has access to all trait methods
  ✓ AbstractFunction → Trait Integration → all three traits work together → all three traits are present in class hierarchy

   FAIL  Tests\Unit\Functions\AbstractListFunctionTest
  ✓ AbstractListFunction → creates list method instance                  0.02s  
  ⨯ AbstractListFunction → handles list request                          0.01s  
  ✓ AbstractListFunction → gets arguments configuration

   PASS  Tests\Unit\Functions\Concerns\InteractsWithAuthenticationTest
  ✓ InteractsWithAuthentication → trait existence → trait exists and can be used
  ✓ InteractsWithAuthentication → trait existence → test class properly uses the trait
  ✓ InteractsWithAuthentication → getCurrentUser() - Happy Path → returns authenticated user when user is logged in
  ✓ InteractsWithAuthentication → getCurrentUser() - Happy Path → returns different authenticated users based on who is logged in
  ✓ InteractsWithAuthentication → getCurrentUser() - Happy Path → returns user with remember token when present
  ✓ InteractsWithAuthentication → getCurrentUser() - Sad Path → throws HttpException with 401 when user is not authenticated
  ✓ InteractsWithAuthentication → getCurrentUser() - Sad Path → exception has correct status code 401
  ✓ InteractsWithAuthentication → getCurrentUser() - Sad Path → exception has correct message "Unauthorized"
  ✓ InteractsWithAuthentication → getCurrentUser() - Sad Path → does not call auth()->user() when authentication fails
  ✓ InteractsWithAuthentication → getCurrentUser() - Edge Cases → calls auth() facade methods in correct order
  ✓ InteractsWithAuthentication → getCurrentUser() - Edge Cases → works with different Authenticatable implementations
  ✓ InteractsWithAuthentication → getCurrentUser() - Edge Cases → method is protected and not publicly accessible
  ✓ InteractsWithAuthentication → getCurrentUser() - Edge Cases → returns correct type hint of Authenticatable
  ✓ InteractsWithAuthentication → getCurrentUser() - Integration → integrates properly with Laravel Auth facade
  ✓ InteractsWithAuthentication → getCurrentUser() - Integration → can be called multiple times with same result when user is authenticated
  ✓ InteractsWithAuthentication → getCurrentUser() - Integration → consistently throws exception when called multiple times without authentication

   PASS  Tests\Unit\Functions\Concerns\InteractsWithCancellationTest
  ✓ InteractsWithCancellation → getCancellationToken → Happy Paths → ex… 0.01s  
  ✓ InteractsWithCancellation → getCancellationToken → Happy Paths → ex… 0.01s  
  ✓ InteractsWithCancellation → getCancellationToken → Sad Paths → returns null when request has no extensions
  ✓ InteractsWithCancellation → getCancellationToken → Sad Paths → returns null when cancellation extension is not present
  ✓ InteractsWithCancellation → getCancellationToken → Sad Paths → returns null when cancellation extension has no token option
  ✓ InteractsWithCancellation → getCancellationToken → Sad Paths → returns null when token option is not a string
  ✓ InteractsWithCancellation → getCancellationToken → Edge Cases → returns null when token option is empty string
  ✓ InteractsWithCancellation → getCancellationToken → Edge Cases → extracts token when multiple extensions are present
  ✓ InteractsWithCancellation → getCancellationToken → Edge Cases → returns null when token option is null
  ✓ InteractsWithCancellation → isCancellationRequested → Happy Paths → returns true when token is cancelled
  ✓ InteractsWithCancellation → isCancellationRequested → Happy Paths → returns false when token is active but not cancelled
  ✓ InteractsWithCancellation → isCancellationRequested → Sad Paths → returns false when request has no cancellation token
  ✓ InteractsWithCancellation → isCancellationRequested → Sad Paths → returns false when token is not in cache
  ✓ InteractsWithCancellation → isCancellationRequested → Edge Cases → returns false when token exists with unexpected cache value
  ✓ InteractsWithCancellation → isCancellationRequested → Edge Cases → returns false when cancellation extension has empty token
  ✓ InteractsWithCancellation → isCancellationRequested → Edge Cases → checks cancellation status multiple times correctly
  ✓ InteractsWithCancellation → throwIfCancellationRequested → Happy Paths → does not throw when token is not cancelled
  ✓ InteractsWithCancellation → throwIfCancellationRequested → Happy Paths → does not throw when request has no cancellation extension
  ✓ InteractsWithCancellation → throwIfCancellationRequested → Sad Paths → throws CancelledException when token is cancelled
  ✓ InteractsWithCancellation → throwIfCancellationRequested → Edge Cases → does not throw when token is not in cache
  ✓ InteractsWithCancellation → throwIfCancellationRequested → Edge Cases → throws exception that can be caught and inspected
  ✓ InteractsWithCancellation → throwIfCancellationRequested → Edge Cases → can be called multiple times without throwing if not cancelled
  ✓ InteractsWithCancellation → throwIfCancellationRequested → Edge Cases → throws immediately when token becomes cancelled mid-execution

   PASS  Tests\Unit\Functions\Concerns\InteractsWithQueryBuilderTest
  ✓ InteractsWithQueryBuilder → trait exists and can be used             0.01s  

   PASS  Tests\Unit\Functions\Concerns\InteractsWithTransformerTest
  ✓ InteractsWithTransformer → Happy Paths → item() method → transforms… 0.01s  
  ✓ InteractsWithTransformer → Happy Paths → item() method → transforms single ResourceInterface into DocumentData
  ✓ InteractsWithTransformer → Happy Paths → collection() method → transforms Collection of Models into DocumentData
  ✓ InteractsWithTransformer → Happy Paths → collection() method → transforms empty Collection into DocumentData with empty data array
  ✓ InteractsWithTransformer → Happy Paths → cursorPaginate() method →…  0.01s  
  ✓ InteractsWithTransformer → Happy Paths → cursorPaginate() method → executes cursor pagination with empty results
  ✓ InteractsWithTransformer → Happy Paths → paginate() method → execut… 0.01s  
  ✓ InteractsWithTransformer → Happy Paths → paginate() method → execut… 0.01s  
  ✓ InteractsWithTransformer → Happy Paths → simplePaginate() method →…  0.01s  
  ✓ InteractsWithTransformer → Happy Paths → simplePaginate() method →…  0.01s  
  ✓ InteractsWithTransformer → Edge Cases → item() handles Model with minimal attributes
  ✓ InteractsWithTransformer → Edge Cases → collection() handles Collection with single item
  ✓ InteractsWithTransformer → Edge Cases → collection() handles large…  0.02s  
  ✓ InteractsWithTransformer → Edge Cases → cursorPaginate() handles empty results without pagination metadata
  ✓ InteractsWithTransformer → Edge Cases → paginate() handles first pa… 0.01s  
  ✓ InteractsWithTransformer → Edge Cases → paginate() handles last pag… 0.01s  
  ✓ InteractsWithTransformer → Edge Cases → simplePaginate() handles empty results
  ✓ InteractsWithTransformer → Edge Cases → methods use same requestObject for transformer creation
  ✓ InteractsWithTransformer → Edge Cases → collection() handles mixed Model types gracefully
  ✓ InteractsWithTransformer → Edge Cases → pagination methods respect…  0.01s  

   FAIL  Tests\Unit\Functions\DescribeFunctionTest
  ✓ DescribeFunction → Happy Paths → getName() → returns standard Forrs… 0.01s  
  ✓ DescribeFunction → Happy Paths → getVersion() → returns default version
  ✓ DescribeFunction → Happy Paths → getSummary() → returns description of discovery function
  ✓ DescribeFunction → Happy Paths → getResult() → returns ResultDescriptorData with Forrst Discovery schema
  ✓ DescribeFunction → Happy Paths → getArguments() → returns arguments… 0.01s  
  ⨯ DescribeFunction → Happy Paths → handle() → generates complete Forr… 0.01s  
  ⨯ DescribeFunction → Happy Paths → handle() → includes server configuration with environment and URL
  ⨯ DescribeFunction → Happy Paths → handle() → aggregates errors from multiple sources
  ⨯ DescribeFunction → Happy Paths → handle() → assembles components section with errors
  ⨯ DescribeFunction → Happy Paths → handle() → includes all standard Forrst error codes
  ⨯ DescribeFunction → Happy Paths → handle() → collects all functions from repository
  ⨯ DescribeFunction → Happy Paths → handle() → generates valid Forrst Discovery document structure
  ✓ DescribeFunction → Happy Paths → handle() → includes function version in descriptor
  ✓ DescribeFunction → Edge Cases → filterRecursive() → removes null values from array
  ✓ DescribeFunction → Edge Cases → filterRecursive() → removes empty strings from array
  ✓ DescribeFunction → Edge Cases → filterRecursive() → preserves boolean false values
  ✓ DescribeFunction → Edge Cases → filterRecursive() → preserves numeric zero values
  ✓ DescribeFunction → Edge Cases → filterRecursive() → recursively filters nested arrays
  ✓ DescribeFunction → Edge Cases → filterRecursive() → removes empty arrays after filtering
  ✓ DescribeFunction → Edge Cases → filterRecursive() → handles deeply nested arrays correctly
  ✓ DescribeFunction → Edge Cases → filterRecursive() → handles mixed types correctly
  ⨯ DescribeFunction → Edge Cases → handle() with empty data → handles server with no registered functions
  ⨯ DescribeFunction → Sad Paths → handle() error scenarios → handles function with null result gracefully
  ⨯ DescribeFunction → Sad Paths → handle() error scenarios → handles functions with empty error arrays

   PASS  Tests\Unit\Functions\FunctionUrnTest
  ✓ FunctionUrn → all() → returns all function URN values                0.01s  
  ✓ FunctionUrn → isSystem() → returns true for system function URNs
  ✓ FunctionUrn → isSystem() → returns false for non-system function URNs
  ✓ FunctionUrn → enum cases → Ping has correct URN
  ✓ FunctionUrn → enum cases → Capabilities has correct URN
  ✓ FunctionUrn → enum cases → Describe has correct URN
  ✓ FunctionUrn → enum cases → Health has correct URN
  ✓ FunctionUrn → enum cases → Cancel has correct URN
  ✓ FunctionUrn → enum cases → OperationStatus has correct URN
  ✓ FunctionUrn → enum cases → OperationCancel has correct URN
  ✓ FunctionUrn → enum cases → OperationList has correct URN
  ✓ FunctionUrn → enum cases → LocksStatus has correct URN
  ✓ FunctionUrn → enum cases → LocksRelease has correct URN
  ✓ FunctionUrn → enum cases → LocksForceRelease has correct URN

   PASS  Tests\Unit\Functions\StreamingSumTest
  ✓ StreamingSum → Streaming Output → streams correct sequence of event… 0.01s  
  ✓ StreamingSum → Streaming Output → streams correct SSE format
  ✓ StreamingSum → Streaming Output → streams empty result for no arguments
  ✓ StreamingSum → Streaming Output → non-streaming handle returns correct result

   PASS  Tests\Unit\Functions\System\CancelFunctionTest
  ✓ CancelFunction → Happy Paths → __invoke() → cancels request successfully with valid token
  ✓ CancelFunction → Happy Paths → __invoke() → returns correct structure with cancelled true and token value
  ✓ CancelFunction → Happy Paths → getName() → returns standard Forrst cancel function name
  ✓ CancelFunction → Happy Paths → getSummary() → returns description of cancel function
  ✓ CancelFunction → Happy Paths → getArguments() → returns token argument configuration
  ✓ CancelFunction → Happy Paths → getArguments() → token argument is r… 0.01s  
  ✓ CancelFunction → Happy Paths → getResult() → returns ResultDescriptorData with cancellation response schema
  ✓ CancelFunction → Happy Paths → getResult() → schema defines object type with cancelled and token properties
  ✓ CancelFunction → Happy Paths → getResult() → schema requires cancelled and token fields
  ✓ CancelFunction → Happy Paths → getResult() → result description is Cancellation result
  ✓ CancelFunction → Happy Paths → getErrors() → returns array of ErrorDefinitionData with two error types
  ✓ CancelFunction → Happy Paths → getErrors() → defines CancellationTokenUnknown error
  ✓ CancelFunction → Happy Paths → getErrors() → defines CancellationTooLate error
  ✓ CancelFunction → Sad Paths → __invoke() with missing token → throws CancellationTokenMissingException when token argument is missing
  ✓ CancelFunction → Sad Paths → __invoke() with missing token → throws CancellationTokenMissingException when token argument is null
  ✓ CancelFunction → Sad Paths → __invoke() with missing token → throws CancellationTokenMissingException when token is empty string
  ✓ CancelFunction → Sad Paths → __invoke() with missing token → throws CancellationTokenMissingException when token is non-string type
  ✓ CancelFunction → Sad Paths → __invoke() with unknown token → throws CancellationTokenNotFoundException when extension cancel returns false
  ✓ CancelFunction → Sad Paths → __invoke() with unknown token → throws CancellationTokenNotFoundException with correct message for expired token
  ✓ CancelFunction → Edge Cases → __invoke() with whitespace-only token → processes cancellation successfully when token contains whitespace
  ✓ CancelFunction → Edge Cases → __invoke() with very long token → processes cancellation successfully with very long valid token
  ✓ CancelFunction → Edge Cases → __invoke() with special characters in token → processes cancellation successfully with special characters in token
  ✓ CancelFunction → Edge Cases → __invoke() with unicode token → processes cancellation successfully with unicode characters in token
  ✓ CancelFunction → Edge Cases → __invoke() when token already cancelled → succeeds when cancelling already cancelled token

   PASS  Tests\Unit\Functions\System\CapabilitiesFunctionTest
  ✓ CapabilitiesFunction → Happy Paths → getName() → returns standard F… 0.01s  
  ✓ CapabilitiesFunction → Happy Paths → getVersion() → returns default version
  ✓ CapabilitiesFunction → Happy Paths → getSummary() → returns description of capabilities function
  ✓ CapabilitiesFunction → Happy Paths → getArguments() → returns empty array since capabilities requires no arguments
  ✓ CapabilitiesFunction → Happy Paths → getResult() → returns ResultDe… 0.01s  
  ✓ CapabilitiesFunction → Happy Paths → getResult() → schema requires service, protocol_versions, and functions
  ✓ CapabilitiesFunction → Happy Paths → getResult() → schema defines protocol_versions as string array
  ✓ CapabilitiesFunction → Happy Paths → getResult() → schema defines functions as string array
  ✓ CapabilitiesFunction → Happy Paths → __invoke() → returns service name
  ✓ CapabilitiesFunction → Happy Paths → __invoke() → returns protocol version
  ✓ CapabilitiesFunction → Happy Paths → __invoke() → returns empty functions array when no functions registered
  ✓ CapabilitiesFunction → Happy Paths → __invoke() → returns list of function names
  ✓ CapabilitiesFunction → Happy Paths → __invoke() → does not include extensions when none provided
  ✓ CapabilitiesFunction → Happy Paths → __invoke() → includes extensions when provided
  ✓ CapabilitiesFunction → Happy Paths → __invoke() → does not include limits when none provided
  ✓ CapabilitiesFunction → Happy Paths → __invoke() → includes limits when provided
  ✓ CapabilitiesFunction → Happy Paths → __invoke() → returns complete response with all optional fields
  ✓ CapabilitiesFunction → Edge Cases → function name extraction → handles single function
  ✓ CapabilitiesFunction → Edge Cases → function name extraction → hand… 0.01s  
  ✓ CapabilitiesFunction → Edge Cases → empty collections → handles empty extensions array
  ✓ CapabilitiesFunction → Edge Cases → empty collections → handles empty limits array
  ✓ CapabilitiesFunction → Sad Paths → handles function with exception in getName gracefully

   FAIL  Tests\Unit\Functions\System\HealthFunctionTest
  ✓ HealthFunction → Happy Paths → getName() → returns standard Forrst…  0.01s  
  ✓ HealthFunction → Happy Paths → getVersion() → returns default version
  ✓ HealthFunction → Happy Paths → getSummary() → returns description of health function
  ✓ HealthFunction → Happy Paths → getArguments() → returns component and include_details arguments
  ⨯ HealthFunction → Happy Paths → getArguments() → component argument is optional string
  ✓ HealthFunction → Happy Paths → getArguments() → include_details arg… 0.01s  
  ✓ HealthFunction → Happy Paths → getResult() → returns ResultDescriptorData with health response schema
  ✓ HealthFunction → Happy Paths → getResult() → schema defines status enum with health states
  ✓ HealthFunction → Happy Paths → getResult() → schema requires status and timestamp fields
  ⨯ HealthFunction → Happy Paths → __invoke() → returns healthy status with no checkers
  ⨯ HealthFunction → Happy Paths → __invoke() → returns timestamp in ISO 8601 format
  ⨯ HealthFunction → Happy Paths → __invoke() → aggregates health from multiple checkers
  ⨯ HealthFunction → Happy Paths → __invoke() → reports degraded status when one component is degraded
  ⨯ HealthFunction → Happy Paths → __invoke() → reports unhealthy status when one component is unhealthy
  ⨯ HealthFunction → Happy Paths → __invoke() → filters by specific component when requested
  ⨯ HealthFunction → Happy Paths → __invoke() → returns self health when component is self
  ⨯ HealthFunction → Happy Paths → __invoke() → includes full details when include_details is true
  ✓ HealthFunction → Happy Paths → __invoke() → includes only status when include_details is false
  ⨯ HealthFunction → Edge Cases → worst status determination → unhealthy takes precedence over degraded
  ⨯ HealthFunction → Edge Cases → worst status determination → degraded takes precedence over healthy
  ⨯ HealthFunction → Edge Cases → worst status determination → multiple unhealthy components still report unhealthy
  ⨯ HealthFunction → Edge Cases → component filtering → returns healthy with no components when filtering non-existent component
  ⨯ HealthFunction → Sad Paths → handles checker throwing exception gracefully

   FAIL  Tests\Unit\Functions\System\LockForceReleaseFunctionTest
  ✓ LockForceReleaseFunction → Happy Paths → __invoke() → force release… 0.01s  
  ✓ LockForceReleaseFunction → Happy Paths → __invoke() → returns correct structure with released true, key value, and forced true
  ✓ LockForceReleaseFunction → Happy Paths → getName() → returns standard Forrst lock force release function name
  ⨯ LockForceReleaseFunction → Happy Paths → getSummary() → returns description of lock force release function
  ✓ LockForceReleaseFunction → Happy Paths → getArguments() → returns key argument configuration
  ✓ LockForceReleaseFunction → Happy Paths → getArguments() → key argum… 0.01s  
  ✓ LockForceReleaseFunction → Happy Paths → getResult() → returns ResultDescriptorData with force release response schema
  ✓ LockForceReleaseFunction → Happy Paths → getResult() → schema defines object type with released, key, and forced properties
  ✓ LockForceReleaseFunction → Happy Paths → getResult() → schema requires released, key, and forced fields
  ⨯ LockForceReleaseFunction → Happy Paths → getErrors() → returns array of ErrorDefinitionData with one error type
  ✓ LockForceReleaseFunction → Happy Paths → getErrors() → defines LockNotFound error
  ✓ LockForceReleaseFunction → Sad Paths → __invoke() with missing key → throws InvalidArgumentException when key argument is missing
  ✓ LockForceReleaseFunction → Sad Paths → __invoke() with missing key → throws InvalidArgumentException when key is empty string
  ✓ LockForceReleaseFunction → Sad Paths → __invoke() with missing key → throws InvalidArgumentException when key is non-string type
  ✓ LockForceReleaseFunction → Sad Paths → __invoke() with non-existent lock → throws LockNotFoundException when lock does not exist

   PASS  Tests\Unit\Functions\System\LockReleaseFunctionTest
  ✓ LockReleaseFunction → Happy Paths → __invoke() → releases lock succ… 0.01s  
  ✓ LockReleaseFunction → Happy Paths → __invoke() → returns correct structure with released true and key value
  ✓ LockReleaseFunction → Happy Paths → getName() → returns standard Forrst lock release function name
  ✓ LockReleaseFunction → Happy Paths → getSummary() → returns description of lock release function
  ✓ LockReleaseFunction → Happy Paths → getArguments() → returns key and owner argument configurations
  ✓ LockReleaseFunction → Happy Paths → getArguments() → key argument is required with string type
  ✓ LockReleaseFunction → Happy Paths → getArguments() → owner argument is required with string type
  ✓ LockReleaseFunction → Happy Paths → getResult() → returns ResultDescriptorData with release response schema
  ✓ LockReleaseFunction → Happy Paths → getResult() → schema defines object type with released and key properties
  ✓ LockReleaseFunction → Happy Paths → getResult() → schema requires released and key fields
  ✓ LockReleaseFunction → Happy Paths → getErrors() → returns array of ErrorDefinitionData with two error types
  ✓ LockReleaseFunction → Happy Paths → getErrors() → defines LockNotFound error
  ✓ LockReleaseFunction → Happy Paths → getErrors() → defines LockOwnershipMismatch error
  ✓ LockReleaseFunction → Sad Paths → __invoke() with missing key → throws LockKeyRequiredException when key argument is missing
  ✓ LockReleaseFunction → Sad Paths → __invoke() with missing key → throws LockKeyRequiredException when key is empty string
  ✓ LockReleaseFunction → Sad Paths → __invoke() with missing owner → t… 0.01s  
  ✓ LockReleaseFunction → Sad Paths → __invoke() with missing owner → throws LockOwnerRequiredException when owner is empty string
  ✓ LockReleaseFunction → Sad Paths → __invoke() with non-existent lock → throws LockNotFoundException when lock does not exist
  ✓ LockReleaseFunction → Sad Paths → __invoke() with wrong owner → throws LockOwnershipMismatchException when owner does not match

   FAIL  Tests\Unit\Functions\System\LockStatusFunctionTest
  ✓ LockStatusFunction → Happy Paths → __invoke() → returns locked stat… 0.01s  
  ✓ LockStatusFunction → Happy Paths → __invoke() → returns unlocked status when lock does not exist
  ✓ LockStatusFunction → Happy Paths → getName() → returns standard Forrst lock status function name
  ✓ LockStatusFunction → Happy Paths → getSummary() → returns description of lock status function
  ✓ LockStatusFunction → Happy Paths → getArguments() → returns key argument configuration
  ✓ LockStatusFunction → Happy Paths → getArguments() → key argument is required with string type
  ✓ LockStatusFunction → Happy Paths → getResult() → returns ResultDescriptorData with status response schema
  ✓ LockStatusFunction → Happy Paths → getResult() → schema defines object type with key and locked properties
  ✓ LockStatusFunction → Happy Paths → getResult() → schema includes optional properties for locked status
  ✓ LockStatusFunction → Happy Paths → getResult() → schema requires only key and locked fields
  ⨯ LockStatusFunction → Happy Paths → getErrors() → returns empty array as status check does not fail
  ✓ LockStatusFunction → Sad Paths → __invoke() with missing key → throws InvalidArgumentException when key argument is missing
  ✓ LockStatusFunction → Sad Paths → __invoke() with missing key → throws InvalidArgumentException when key is empty string
  ✓ LockStatusFunction → Sad Paths → __invoke() with missing key → throws InvalidArgumentException when key is non-string type
  ✓ LockStatusFunction → Edge Cases → __invoke() with expired lock → returns unlocked status for expired lock

   PASS  Tests\Unit\Functions\System\PingFunctionTest
  ✓ PingFunction → Happy Paths → getName() → returns standard Forrst pi… 0.01s  
  ✓ PingFunction → Happy Paths → getVersion() → returns default version
  ✓ PingFunction → Happy Paths → getSummary() → returns description of…  0.01s  
  ✓ PingFunction → Happy Paths → getArguments() → returns empty array since ping requires no arguments
  ✓ PingFunction → Happy Paths → getResult() → returns ResultDescriptorData with ping response schema
  ✓ PingFunction → Happy Paths → getResult() → schema defines status enum with health states
  ✓ PingFunction → Happy Paths → getResult() → schema defines timestamp as ISO 8601 date-time
  ✓ PingFunction → Happy Paths → getResult() → schema requires status and timestamp fields
  ✓ PingFunction → Happy Paths → getResult() → schema defines optional details object
  ✓ PingFunction → Happy Paths → __invoke() → returns healthy status
  ✓ PingFunction → Happy Paths → __invoke() → returns current timestamp in ISO 8601 format
  ✓ PingFunction → Happy Paths → __invoke() → returns only status and timestamp fields
  ✓ PingFunction → Happy Paths → __invoke() → timestamp is valid ISO 8601 string
  ✓ PingFunction → Edge Cases → __invoke() consistency → returns consistent structure on multiple invocations
  ✓ PingFunction → Edge Cases → __invoke() consistency → timestamps are… 1.01s  
  ✓ PingFunction → Sad Paths → function always succeeds with valid response

   FAIL  Tests\Unit\FunctionsTest
  ⨯ Functions → Happy Paths → sends Forrst request with method only usi… 0.01s  
  ⨯ Functions → Happy Paths → sends Forrst request with method and parameters
  ✓ Functions → Happy Paths → sends Forrst request with custom ID
  ✓ Functions → Happy Paths → sends request to correct RPC route
  ✓ Functions → Happy Paths → passes complex nested parameters correctly
  ✓ Functions → Happy Paths → includes all required Forrst protocol fields
  ✓ Functions → Happy Paths → returns TestResponse instance for fluent Laravel assertions
  ✓ Functions → Happy Paths → integrates with Laravel HTTP testing help… 0.02s  
  ✓ Functions → Happy Paths → uses Pest Laravel postJson helper interna… 0.01s  
  ✓ Functions → Sad Paths → filters out null params parameter
  ✓ Functions → Sad Paths → sends request to valid route endpoint        0.01s  
  ✓ Functions → Sad Paths → handles missing Pest Laravel helper gracefully
  ✓ Functions → Edge Cases → validates function definition guard clause logic
  ✓ Functions → Edge Cases → handles scenario when Pest Laravel is not available
  ✓ Functions → Edge Cases → handles empty params array correctly
  ✓ Functions → Edge Cases → handles method names with special characte… 0.01s  
  ✓ Functions → Edge Cases → handles empty string as custom ID
  ✓ Functions → Edge Cases → handles unicode characters in parameters
  ✓ Functions → Edge Cases → handles numeric string as custom ID
  ✓ Functions → Edge Cases → handles deeply nested parameter structures
  ✓ Functions → Edge Cases → handles parameters with boolean and numeric values
  ⨯ Functions → Edge Cases → handles ULID format default ID
  ✓ Functions → Edge Cases → works with different testing environments
  ✓ Functions → Edge Cases → handles concurrent test execution with rou… 0.01s  
  ✓ Functions → Edge Cases → maintains Forrst protocol compliance with…  0.01s  
  ✓ Functions → Edge Cases → integrates with Laravel application context
  ✓ Functions → Edge Cases → supports Forrst method naming conventions   0.01s  

   PASS  Tests\Unit\Http\Middleware\ForceJsonTest
  ✓ ForceJson Middleware → Happy Paths → sets Content-Type and Accept h… 0.01s  
  ✓ ForceJson Middleware → Happy Paths → sets Content-Type and Accept headers for /rpc/* routes
  ✓ ForceJson Middleware → Happy Paths → passes request to next middleware after setting headers
  ✓ ForceJson Middleware → Happy Paths → overwrites existing Content-Type header for /rpc routes
  ✓ ForceJson Middleware → Happy Paths → handles POST requests to /rpc endpoint
  ✓ ForceJson Middleware → Happy Paths → handles GET requests to /rpc endpoint
  ✓ ForceJson Middleware → Sad Paths → does not modify headers for non-rpc routes
  ✓ ForceJson Middleware → Sad Paths → does not set headers when route starts with /rpc but not exact match
  ✓ ForceJson Middleware → Sad Paths → passes through requests without modifying headers for non-rpc routes
  ✓ ForceJson Middleware → Edge Cases → handles /rpc route with trailing slash
  ✓ ForceJson Middleware → Edge Cases → handles deeply nested /rpc paths
  ✓ ForceJson Middleware → Edge Cases → preserves request method and body data
  ✓ ForceJson Middleware → Edge Cases → handles PUT requests to /rpc routes
  ✓ ForceJson Middleware → Edge Cases → handles DELETE requests to /rpc routes
  ✓ ForceJson Middleware → Edge Cases → handles PATCH requests to /rpc routes
  ✓ ForceJson Middleware → Edge Cases → handles OPTIONS requests to /rpc routes
  ✓ ForceJson Middleware → Edge Cases → handles /rpc route with query parameters
  ✓ ForceJson Middleware → Edge Cases → handles /rpc/* route with query parameters
  ✓ ForceJson Middleware → Edge Cases → sets headers when Content-Type is already application/json
  ✓ ForceJson Middleware → Edge Cases → handles /rpc with special characters in subpath
  ✓ ForceJson Middleware → Edge Cases → handles request with multiple Accept header values
  ✓ ForceJson Middleware → Edge Cases → handles request with charset in Content-Type
  ✓ ForceJson Middleware → Edge Cases → preserves other headers while s… 0.01s  
  ✓ ForceJson Middleware → Edge Cases → handles case-sensitive route matching
  ✓ ForceJson Middleware → Edge Cases → handles request with no initial headers set
  ✓ ForceJson Middleware → Regressions → middleware does not break request pipeline
  ✓ ForceJson Middleware → Regressions → maintains request integrity through middleware

   PASS  Tests\Unit\Http\Middleware\RenderThrowableTest
  ✓ RenderThrowable Middleware → Happy Paths → passes request through w… 0.01s  
  ✓ RenderThrowable Middleware → Happy Paths → renders InvalidRequestException as Forrst error
  ✓ RenderThrowable Middleware → Happy Paths → renders FunctionNotFoundException as Forrst error
  ✓ RenderThrowable Middleware → Happy Paths → renders InternalErrorException as Forrst error
  ✓ RenderThrowable Middleware → Happy Paths → includes request id in error response when present
  ✓ RenderThrowable Middleware → Happy Paths → handles numeric request id
  ✓ RenderThrowable Middleware → Happy Paths → handles string request id
  ✓ RenderThrowable Middleware → Sad Paths → re-throws exception when request does not want JSON
  ✓ RenderThrowable Middleware → Edge Cases → handles exception with null request id
  ✓ RenderThrowable Middleware → Edge Cases → handles generic PHP exception
  ✓ RenderThrowable Middleware → Edge Cases → handles TypeError exception
  ✓ RenderThrowable Middleware → Edge Cases → preserves response headers from mapped exception
  ✓ RenderThrowable Middleware → Edge Cases → handles request with application/json Accept header
  ✓ RenderThrowable Middleware → Edge Cases → handles exception thrown during response building
  ✓ RenderThrowable Middleware → Edge Cases → does not filter protocol field from response
  ✓ RenderThrowable Middleware → Edge Cases → handles POST request with JSON body
  ✓ RenderThrowable Middleware → Edge Cases → handles zero as request id
  ✓ RenderThrowable Middleware → Edge Cases → handles empty string as request id
  ✓ RenderThrowable Middleware → Regressions → does not break request pipeline on success
  ✓ RenderThrowable Middleware → Regressions → maintains request object… 0.01s  
  ✓ RenderThrowable Middleware → Regressions → consistent error format across different exception types

   FAIL  Tests\Unit\Jobs\CallFunctionTest
  ✓ CallFunction → Happy Paths → executes method successfully and retur… 0.01s  
  ✓ CallFunction → Happy Paths → executes method with no parameters and returns result
  ✓ CallFunction → Happy Paths → returns unwrapped response when method implements UnwrappedResponseInterface
  ✓ CallFunction → Happy Paths → resolves method parameters from request data
  ✓ CallFunction → Happy Paths → handles method with requestObject parameter correctly
  ✓ CallFunction → Happy Paths → resolves snake_case parameters to camelCase method parameters
  ✓ CallFunction → Happy Paths → handles array data parameter when method expects array type
  ✓ CallFunction → Happy Paths → resolves Data object parameter with va… 0.01s  
  ✓ CallFunction → Happy Paths → resolves Data object when parameter na… 0.01s  
  ✓ CallFunction → Happy Paths → resolves multiple Data object parameters
  ✓ CallFunction → Happy Paths → handles mixed Data objects and primitive parameters
  ✓ CallFunction → Sad Paths → catches exception and returns error response
  ✓ CallFunction → Sad Paths → handles ValidationException during Data object validation
  ✓ CallFunction → Sad Paths → returns error response for method that throws exception
  ✓ CallFunction → Sad Paths → handles InvalidDataException during parameter resolution
  ⨯ CallFunction → Sad Paths → throws InvalidDataException when Data object validation fails
  ⨯ CallFunction → Sad Paths → handles validation error for Data parameter named "data"
  ⨯ CallFunction → Sad Paths → handles validation failure for multiple Data parameters
  ✓ CallFunction → Edge Cases → handles empty params array
  ✓ CallFunction → Edge Cases → handles null parameter values
  ✓ CallFunction → Edge Cases → filters out null values from resolved parameters
  ✓ CallFunction → Edge Cases → handles method with multiple parameter…  0.01s  
  ✓ CallFunction → Edge Cases → handles request with event parameter
  ✓ CallFunction → Edge Cases → handles nested parameter paths with dot notation
  ✓ CallFunction → Edge Cases → handles exception in method that implements UnwrappedResponseInterface
  ✓ CallFunction → Edge Cases → preserves protocol from request in response
  ✓ CallFunction → Edge Cases → handles method with no type hints on parameters
  ✓ CallFunction → Edge Cases → resolves parameters when reflection returns no named type
  ✓ CallFunction → Edge Cases → handles optional parameters that are not provided
  ⨯ CallFunction → Edge Cases → filters falsy values from resolved parameters
  ⨯ CallFunction → Edge Cases → handles Data object parameter with empty object
  ✓ CallFunction → Edge Cases → handles Data object with partial valid data
  ✓ CallFunction → Edge Cases → handles Data object parameter with snake_case to camelCase conversion
  ✓ CallFunction → Regressions → ensures ExceptionMapper is used for all caught exceptions
  ✓ CallFunction → Regressions → ensures requestObject parameter is always filtered from parameter resolution
  ✓ CallFunction → Regressions → ensures error responses always include protocol
  ⨯ CallFunction → Regressions → ensures ValidationException is wrapped in InvalidDataException for Data objects

   PASS  Tests\Unit\JsonSchema\RuleTransformerTest
  ✓ RuleTransformer → transform → Happy Paths → transforms accepted rul… 0.01s  
  ✓ RuleTransformer → transform → Happy Paths → transforms accepted_if rule to conditional schema
  ✓ RuleTransformer → transform → Happy Paths → transforms active_url rule to uri format
  ✓ RuleTransformer → transform → Happy Paths → transforms after date rule with exclusiveMinimum
  ✓ RuleTransformer → transform → Happy Paths → transforms after_or_equal date rule with minimum
  ✓ RuleTransformer → transform → Happy Paths → transforms alpha rule t… 0.01s  
  ✓ RuleTransformer → transform → Happy Paths → transforms alpha_dash rule to alphanumeric with dashes pattern
  ✓ RuleTransformer → transform → Happy Paths → transforms alpha_num rule to alphanumeric pattern
  ✓ RuleTransformer → transform → Happy Paths → transforms array rule to array type
  ✓ RuleTransformer → transform → Happy Paths → transforms ascii rule to ascii pattern
  ✓ RuleTransformer → transform → Happy Paths → transforms before date rule with exclusiveMaximum
  ✓ RuleTransformer → transform → Happy Paths → transforms before_or_equal date rule with maximum
  ✓ RuleTransformer → transform → Happy Paths → transforms between rule to minimum and maximum
  ✓ RuleTransformer → transform → Happy Paths → transforms boolean rule to boolean type
  ✓ RuleTransformer → transform → Happy Paths → transforms confirmed rule with data reference
  ✓ RuleTransformer → transform → Happy Paths → transforms date rule to date format
  ✓ RuleTransformer → transform → Happy Paths → transforms date_equals rule to enum with single date
  ✓ RuleTransformer → transform → Happy Paths → transforms date_format rule with custom format
  ✓ RuleTransformer → transform → Happy Paths → transforms decimal rule with not multipleOf constraint
  ✓ RuleTransformer → transform → Happy Paths → transforms declined rule to false enum values
  ✓ RuleTransformer → transform → Happy Paths → transforms declined_if rule to conditional not schema
  ✓ RuleTransformer → transform → Happy Paths → transforms different rule with reference to other field
  ✓ RuleTransformer → transform → Happy Paths → transforms digits rule to exact digit pattern
  ✓ RuleTransformer → transform → Happy Paths → transforms digits_between rule to digit range pattern
  ✓ RuleTransformer → transform → Happy Paths → transforms doesnt_start_with rule to negative lookahead pattern
  ✓ RuleTransformer → transform → Happy Paths → transforms doesnt_end_with rule to negative lookahead pattern
  ✓ RuleTransformer → transform → Happy Paths → transforms email rule to email format
  ✓ RuleTransformer → transform → Happy Paths → transforms ends_with rule to suffix pattern
  ✓ RuleTransformer → transform → Happy Paths → transforms enum rule to enum values
  ✓ RuleTransformer → transform → Happy Paths → transforms exclude rule with not object type
  ✓ RuleTransformer → transform → Happy Paths → transforms exclude_if rule with conditional not required
  ✓ RuleTransformer → transform → Happy Paths → transforms exclude_unless rule with conditional not required
  ✓ RuleTransformer → transform → Happy Paths → transforms exclude_with rule with anyOf fields
  ✓ RuleTransformer → transform → Happy Paths → transforms exclude_without rule with allOf fields
  ✓ RuleTransformer → transform → Happy Paths → transforms filled rule…  0.01s  
  ✓ RuleTransformer → transform → Happy Paths → transforms gt rule to exclusiveMinimum
  ✓ RuleTransformer → transform → Happy Paths → transforms gte rule to minimum
  ✓ RuleTransformer → transform → Happy Paths → transforms hex_color rule to hex pattern
  ✓ RuleTransformer → transform → Happy Paths → transforms in rule to enum values
  ✓ RuleTransformer → transform → Happy Paths → transforms integer rule to integer type
  ✓ RuleTransformer → transform → Happy Paths → transforms ip rule to anyOf ipv4 and ipv6
  ✓ RuleTransformer → transform → Happy Paths → transforms ipv4 rule to ipv4 format
  ✓ RuleTransformer → transform → Happy Paths → transforms ipv6 rule to ipv6 format
  ✓ RuleTransformer → transform → Happy Paths → transforms lt rule to exclusiveMaximum
  ✓ RuleTransformer → transform → Happy Paths → transforms lte rule to maximum
  ✓ RuleTransformer → transform → Happy Paths → transforms lowercase rule to lowercase pattern
  ✓ RuleTransformer → transform → Happy Paths → transforms mac_address rule to mac pattern
  ✓ RuleTransformer → transform → Happy Paths → transforms max rule to maxLength
  ✓ RuleTransformer → transform → Happy Paths → transforms digits_max rule to max digit pattern
  ✓ RuleTransformer → transform → Happy Paths → transforms mimetypes rule to contentMediaType
  ✓ RuleTransformer → transform → Happy Paths → transforms min rule to minLength
  ✓ RuleTransformer → transform → Happy Paths → transforms digits_min rule to min digit pattern
  ✓ RuleTransformer → transform → Happy Paths → transforms missing rule with not null type
  ✓ RuleTransformer → transform → Happy Paths → transforms missing_if rule with conditional not
  ✓ RuleTransformer → transform → Happy Paths → transforms missing_unless rule with conditional not
  ✓ RuleTransformer → transform → Happy Paths → transforms missing_with rule with multiple fields
  ✓ RuleTransformer → transform → Happy Paths → transforms missing_with_all rule with all required fields
  ✓ RuleTransformer → transform → Happy Paths → transforms multiple_of rule to multipleOf constraint
  ✓ RuleTransformer → transform → Happy Paths → transforms not_in rule to not enum
  ✓ RuleTransformer → transform → Happy Paths → transforms not_regex rule to not pattern
  ✓ RuleTransformer → transform → Happy Paths → transforms nullable rule to string or null type
  ✓ RuleTransformer → transform → Happy Paths → transforms numeric rule to number type
  ✓ RuleTransformer → transform → Happy Paths → transforms present rule… 0.01s  
  ✓ RuleTransformer → transform → Happy Paths → transforms present_if rule with conditional required
  ✓ RuleTransformer → transform → Happy Paths → transforms present_unless rule with conditional required
  ✓ RuleTransformer → transform → Happy Paths → transforms present_with rule with multiple conditional fields
  ✓ RuleTransformer → transform → Happy Paths → transforms present_with_all rule with all conditional fields
  ✓ RuleTransformer → transform → Happy Paths → transforms prohibited rule to not required
  ✓ RuleTransformer → transform → Happy Paths → transforms prohibited_if rule with conditional prohibition
  ✓ RuleTransformer → transform → Happy Paths → transforms prohibited_unless rule with conditional prohibition
  ✓ RuleTransformer → transform → Happy Paths → transforms prohibits rule with multiple prohibited fields
  ✓ RuleTransformer → transform → Happy Paths → transforms regex rule to pattern
  ✓ RuleTransformer → transform → Happy Paths → transforms required rule to required field
  ✓ RuleTransformer → transform → Happy Paths → transforms required_if rule with conditional required
  ✓ RuleTransformer → transform → Happy Paths → transforms required_if_accepted rule with accepted enum values
  ✓ RuleTransformer → transform → Happy Paths → transforms required_unless rule with conditional required
  ✓ RuleTransformer → transform → Happy Paths → transforms required_with rule to dependencies
  ✓ RuleTransformer → transform → Happy Paths → transforms required_with_all rule to dependencies with allOf
  ✓ RuleTransformer → transform → Happy Paths → transforms required_without rule to dependencies with not
  ✓ RuleTransformer → transform → Happy Paths → transforms required_without_all rule to dependencies with not allOf
  ✓ RuleTransformer → transform → Happy Paths → transforms size rule to const value
  ✓ RuleTransformer → transform → Happy Paths → transforms starts_with rule to prefix pattern
  ✓ RuleTransformer → transform → Happy Paths → transforms string rule to string type
  ✓ RuleTransformer → transform → Happy Paths → transforms timezone rul… 0.01s  
  ✓ RuleTransformer → transform → Happy Paths → transforms uppercase rule to uppercase pattern
  ✓ RuleTransformer → transform → Happy Paths → transforms url rule to uri format
  ✓ RuleTransformer → transform → Happy Paths → transforms ulid rule to ulid pattern
  ✓ RuleTransformer → transform → Happy Paths → transforms uuid rule to uuid format
  ✓ RuleTransformer → transform → Sad Paths → throws exception for bail rule
  ✓ RuleTransformer → transform → Sad Paths → throws exception for current_password rule
  ✓ RuleTransformer → transform → Sad Paths → throws exception for dime… 0.01s  
  ✓ RuleTransformer → transform → Sad Paths → throws exception for distinct rule
  ✓ RuleTransformer → transform → Sad Paths → throws exception for exists database rule
  ✓ RuleTransformer → transform → Sad Paths → throws exception for extensions rule
  ✓ RuleTransformer → transform → Sad Paths → throws exception for file rule
  ✓ RuleTransformer → transform → Sad Paths → throws exception for image rule
  ✓ RuleTransformer → transform → Sad Paths → throws exception for in_array rule
  ✓ RuleTransformer → transform → Sad Paths → throws exception for json rule
  ✓ RuleTransformer → transform → Sad Paths → throws exception for mimes rule
  ✓ RuleTransformer → transform → Sad Paths → throws exception for password rule
  ✓ RuleTransformer → transform → Sad Paths → throws exception for same rule
  ✓ RuleTransformer → transform → Sad Paths → throws exception for some… 0.01s  
  ✓ RuleTransformer → transform → Sad Paths → throws exception for unique database rule
  ✓ RuleTransformer → transform → Edge Cases → handles empty rules array
  ✓ RuleTransformer → transform → Edge Cases → handles rule object with toString method
  ✓ RuleTransformer → transform → Edge Cases → handles multiple rules combining to build complex schema
  ✓ RuleTransformer → transform → Edge Cases → handles required_array_keys rule without transformation
  ✓ RuleTransformer → transform → Edge Cases → handles unicode characters in rule parameters
  ✓ RuleTransformer → transform → Edge Cases → handles special characte… 0.01s  
  ✓ RuleTransformer → transform → Edge Cases → handles numeric values i… 0.01s  
  ✓ RuleTransformer → transform → Edge Cases → handles float values in…  0.01s  
  ✓ RuleTransformer → transform → Edge Cases → accumulates allOf condit… 0.01s  
  ✓ RuleTransformer → transform → Edge Cases → handles overlapping type and format rules
  ✓ RuleTransformer → transform → Edge Cases → handles long list of pro… 0.01s  
  ✓ RuleTransformer → transform → Edge Cases → handles empty string par… 0.01s  
  ✓ RuleTransformer → transform → Edge Cases → preserves existing schem… 0.01s  
  ✓ RuleTransformer → transform → Regressions → prevents timezone enum…  0.01s  
  ✓ RuleTransformer → transform → Regressions → ensures toString conver… 0.01s  
  ✓ RuleTransformer → transform → Regressions → handles nested properti… 0.01s  

   PASS  Tests\Unit\JsonSchema\RulesTransformerTest
  ✓ RulesTransformer → transform → Happy Paths → transforms simple requ… 0.03s  
  ✓ RulesTransformer → transform → Happy Paths → transforms multiple fields with different types
  ✓ RulesTransformer → transform → Happy Paths → transforms rules provided as array format
  ✓ RulesTransformer → transform → Happy Paths → merges additional properties into schema
  ✓ RulesTransformer → transform → Happy Paths → transforms non-required fields correctly
  ✓ RulesTransformer → transform → Happy Paths → transforms nested object rules
  ✓ RulesTransformer → transform → Happy Paths → handles min and max constraints
  ✓ RulesTransformer → transform → Happy Paths → handles between constr… 0.01s  
  ✓ RulesTransformer → transform → Happy Paths → handles in enum constraints
  ✓ RulesTransformer → transform → Happy Paths → handles regex pattern rules
  ✓ RulesTransformer → transform → Happy Paths → handles alpha rules
  ✓ RulesTransformer → transform → Happy Paths → handles alpha_num rules
  ✓ RulesTransformer → transform → Happy Paths → handles email format
  ✓ RulesTransformer → transform → Happy Paths → handles url format
  ✓ RulesTransformer → transform → Happy Paths → handles uuid format
  ✓ RulesTransformer → transform → Happy Paths → handles date format
  ✓ RulesTransformer → transform → Happy Paths → handles numeric type
  ✓ RulesTransformer → transform → Happy Paths → handles array type
  ✓ RulesTransformer → transform → Happy Paths → handles accepted rule
  ✓ RulesTransformer → transform → Happy Paths → handles declined rule
  ✓ RulesTransformer → transform → Sad Paths → throws exception for bail rule
  ✓ RulesTransformer → transform → Sad Paths → throws exception for current_password rule
  ✓ RulesTransformer → transform → Sad Paths → throws exception for dimensions rule
  ✓ RulesTransformer → transform → Sad Paths → throws exception for distinct rule
  ✓ RulesTransformer → transform → Sad Paths → throws exception for exists database rule
  ✓ RulesTransformer → transform → Sad Paths → throws exception for file rule
  ✓ RulesTransformer → transform → Sad Paths → throws exception for image rule
  ✓ RulesTransformer → transform → Sad Paths → throws exception for json rule
  ✓ RulesTransformer → transform → Sad Paths → throws exception for password rule
  ✓ RulesTransformer → transform → Sad Paths → throws exception for same rule
  ✓ RulesTransformer → transform → Sad Paths → throws exception for sometimes rule
  ✓ RulesTransformer → transform → Sad Paths → throws exception for unique database rule
  ✓ RulesTransformer → transform → Edge Cases → handles empty rules array
  ✓ RulesTransformer → transform → Edge Cases → handles empty properties array
  ✓ RulesTransformer → transform → Edge Cases → handles field with empty string rules
  ✓ RulesTransformer → transform → Edge Cases → handles unicode field names
  ✓ RulesTransformer → transform → Edge Cases → handles very long valid… 0.01s  
  ✓ RulesTransformer → transform → Edge Cases → handles field names with dots
  ✓ RulesTransformer → transform → Edge Cases → handles mixed required and optional fields
  ✓ RulesTransformer → transform → Edge Cases → handles not_in constraint
  ✓ RulesTransformer → transform → Edge Cases → handles lowercase constraint
  ✓ RulesTransformer → transform → Edge Cases → handles uppercase constraint
  ✓ RulesTransformer → transformDataObject → Happy Paths → transforms simple Data class to JSON Schema
  ✓ RulesTransformer → transformDataObject → Happy Paths → transforms complex Data class with multiple fields
  ✓ RulesTransformer → transformDataObject → Happy Paths → transforms Data class with additional properties
  ✓ RulesTransformer → transformDataObject → Happy Paths → transforms nested Data class
  ✓ RulesTransformer → transformDataObject → Sad Paths → handles non-existent class gracefully
  ✓ RulesTransformer → transformDataObject → Sad Paths → handles non-Data class

   FAIL  Tests\Unit\Models\OperationTest
  ✓ Operation Model → Happy Paths → converts model to OperationData wit… 0.01s  
  ✓ Operation Model → Happy Paths → converts model to OperationData with null errors
  ✓ Operation Model → Happy Paths → creates model from OperationData with all fields
  ✓ Operation Model → Happy Paths → creates model from OperationData with null errors
  ✓ Operation Model → Happy Paths → uses string primary key
  ✓ Operation Model → Happy Paths → scopes filter by status
  ✓ Operation Model → Happy Paths → scopes filter by function
  ✓ Operation Model → Happy Paths → scopes filter by caller              0.01s  
  ✓ Operation Model → Happy Paths → scopes find expired operations
  ✓ Operation Model → Happy Paths → combines multiple scopes
  ✓ Operation Model → Edge Cases → handles empty result array
  ⨯ Operation Model → Edge Cases → handles zero progress
  ⨯ Operation Model → Edge Cases → handles complete progress
  ⨯ Operation Model → Edge Cases → handles multiple errors in array
  ✓ Operation Model → Edge Cases → casts arrays correctly
  ✓ Operation Model → Edge Cases → casts datetime fields to immutable
  ✓ Operation Model → Edge Cases → scopes handle no matching records
  ✓ Operation Model → Sad Paths → requires id field
  ✓ Operation Model → Sad Paths → requires function field
  ✓ Operation Model → Sad Paths → allows creating operation without explicit status

   PASS  Tests\Unit\Normalizers\ModelNormalizerTest
  ✓ ModelNormalizer → Happy Paths → transforms a model to a document da… 0.01s  
  ✓ ModelNormalizer → Happy Paths → transforms a model with one-to-one…  0.01s  
  ✓ ModelNormalizer → Happy Paths → transforms a model without relationships
  ✓ ModelNormalizer → Happy Paths → transforms a model with multiple it… 0.01s  
  ✓ ModelNormalizer → Happy Paths → transforms a model with nested relationships
  ✓ ModelNormalizer → Happy Paths → transforms a model with mixed cardi… 0.01s  
  ✓ ModelNormalizer → Edge Cases → handles model with null relationship
  ✓ ModelNormalizer → Edge Cases → handles empty relationship collection
  ✓ ModelNormalizer → Edge Cases → handles model with only empty relationships loaded

   FAIL  Tests\Unit\Normalizers\NormalizationResultTest
  ✓ NormalizationResult → Happy Paths → creates normalization result wi… 0.01s  
  ✓ NormalizationResult → Happy Paths → creates normalization result with resource and empty included array
  ✓ NormalizationResult → Happy Paths → creates normalization result with resource and no included array provided
  ✓ NormalizationResult → Happy Paths → merges included resources from multiple normalization results
  ✓ NormalizationResult → Happy Paths → returns included resources as indexed array without keys
  ✓ NormalizationResult → Happy Paths → merges multiple results maintaining all unique resources
  ✓ NormalizationResult → Sad Paths → merges empty array of results returning empty array
  ✓ NormalizationResult → Sad Paths → returns empty indexed array when no included resources exist
  ✓ NormalizationResult → Sad Paths → merges results when all have empty included arrays
  ✓ NormalizationResult → Edge Cases → overwrites earlier resource with same key when merging multiple results
  ✓ NormalizationResult → Edge Cases → handles merging single result with included resources
  ✓ NormalizationResult → Edge Cases → preserves array order when converting included to indexed array
  ✓ NormalizationResult → Edge Cases → handles merging results with mix of empty and populated included arrays
  ✓ NormalizationResult → Edge Cases → handles resource with null relationships field
  ✓ NormalizationResult → Edge Cases → handles resource with null meta field
  ✓ NormalizationResult → Edge Cases → handles included resources with complex nested attributes
  ✓ NormalizationResult → Edge Cases → handles merging large number of results efficiently
  ⨯ NormalizationResult → Edge Cases → handles unicode characters in resource type and id
  ✓ NormalizationResult → Regressions → ensures deduplication keys are preserved during merge to maintain JSON:API compliance
  ✓ NormalizationResult → Regressions → ensures readonly properties prevent modification after construction
  ✓ NormalizationResult → Regressions → ensures getIncludedArray returns new array instance not reference

   PASS  Tests\Unit\Normalizers\ResourceNormalizerTest
  ✓ ResourceNormalizer → Happy Paths → normalizes resource with all fie… 0.01s  
  ✓ ResourceNormalizer → Happy Paths → normalizes collection of resources
  ✓ ResourceNormalizer → Happy Paths → normalizes resource with one-to-many relationships
  ✓ ResourceNormalizer → Happy Paths → normalizes resource with one-to-… 0.01s  
  ✓ ResourceNormalizer → Happy Paths → normalizes resource without relationships
  ✓ ResourceNormalizer → Sad Paths → handles resource with null relationship gracefully
  ✓ ResourceNormalizer → Sad Paths → normalizes resource when relationship data is empty array
  ✓ ResourceNormalizer → Edge Cases → handles empty one-to-many relationships
  ✓ ResourceNormalizer → Edge Cases → handles multiple relationship types simultaneously
  ✓ ResourceNormalizer → Edge Cases → properly wraps singular relationship in array for iteration
  ✓ ResourceNormalizer → Edge Cases → detects relationship cardinality by pluralization
  ✓ ResourceNormalizer → Edge Cases → handles singular relationship name correctly with arr wrap
  ✓ ResourceNormalizer → Edge Cases → differentiates between singular and plural relationship names
  ✓ ResourceNormalizer → Edge Cases → processes relationships with multiple iterations through foreach loop
  ✓ ResourceNormalizer → Edge Cases → correctly assigns one-to-one relationship without array wrapping in output

   PASS  Tests\Unit\Protocols\ForrstProtocolTest
  ✓ ForrstProtocol → Happy Paths → encodes array to JSON string          0.01s  
  ✓ ForrstProtocol → Happy Paths → encodes response to JSON string
  ✓ ForrstProtocol → Happy Paths → decodes JSON string to array
  ✓ ForrstProtocol → Happy Paths → returns correct content type
  ✓ ForrstProtocol → Happy Paths → handles empty array
  ✓ ForrstProtocol → Happy Paths → handles nested arrays
  ✓ ForrstProtocol → Happy Paths → handles null values
  ✓ ForrstProtocol → Happy Paths → handles boolean values
  ✓ ForrstProtocol → Happy Paths → handles numeric values
  ✓ ForrstProtocol → Happy Paths → preserves unicode characters
  ✓ ForrstProtocol → Sad Paths → throws exception on invalid JSON durin… 0.01s  
  ✓ ForrstProtocol → Sad Paths → throws exception on malformed JSON string
  ✓ ForrstProtocol → Edge Cases → handles deeply nested structures       0.01s  
  ✓ ForrstProtocol → Edge Cases → handles array with numeric keys        0.01s  
  ✓ ForrstProtocol → Edge Cases → handles mixed arrays                   0.01s  
  ✓ ForrstProtocol → Edge Cases → handles empty string in decode
  ✓ ForrstProtocol → Edge Cases → encodes preserves order of keys
  ✓ ForrstProtocol → Edge Cases → handles special characters in strings
  ✓ ForrstProtocol → Edge Cases → decodes response JSON string to array
  ✓ ForrstProtocol → Protocol Version → returns correct Forrst protocol version constant

   PASS  Tests\Unit\QueryBuilders\QueryBuilderTest
  ✓ QueryBuilder → Happy Paths → applies fields to the query             0.01s  
  ✓ QueryBuilder → Happy Paths → applies filters to the query
  ✓ QueryBuilder → Happy Paths → applies relationships to the query
  ✓ QueryBuilder → Happy Paths → applies sorts to the query
  ✓ QueryBuilder → Sad Paths → throws an exception for invalid fields
  ✓ QueryBuilder → Sad Paths → throws an exception for invalid filters
  ✓ QueryBuilder → Sad Paths → throws an exception for invalid relationships
  ✓ QueryBuilder → Sad Paths → throws an exception for invalid sorts
  ✓ QueryBuilder → Sad Paths → throws error for invalid filter operator
  ✓ QueryBuilder → Edge Cases → applies all filter operators successfully with dataset "equals"
  ✓ QueryBuilder → Edge Cases → applies all filter operators successfully with dataset "not_equals"
  ✓ QueryBuilder → Edge Cases → applies all filter operators successfully with dataset "greater_than"
  ✓ QueryBuilder → Edge Cases → applies all filter operators successfully with dataset "greater_than_or_equal_to"
  ✓ QueryBuilder → Edge Cases → applies all filter operators successfully with dataset "less_than"
  ✓ QueryBuilder → Edge Cases → applies all filter operators successfully with dataset "less_than_or_equal_to"
  ✓ QueryBuilder → Edge Cases → applies all filter operators successfully with dataset "like"
  ✓ QueryBuilder → Edge Cases → applies all filter operators successfully with dataset "not_like"
  ✓ QueryBuilder → Edge Cases → applies all filter operators successfully with dataset "in"
  ✓ QueryBuilder → Edge Cases → applies all filter operators successful… 0.01s  
  ✓ QueryBuilder → Edge Cases → applies all filter operators successfully with dataset "between"
  ✓ QueryBuilder → Edge Cases → applies all filter operators successfully with dataset "not_between"
  ✓ QueryBuilder → Edge Cases → applies all filter operators successfully with dataset "is_null"
  ✓ QueryBuilder → Edge Cases → applies all filter operators successfully with dataset "is_not_null"
  ✓ QueryBuilder → Edge Cases → applies filter with OR boolean operator
  ✓ QueryBuilder → Edge Cases → handles non-self relationships
  ✓ QueryBuilder → Edge Cases → applies filters to nested relationships with whereHas
  ✓ QueryBuilder → Edge Cases → applies multiple filters to same nested relationship
  ✓ QueryBuilder → Edge Cases → handles relationship fields without explicit relationship loading
  ✓ QueryBuilder → Edge Cases → handles relationship sorts without explicit relationship loading
  ✓ QueryBuilder → Edge Cases → handles nested relationships with existing withs
  ✓ QueryBuilder → Edge Cases → handles filters with missing optional parameters
  ✓ QueryBuilder → Edge Cases → handles empty filter value arrays for in operator
  ✓ QueryBuilder → Edge Cases → forwards method calls to underlying builder
  ✓ QueryBuilder → Edge Cases → handles fields when relationship already created the key (line 308)
  ✓ QueryBuilder → Edge Cases → handles sorts when relationship already created the key (line 339)
  ✓ QueryBuilder → Edge Cases → handles nested relationship when parent relationship exists (line 296)

   FAIL  Tests\Unit\Repositories\DatabaseOperationRepositoryTest
  ⨯ DatabaseOperationRepository → Happy Paths → finds existing operatio… 0.01s  
  ⨯ DatabaseOperationRepository → Happy Paths → saves new operation with default retention
  ⨯ DatabaseOperationRepository → Happy Paths → saves new operation with custom retention
  ⨯ DatabaseOperationRepository → Happy Paths → updates existing operation status and progress
  ⨯ DatabaseOperationRepository → Happy Paths → updates existing operat… 0.01s  
  ⨯ DatabaseOperationRepository → Happy Paths → updates existing operation with errors
  ⨯ DatabaseOperationRepository → Happy Paths → updates existing operation with metadata
  ✓ DatabaseOperationRepository → Happy Paths → deletes operation by id
  ⨯ DatabaseOperationRepository → Happy Paths → lists all operations with default limit
  ✓ DatabaseOperationRepository → Happy Paths → lists operations with status filter
  ⨯ DatabaseOperationRepository → Happy Paths → lists operations with function filter
  ✓ DatabaseOperationRepository → Happy Paths → lists operations with both status and function filters
  ⨯ DatabaseOperationRepository → Happy Paths → lists operations with custom limit
  ⨯ DatabaseOperationRepository → Happy Paths → lists operations with pagination cursor
  ✓ DatabaseOperationRepository → Happy Paths → lists operations ordere… 1.01s  
  ✓ DatabaseOperationRepository → Happy Paths → lists operations for sp… 0.01s  
  ✓ DatabaseOperationRepository → Happy Paths → lists operations for caller with status filter
  ⨯ DatabaseOperationRepository → Happy Paths → lists operations for caller with pagination
  ✓ DatabaseOperationRepository → Happy Paths → cleans up expired operations
  ✓ DatabaseOperationRepository → Edge Cases → returns null for non-existent operation
  ✓ DatabaseOperationRepository → Edge Cases → deleting non-existent operation does not throw error
  ✓ DatabaseOperationRepository → Edge Cases → lists empty result when no operations match filters
  ✓ DatabaseOperationRepository → Edge Cases → lists empty result for caller with no operations
  ✓ DatabaseOperationRepository → Edge Cases → cleanup returns zero when no expired operations exist
  ✓ DatabaseOperationRepository → Edge Cases → handles operations without expires_at during cleanup
  ✓ DatabaseOperationRepository → Edge Cases → handles invalid cursor gracefully
  ✓ DatabaseOperationRepository → Edge Cases → saves operation with all optional fields
  ⨯ DatabaseOperationRepository → Edge Cases → preserves expires_at when updating existing operation
  ⨯ DatabaseOperationRepository → Edge Cases → returns correct next_cursor at exact limit boundary
  ✓ DatabaseOperationRepository → Sad Paths → list with invalid limit uses provided limit

   PASS  Tests\Unit\Repositories\FunctionRepositoryTest
  ✓ FunctionRepository → Happy Paths → registers and retrieves a functi… 0.01s  
  ✓ FunctionRepository → Happy Paths → registers a function using a class string
  ✓ FunctionRepository → Happy Paths → retrieves all registered functions indexed by name@version
  ✓ FunctionRepository → Happy Paths → retrieves all versions for a function
  ✓ FunctionRepository → Version Resolution → resolves exact version
  ✓ FunctionRepository → Version Resolution → resolves latest stable when version is null
  ✓ FunctionRepository → Version Resolution → resolves by stability alias
  ✓ FunctionRepository → Sad Paths → throws exception when function is not found
  ✓ FunctionRepository → Sad Paths → throws exception when exact version is not found
  ✓ FunctionRepository → Sad Paths → throws exception when stability has no matching versions
  ✓ FunctionRepository → Sad Paths → throws exception when registering duplicate name@version
  ✓ FunctionRepository → Sad Paths → throws exception when user function uses reserved namespace
  ✓ FunctionRepository → Reserved Namespace Enforcement → allows system functions to use forrst namespace
  ✓ FunctionRepository → Reserved Namespace Enforcement → blocks user functions from using forrst namespace
  ✓ FunctionRepository → Reserved Namespace Enforcement → exception message contains function name and reserved namespace
  ✓ FunctionRepository → Reserved Namespace Enforcement → allows functions with non-reserved namespaces
  ✓ FunctionRepository → Backwards Compatibility → get() without version resolves to latest stable
  ✓ FunctionRepository → Backwards Compatibility → get() with exact version returns exact match

   PASS  Tests\Unit\Repositories\ResourceRepositoryTest
  ✓ registers and retrieves resource successfully                        0.01s  
  ✓ retrieves all registered resources
  ✓ throws exception when resource not found for model
  ✓ throws exception when registered class does not implement resource interface
  ✓ forget removes specific resource from registry
  ✓ register overwrites existing resource mapping
  ✓ all returns empty array when no resources registered

   PASS  Tests\Unit\Repositories\ServerRepositoryTest
  ✓ ServerRepository → Happy Paths → registers and retrieves a server b… 0.01s  
  ✓ ServerRepository → Happy Paths → registers and retrieves a server by route path
  ✓ ServerRepository → Happy Paths → retrieves all registered servers
  ✓ ServerRepository → Sad Paths → throws an exception when a server is… 0.01s  

   PASS  Tests\Unit\Repositories\VersionResolutionTest
  ✓ Version Resolution → Exact Version Matching → resolves exact stable version
  ✓ Version Resolution → Exact Version Matching → resolves exact stable version 2.0.0
  ✓ Version Resolution → Exact Version Matching → resolves exact beta version
  ✓ Version Resolution → Exact Version Matching → resolves exact alpha version
  ✓ Version Resolution → Exact Version Matching → throws VersionNotFoundException for non-existent version
  ✓ Version Resolution → Stability Alias Resolution → resolves "stable" to latest stable version (2.0.0)
  ✓ Version Resolution → Stability Alias Resolution → resolves "beta" to latest beta version (3.0.0-beta.2)
  ✓ Version Resolution → Stability Alias Resolution → resolves "alpha" to latest alpha version (3.0.0-alpha.1)
  ✓ Version Resolution → Stability Alias Resolution → throws VersionNotFoundException for stability with no matching versions
  ✓ Version Resolution → Default Resolution (null version) → resolves to latest stable when version is null
  ✓ Version Resolution → Default Resolution (null version) → resolves to latest stable ignoring prerelease versions
  ✓ Version Resolution → Version Index → returns all versions for a function
  ✓ Version Resolution → Version Index → returns empty array for non-existent function
  ✓ Version Resolution → Error Details → VersionNotFoundException includes available versions
  ✓ Version Resolution → Error Details → FunctionNotFoundException includes function name
  ✓ Version Resolution → Edge Cases → handles function with only prerelease versions
  ✓ Version Resolution → Edge Cases → handles function with only one version
  ✓ Version Resolution → Edge Cases → all() returns functions indexed by name@version

   PASS  Tests\Unit\Requests\RequestHandlerFinalTest
  ✓ RequestHandler Complete Coverage → Happy Paths → can call a functio… 0.01s  
  ✓ RequestHandler Complete Coverage → Happy Paths → can call a function from a Forrst format string
  ✓ RequestHandler Complete Coverage → Happy Paths → rejects legacy JSON-RPC format (no longer supported)
  ✓ RequestHandler Complete Coverage → Happy Paths → can call a function without arguments
  ✓ RequestHandler Complete Coverage → Method Exception Handling → hand… 0.01s  
  ✓ RequestHandler Complete Coverage → Method Exception Handling → handles authorization exception from method
  ✓ RequestHandler Complete Coverage → Method Exception Handling → handles function not found error
  ✓ RequestHandler Complete Coverage → Batch Requests → batch requests…  0.01s  
  ✓ RequestHandler Complete Coverage → Request ID Requirement → requests without id field return error (id is required in Forrst)
  ✓ RequestHandler Complete Coverage → Request ID Requirement → legacy…  0.01s  
  ✓ RequestHandler Complete Coverage → Parse Errors → handles invalid JSON string
  ✓ RequestHandler Complete Coverage → Parse Errors → handles empty array
  ✓ RequestHandler Complete Coverage → Validation Errors → handles missing protocol field
  ✓ RequestHandler Complete Coverage → Validation Errors → handles missing call field
  ✓ RequestHandler Complete Coverage → Validation Errors → handles missing function in call

   PASS  Tests\Unit\Resources\AbstractDataResourceTest
  ✓ AbstractDataResource → Happy Paths → __construct() → creates resour… 0.01s  
  ✓ AbstractDataResource → Happy Paths → __construct() → creates resource with PostsData object
  ✓ AbstractDataResource → Happy Paths → __construct() → creates resource with CustomEntityData object
  ✓ AbstractDataResource → Happy Paths → __construct() → creates resource with Data object without id property
  ✓ AbstractDataResource → Happy Paths → __construct() → creates resource with minimal Data object
  ✓ AbstractDataResource → Happy Paths → getType() → derives type from UserData class name
  ✓ AbstractDataResource → Happy Paths → getType() → derives singular type from plural PostsData class name
  ✓ AbstractDataResource → Happy Paths → getType() → derives type from compound CustomEntityData class name
  ✓ AbstractDataResource → Happy Paths → getType() → removes Data suffix correctly
  ✓ AbstractDataResource → Happy Paths → getId() → returns integer id as string from UserData
  ✓ AbstractDataResource → Happy Paths → getId() → returns string id from CustomEntityData
  ✓ AbstractDataResource → Happy Paths → getId() → returns id from PostsData
  ✓ AbstractDataResource → Happy Paths → getId() → returns zero as string for Data with id zero
  ✓ AbstractDataResource → Happy Paths → getAttributes() → returns all UserData properties as array
  ✓ AbstractDataResource → Happy Paths → getAttributes() → returns all…  0.01s  
  ✓ AbstractDataResource → Happy Paths → getAttributes() → returns CustomEntityData with array metadata
  ✓ AbstractDataResource → Happy Paths → getAttributes() → returns minimal attributes for simple Data object
  ✓ AbstractDataResource → Happy Paths → getAttributes() → returns correct array structure
  ✓ AbstractDataResource → Happy Paths → getRelations() → returns empty array for UserDataResource
  ✓ AbstractDataResource → Happy Paths → getRelations() → returns empty array for PostsDataResource
  ✓ AbstractDataResource → Happy Paths → getRelations() → returns empty array for CustomEntityDataResource
  ✓ AbstractDataResource → Happy Paths → getRelations() → returns array type
  ✓ AbstractDataResource → Happy Paths → toArray() → returns complete resource structure
  ✓ AbstractDataResource → Happy Paths → toArray() → includes all required keys
  ✓ AbstractDataResource → Edge Cases → getType() → handles Data class where Data is at beginning of name
  ✓ AbstractDataResource → Edge Cases → getId() → returns empty string when Data object has no id property
  ✓ AbstractDataResource → Edge Cases → getId() → handles large integer id values
  ✓ AbstractDataResource → Edge Cases → getId() → handles negative integer id values
  ✓ AbstractDataResource → Edge Cases → getAttributes() → handles Data with empty array metadata
  ✓ AbstractDataResource → Edge Cases → getAttributes() → handles Data with nested array structures
  ✓ AbstractDataResource → Edge Cases → getAttributes() → handles Data with special characters in string values
  ✓ AbstractDataResource → Edge Cases → getAttributes() → handles Data with unicode characters
  ✓ AbstractDataResource → Edge Cases → getAttributes() → handles Data with empty string values
  ✓ AbstractDataResource → Edge Cases → toArray() → handles resource with no id property
  ✓ AbstractDataResource → Edge Cases → toArray() → handles resource with minimal data

   PASS  Tests\Unit\Resources\AbstractModelResourceTest
  ✓ creates resource from model                                          0.01s  
  ✓ gets model class
  ✓ gets model class without override
  ✓ gets fields configuration
  ✓ gets filters configuration
  ✓ gets relationships configuration
  ✓ gets sorts configuration
  ✓ gets attributes without id and relations
  ✓ filters relation from attributes when present
  ✓ does not filter attributes when no matching relations
  ✓ gets model table name
  ✓ gets model type
  ✓ creates query builder with request parameters
  ✓ creates query builder with empty parameters
  ✓ gets loaded relations from model
  ✓ returns empty array when no relations loaded
  ✓ handles resource class name edge cases with data set "standard resource name"
  ✓ handles resource class name edge cases with data set "resource without suffix"
  ✓ handles resource class name edge cases with data set "resource word alone"
  ✓ handles resource class name edge cases with data set "multiple resource words"
  ✓ handles resource class name edge cases with data set "nested resource name"

   PASS  Tests\Unit\Resources\AbstractResourceTest
  ✓ AbstractResource → Happy Paths → getFields() → returns empty array…  0.01s  
  ✓ AbstractResource → Happy Paths → getFields() → can be overridden to return custom fields
  ✓ AbstractResource → Happy Paths → getFields() → is a static method that can be called without instantiation
  ✓ AbstractResource → Happy Paths → getFilters() → returns empty array by default
  ✓ AbstractResource → Happy Paths → getFilters() → can be overridden to return custom filters
  ✓ AbstractResource → Happy Paths → getFilters() → is a static method that can be called without instantiation
  ✓ AbstractResource → Happy Paths → getRelationships() → returns empty array by default
  ✓ AbstractResource → Happy Paths → getRelationships() → can be overridden to return custom relationships
  ✓ AbstractResource → Happy Paths → getRelationships() → is a static method that can be called without instantiation
  ✓ AbstractResource → Happy Paths → getSorts() → returns empty array by default
  ✓ AbstractResource → Happy Paths → getSorts() → can be overridden to return custom sorts
  ✓ AbstractResource → Happy Paths → getSorts() → is a static method that can be called without instantiation
  ✓ AbstractResource → Happy Paths → toArray() → returns standardized resource structure
  ✓ AbstractResource → Happy Paths → toArray() → uses concrete implementation methods
  ✓ AbstractResource → Edge Cases → Static method calls → all default methods return consistent empty arrays
  ✓ AbstractResource → Edge Cases → Static method calls → methods can be called via reflection
  ✓ AbstractResource → Edge Cases → Inheritance behavior → subclasses inherit default implementations
  ✓ AbstractResource → Edge Cases → Inheritance behavior → subclasses can selectively override methods
  ✓ AbstractResource → Edge Cases → Method return types → all methods return arrays even when not overridden
  ✓ AbstractResource → Edge Cases → toArray() with various attribute sc… 0.01s  
  ✓ AbstractResource → Edge Cases → toArray() with various attribute scenarios → handles resource with numeric string id
  ✓ AbstractResource → Edge Cases → toArray() with various attribute scenarios → handles resource with uuid id
  ✓ AbstractResource → Edge Cases → toArray() with various attribute scenarios → handles resource with complex nested attributes
  ✓ AbstractResource → Edge Cases → toArray() with various attribute scenarios → handles resource with special characters in type
  ✓ AbstractResource → Edge Cases → Static method call variations → calling methods multiple times returns consistent results
  ✓ AbstractResource → Edge Cases → Static method call variations → different classes maintain independent static method results
  ✓ AbstractResource → Edge Cases → Static method call variations → mixed static method calls preserve correct values
  ✓ AbstractResource → Sad Paths → Abstract class instantiation → cannot instantiate AbstractResource directly
  ✓ AbstractResource → Regressions → Late static binding consistency → static methods use late static binding correctly across inheritance
  ✓ AbstractResource → Regressions → Late static binding consistency → calling parent method from child returns child implementation
  ✓ AbstractResource → Regressions → Multiple concurrent resource instances → different resource instances maintain separate state
  ✓ AbstractResource → Regressions → Multiple concurrent resource instances → static methods remain consistent when instances exist
  ✓ AbstractResource → Regressions → Empty array returns consistency → default implementations always return empty arrays not null

   PASS  Tests\Unit\Rules\IdentifierTest
  ✓ Identifier Rule → Happy Paths → validates correctly with an integer  0.01s  
  ✓ Identifier Rule → Happy Paths → validates correctly with a string
  ✓ Identifier Rule → Happy Paths → validates correctly with null
  ✓ Identifier Rule → Sad Paths → fails validation for an array
  ✓ Identifier Rule → Sad Paths → fails validation for an object
  ✓ Identifier Rule → Sad Paths → fails validation for a boolean

   PASS  Tests\Unit\Rules\SemanticVersionTest
  ✓ SemanticVersion → Happy Paths → validates basic semantic version st… 0.01s  
  ✓ SemanticVersion → Happy Paths → validates semantic version with non-zero minor version
  ✓ SemanticVersion → Happy Paths → validates semantic version with zero major version
  ✓ SemanticVersion → Happy Paths → validates semantic version with alpha prerelease identifier
  ✓ SemanticVersion → Happy Paths → validates semantic version with numbered beta prerelease
  ✓ SemanticVersion → Happy Paths → validates semantic version with rc prerelease identifier
  ✓ SemanticVersion → Happy Paths → validates semantic version with build metadata
  ✓ SemanticVersion → Happy Paths → validates semantic version with prerelease and build metadata
  ✓ SemanticVersion → Happy Paths → validates semantic version with complex prerelease identifiers
  ✓ SemanticVersion → Happy Paths → validates semantic version with large version numbers
  ✓ SemanticVersion → Happy Paths → isValid returns true for valid semantic version string
  ✓ SemanticVersion → Happy Paths → parse extracts major minor patch components correctly
  ✓ SemanticVersion → Happy Paths → parse extracts prerelease identifier correctly
  ✓ SemanticVersion → Happy Paths → parse extracts build metadata correctly
  ✓ SemanticVersion → Happy Paths → parse extracts both prerelease and build metadata
  ✓ SemanticVersion → Happy Paths → stability returns stable for version without prerelease
  ✓ SemanticVersion → Happy Paths → stability returns alpha for alpha prerelease version
  ✓ SemanticVersion → Happy Paths → stability returns beta for beta prerelease version
  ✓ SemanticVersion → Happy Paths → stability returns rc for release candidate version
  ✓ SemanticVersion → Happy Paths → normalize returns unchanged version for valid semver
  ✓ SemanticVersion → Happy Paths → normalize converts single integer to semver format
  ✓ SemanticVersion → Sad Paths → fails validation for non-string value
  ✓ SemanticVersion → Sad Paths → fails validation for array value
  ✓ SemanticVersion → Sad Paths → fails validation for invalid version string format
  ✓ SemanticVersion → Sad Paths → fails validation for version with only major and minor
  ✓ SemanticVersion → Sad Paths → fails validation for version with leading v prefix
  ✓ SemanticVersion → Sad Paths → fails validation for version with leading zeros in major
  ✓ SemanticVersion → Sad Paths → fails validation for version with leading zeros in minor
  ✓ SemanticVersion → Sad Paths → fails validation for version with lea… 0.01s  
  ✓ SemanticVersion → Sad Paths → fails validation for version with spaces
  ✓ SemanticVersion → Sad Paths → passes validation for empty string due to regex matching behavior
  ✓ SemanticVersion → Sad Paths → isValid returns false for invalid version string
  ✓ SemanticVersion → Sad Paths → isValid returns false for version with leading zeros
  ✓ SemanticVersion → Sad Paths → parse returns null for invalid version string
  ✓ SemanticVersion → Sad Paths → parse returns null for version with leading v
  ✓ SemanticVersion → Sad Paths → stability returns stable for invalid version string
  ✓ SemanticVersion → Sad Paths → normalize returns invalid string unchanged when not integer
  ✓ SemanticVersion → Edge Cases → validates version with zero for all components
  ✓ SemanticVersion → Edge Cases → validates version with very long prerelease identifier
  ✓ SemanticVersion → Edge Cases → validates version with hyphenated prerelease identifier
  ✓ SemanticVersion → Edge Cases → validates version with numeric-only build metadata
  ✓ SemanticVersion → Edge Cases → validates version with alphanumeric build metadata
  ✓ SemanticVersion → Edge Cases → parse handles version with all components at maximum
  ✓ SemanticVersion → Edge Cases → stability returns alpha for unknown prerelease pattern
  ✓ SemanticVersion → Edge Cases → stability incorrectly returns alpha for version with only build metadata
  ✓ SemanticVersion → Edge Cases → normalize handles zero as integer version
  ✓ SemanticVersion → Edge Cases → normalize handles multi-digit integer version
  ✓ SemanticVersion → Edge Cases → isValid handles version with single character prerelease
  ✓ SemanticVersion → Edge Cases → parse handles prerelease starting with number
  ✓ SemanticVersion → Edge Cases → validates version with prerelease containing only numbers
  ✓ SemanticVersion → Edge Cases → fails validation for negative version numbers
  ✓ SemanticVersion → Edge Cases → fails validation for version with only dots
  ✓ SemanticVersion → Edge Cases → fails validation for version with four components

   FAIL  Tests\Unit\Servers\ConfigurationServerTest
  ⨯ ConfigurationServer → creates server from configuration and accesse… 0.02s  
  ⨯ ConfigurationServer → returns configured methods when explicitly defined
  ⨯ ConfigurationServer → returns empty array when methods directory does not exist
  ⨯ ConfigurationServer → auto-discovers method files from configured directory
  ⨯ ConfigurationServer → functions() can be called multiple times
  ⨯ ConfigurationServer → Auto-discovery Pipeline Coverage → executes full transformation pipeline with real method files
  ⨯ ConfigurationServer → Auto-discovery Pipeline Coverage → discovers methods from nested directory structures
  ⨯ ConfigurationServer → Auto-discovery Pipeline Coverage → applies ucfirst correctly during namespace transformation
  ⨯ ConfigurationServer → Auto-discovery Pipeline Coverage → filters out Abstract and Test files during real discovery
  ⨯ ConfigurationServer → Auto-discovery Pipeline Coverage → validates methods implement FunctionInterface during discovery
  ⨯ ConfigurationServer → Auto-discovery Pipeline Coverage → returns discovered methods array correctly
  ⨯ ConfigurationServer → Edge Cases and Error Handling → filters out PHP files that do not contain valid classes
  ⨯ ConfigurationServer → Edge Cases and Error Handling → filters out classes that do not implement FunctionInterface

   PASS  Tests\Unit\Streaming\StreamChunkTest
  ✓ StreamChunk → Happy Paths → creates data chunk with payload          0.01s  
  ✓ StreamChunk → Happy Paths → creates progress chunk with percentage
  ✓ StreamChunk → Happy Paths → creates error chunk marked as final
  ✓ StreamChunk → Happy Paths → creates done chunk marked as final
  ✓ StreamChunk → Happy Paths → formats as SSE with event and data
  ✓ StreamChunk → Happy Paths → formats as SSE with optional id
  ✓ StreamChunk → Happy Paths → progress calculates percentage correctly
  ✓ StreamChunk → Happy Paths → progress rounds percentage
  ✓ StreamChunk → Edge Cases → progress handles zero total gracefully
  ✓ StreamChunk → Edge Cases → progress works without message
  ✓ StreamChunk → Edge Cases → error works without details               0.01s  
  ✓ StreamChunk → Edge Cases → done works without result
  ✓ StreamChunk → Edge Cases → data handles scalar values
  ✓ StreamChunk → Edge Cases → data handles null values
  ✓ StreamChunk → Edge Cases → SSE encodes special characters in JSON
  ✓ StreamChunk → Constants → EVENT_DATA constant is data
  ✓ StreamChunk → Constants → EVENT_PROGRESS constant is progress
  ✓ StreamChunk → Constants → EVENT_ERROR constant is error
  ✓ StreamChunk → Constants → EVENT_DONE constant is done

   PASS  Tests\Unit\Transformers\TransformerTest
  ✓ Transformer → Happy Paths → transforms a model to a document data s… 0.01s  
  ✓ Transformer → Happy Paths → transforms a resource interface to a document data structure
  ✓ Transformer → Happy Paths → transforms a collection to a document data structure
  ✓ Transformer → Happy Paths → transforms a collection of resource interfaces to a document data structure
  ✓ Transformer → Happy Paths → transforms cursor paginated results to…  0.02s  
  ✓ Transformer → Happy Paths → transforms length-aware paginated resul… 0.02s  
  ✓ Transformer → Happy Paths → transforms simply paginated results to…  0.02s  
  ✓ Transformer → Edge Cases → paginate does not include metadata when…  0.01s  
  ✓ Transformer → Edge Cases → simple paginate does not include metadat… 0.01s  
  ✓ Transformer → Edge Cases → cursor paginate does not include metadat… 0.01s  
  ✓ Transformer → Edge Cases → cursor paginate uses custom page size fr… 0.01s  
  ✓ Transformer → Edge Cases → cursor paginate uses cursor from request… 0.01s  
  ✓ Transformer → Edge Cases → paginate uses custom page size from requ… 0.01s  
  ✓ Transformer → Edge Cases → paginate uses page number from request p… 0.01s  
  ✓ Transformer → Edge Cases → simple paginate uses custom page size fr… 0.01s  
  ✓ Transformer → Edge Cases → collection handles empty collection
  ✓ Transformer → Edge Cases → collection handles mixed model and resou… 0.01s  

   PASS  Tests\Unit\UrnTest
  ✓ Urn → extension() → builds extension URN with default vendor         0.01s  
  ✓ Urn → extension() → builds extension URN with custom vendor
  ✓ Urn → function() → builds function URN with default vendor
  ✓ Urn → function() → builds function URN with custom vendor
  ✓ Urn → extensionFunction() → builds extension function URN with default vendor
  ✓ Urn → extensionFunction() → builds extension function URN with custom vendor
  ✓ Urn → parse() → parses extension URN
  ✓ Urn → parse() → parses function URN
  ✓ Urn → parse() → parses extension function URN
  ✓ Urn → parse() → throws for invalid URN format
  ✓ Urn → isValid() → returns true for valid extension URNs
  ✓ Urn → isValid() → returns true for valid function URNs
  ✓ Urn → isValid() → returns false for invalid URNs
  ✓ Urn → isCore() → returns true for cline vendor URNs
  ✓ Urn → isCore() → returns false for non-cline vendor URNs
  ✓ Urn → constants → VENDOR is cline
  ✓ Urn → constants → PROTOCOL is forrst
  ✓ Urn → constants → TYPE_EXTENSION is ext
  ✓ Urn → constants → TYPE_FUNCTION is fn

   PASS  Tests\Unit\Validation\ValidatorTest
  ✓ Validator → validates data successfully                              0.01s  
  ✓ Validator → throws exception on validation failure
  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Http\Controller\FunctionControllerTest > `FunctionControlle…   
  Unable to find JSON: 

[{
    "protocol": {
        "name": "forrst",
        "version": "0.1.0"
    },
    "id": "01KD7JPMYETD20VD11SRGWN5C6",
    "result": null,
    "errors": [
        {
            "code": "INVALID_REQUEST",
            "message": "Invalid request",
            "details": [
                {
                    "status": "400",
                    "source": {
                        "pointer": "/"
                    },
                    "title": "Invalid request",
                    "detail": "Batch requests are not supported. Send requests individually or use HTTP pooling."
                }
            ]
        }
    ],
    "meta": {
        "duration": {
            "value": 0,
            "unit": "millisecond"
        }
    }
}]

within response JSON:

[{
    "protocol": {
        "name": "forrst",
        "version": "0.1.0"
    },
    "id": "01KD7JPMYETD20VD11SRGWN5C6",
    "result": null,
    "errors": [
        {
            "code": "INVALID_REQUEST",
            "message": "Invalid request",
            "details": [
                {
                    "status": "400",
                    "source": {
                        "pointer": "/"
                    },
                    "title": "Batch requests not supported",
                    "detail": "This server does not support batch requests. Send requests individually or use HTTP/2 multiplexing."
                }
            ]
        }
    ],
    "meta": {
        "duration": {
            "value": 0,
            "unit": "millisecond"
        }
    }
}].


Failed asserting that an array has the subset Array &0 [
    'protocol' => Array &1 [
        'name' => 'forrst',
        'version' => '0.1.0',
    ],
    'id' => '01KD7JPMYETD20VD11SRGWN5C6',
    'result' => null,
    'errors' => Array &2 [
        0 => Array &3 [
            'code' => 'INVALID_REQUEST',
            'message' => 'Invalid request',
            'details' => Array &4 [
                0 => Array &5 [
                    'status' => '400',
                    'source' => Array &6 [
                        'pointer' => '/',
                    ],
                    'title' => 'Invalid request',
                    'detail' => 'Batch requests are not supported. Send requests individually or use HTTP pooling.',
                ],
            ],
        ],
    ],
    'meta' => Array &7 [
        'duration' => Array &8 [
            'value' => 0,
            'unit' => 'millisecond',
        ],
    ],
].
             array (
               'pointer' => '/',
             ),
  -          'title' => 'Invalid request',
  -          'detail' => 'Batch requests are not supported. Send requests individually or use HTTP pooling.',
  +          'title' => 'Batch requests not supported',
  +          'detail' => 'This server does not support batch requests. Send requests individually or use HTTP/2 multiplexing.',
           ),
         ),
       ),
  

  at tests/Support/FunctionCaller.php:52
     48▕         if (isset($expected['meta']['duration']['value'], $actual['meta']['duration']['value'])) {
     49▕             $expected['meta']['duration']['value'] = $actual['meta']['duration']['value'];
     50▕         }
     51▕ 
  ➜  52▕         $response->assertJson($expected);
     53▕     }
     54▕ }
     55▕

  1   tests/Http/Controller/FunctionControllerTest.php:73

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Http\Controller\FunctionControllerTest > `FunctionControlle…   
  Unable to find JSON: 

[{
    "protocol": {
        "name": "forrst",
        "version": "0.1.0"
    },
    "id": "01KD7JPN05Z0Y89BB12YFJGT3Y",
    "result": null,
    "errors": [
        {
            "code": "INVALID_REQUEST",
            "message": "Invalid request",
            "details": [
                {
                    "status": "400",
                    "source": {
                        "pointer": "/"
                    },
                    "title": "Invalid request",
                    "detail": "Batch requests are not supported. Send requests individually or use HTTP pooling."
                }
            ]
        }
    ],
    "meta": {
        "duration": {
            "value": 0,
            "unit": "millisecond"
        }
    }
}]

within response JSON:

[{
    "protocol": {
        "name": "forrst",
        "version": "0.1.0"
    },
    "id": "01KD7JPN05Z0Y89BB12YFJGT3Y",
    "result": null,
    "errors": [
        {
            "code": "INVALID_REQUEST",
            "message": "Invalid request",
            "details": [
                {
                    "status": "400",
                    "source": {
                        "pointer": "/"
                    },
                    "title": "Malformed request",
                    "detail": "Request must be a JSON object, not an array."
                }
            ]
        }
    ],
    "meta": {
        "duration": {
            "value": 0,
            "unit": "millisecond"
        }
    }
}].


Failed asserting that an array has the subset Array &0 [
    'protocol' => Array &1 [
        'name' => 'forrst',
        'version' => '0.1.0',
    ],
    'id' => '01KD7JPN05Z0Y89BB12YFJGT3Y',
    'result' => null,
    'errors' => Array &2 [
        0 => Array &3 [
            'code' => 'INVALID_REQUEST',
            'message' => 'Invalid request',
            'details' => Array &4 [
                0 => Array &5 [
                    'status' => '400',
                    'source' => Array &6 [
                        'pointer' => '/',
                    ],
                    'title' => 'Invalid request',
                    'detail' => 'Batch requests are not supported. Send requests individually or use HTTP pooling.',
                ],
            ],
        ],
    ],
    'meta' => Array &7 [
        'duration' => Array &8 [
            'value' => 0,
            'unit' => 'millisecond',
        ],
    ],
].
             array (
               'pointer' => '/',
             ),
  -          'title' => 'Invalid request',
  -          'detail' => 'Batch requests are not supported. Send requests individually or use HTTP pooling.',
  +          'title' => 'Malformed request',
  +          'detail' => 'Request must be a JSON object, not an array.',
           ),
         ),
       ),
  

  at tests/Support/FunctionCaller.php:52
     48▕         if (isset($expected['meta']['duration']['value'], $actual['meta']['duration']['value'])) {
     49▕             $expected['meta']['duration']['value'] = $actual['meta']['duration']['value'];
     50▕         }
     51▕ 
  ➜  52▕         $response->assertJson($expected);
     53▕     }
     54▕ }
     55▕

  1   tests/Http/Controller/FunctionControllerTest.php:206

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Http\Controller\FunctionControllerTest > `FunctionControlle…   
  Unable to find JSON: 

[{
    "protocol": {
        "name": "forrst",
        "version": "0.1.0"
    },
    "id": "01KD7JPN0ADQMREE3HFNQJKH2P",
    "result": null,
    "errors": [
        {
            "code": "INVALID_REQUEST",
            "message": "Invalid request",
            "details": [
                {
                    "status": "400",
                    "source": {
                        "pointer": "/"
                    },
                    "title": "Invalid request",
                    "detail": "Batch requests are not supported. Send requests individually or use HTTP pooling."
                }
            ]
        }
    ],
    "meta": {
        "duration": {
            "value": 0,
            "unit": "millisecond"
        }
    }
}]

within response JSON:

[{
    "protocol": {
        "name": "forrst",
        "version": "0.1.0"
    },
    "id": "01KD7JPN0ADQMREE3HFNQJKH2P",
    "result": null,
    "errors": [
        {
            "code": "INVALID_REQUEST",
            "message": "Invalid request",
            "details": [
                {
                    "status": "400",
                    "source": {
                        "pointer": "/"
                    },
                    "title": "Malformed request",
                    "detail": "Request must be a JSON object, not an array."
                }
            ]
        }
    ],
    "meta": {
        "duration": {
            "value": 0,
            "unit": "millisecond"
        }
    }
}].


Failed asserting that an array has the subset Array &0 [
    'protocol' => Array &1 [
        'name' => 'forrst',
        'version' => '0.1.0',
    ],
    'id' => '01KD7JPN0ADQMREE3HFNQJKH2P',
    'result' => null,
    'errors' => Array &2 [
        0 => Array &3 [
            'code' => 'INVALID_REQUEST',
            'message' => 'Invalid request',
            'details' => Array &4 [
                0 => Array &5 [
                    'status' => '400',
                    'source' => Array &6 [
                        'pointer' => '/',
                    ],
                    'title' => 'Invalid request',
                    'detail' => 'Batch requests are not supported. Send requests individually or use HTTP pooling.',
                ],
            ],
        ],
    ],
    'meta' => Array &7 [
        'duration' => Array &8 [
            'value' => 0,
            'unit' => 'millisecond',
        ],
    ],
].
             array (
               'pointer' => '/',
             ),
  -          'title' => 'Invalid request',
  -          'detail' => 'Batch requests are not supported. Send requests individually or use HTTP pooling.',
  +          'title' => 'Malformed request',
  +          'detail' => 'Request must be a JSON object, not an array.',
           ),
         ),
       ),
  

  at tests/Support/FunctionCaller.php:52
     48▕         if (isset($expected['meta']['duration']['value'], $actual['meta']['duration']['value'])) {
     49▕             $expected['meta']['duration']['value'] = $actual['meta']['duration']['value'];
     50▕         }
     51▕ 
  ➜  52▕         $response->assertJson($expected);
     53▕     }
     54▕ }
     55▕

  1   tests/Http/Controller/FunctionControllerTest.php:210

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Data\ExtensionDataTe…  MutuallyExclusiveFieldsException   
  Cannot have both options and data

  at src/Exceptions/MutuallyExclusiveFieldsException.php:22
     18▕ final class MutuallyExclusiveFieldsException extends ValidationException
     19▕ {
     20▕     public static function forFields(string $field1, string $field2): self
     21▕     {
  ➜  22▕         return new self(sprintf('Cannot have both %s and %s', $field1, $field2));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MutuallyExclusiveFieldsException.php:22
  2   src/Data/ExtensionData.php:74

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Data\ExtensionDataTe…  MutuallyExclusiveFieldsException   
  Cannot have both options and data

  at src/Exceptions/MutuallyExclusiveFieldsException.php:22
     18▕ final class MutuallyExclusiveFieldsException extends ValidationException
     19▕ {
     20▕     public static function forFields(string $field1, string $field2): self
     21▕     {
  ➜  22▕         return new self(sprintf('Cannot have both %s and %s', $field1, $field2));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MutuallyExclusiveFieldsException.php:22
  2   src/Data/ExtensionData.php:74

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Data\ExtensionDataTe…  MutuallyExclusiveFieldsException   
  Cannot have both options and data

  at src/Exceptions/MutuallyExclusiveFieldsException.php:22
     18▕ final class MutuallyExclusiveFieldsException extends ValidationException
     19▕ {
     20▕     public static function forFields(string $field1, string $field2): self
     21▕     {
  ➜  22▕         return new self(sprintf('Cannot have both %s and %s', $field1, $field2));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MutuallyExclusiveFieldsException.php:22
  2   src/Data/ExtensionData.php:74

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Data\ExtensionDataTest > `Extensi…  EmptyFieldException   
  urn cannot be empty

  at src/Exceptions/EmptyFieldException.php:22
     18▕ final class EmptyFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s cannot be empty', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/EmptyFieldException.php:22
  2   src/Data/ExtensionData.php:130

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Data\ExtensionDataTest > `Extensi…  EmptyFieldException   
  urn cannot be empty

  at src/Exceptions/EmptyFieldException.php:22
     18▕ final class EmptyFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s cannot be empty', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/EmptyFieldException.php:22
  2   src/Data/ExtensionData.php:130

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Data\ExtensionDataTest > `…  InvalidFieldValueException   
  Extension urn is invalid: must follow format 'urn:vendor:forrst:ext:name', got: test

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Validation/UrnValidator.php:49

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Data\RequestObjectDataTest > `RequestObjectData` → `Ha…   
  Failed asserting that two strings are identical.
  -'user.create'
  +'urn:cline:forrst:fn:user:create'
  

  at tests/Unit/Data/RequestObjectDataTest.php:40
     36▕                 ->and($request->protocol)->toBeInstanceOf(ProtocolData::class)
     37▕                 ->and($request->protocol->name)->toBe('forrst')
     38▕                 ->and($request->protocol->version)->toBe('0.1.0')
     39▕                 ->and($request->id)->toBe('test-123')
  ➜  40▕                 ->and($request->call->function)->toBe('user.create')
     41▕                 ->and($request->call->version)->toBe('1')
     42▕                 ->and($request->call->arguments)->toBe(['name' => 'John Doe', 'email' => 'john@example.com'])
     43▕                 ->and($request->context)->toBe(['tenant' => 'acme']);
     44▕         });

  1   tests/Unit/Data/RequestObjectDataTest.php:40

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ArgumentDataTest…  InvalidFieldValueException   
  sunset is invalid: Sunset date "2025-06-01" is in the past. Deprecated elements with past sunset dates should be removed.

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Discovery/DeprecatedData.php:278

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ErrorDefiniti…  MissingRequiredFieldException   
  details.type is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Discovery/ErrorDefinitionData.php:243

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ErrorDefinitionD…  InvalidFieldValueException   
  code is invalid: Error code must follow SCREAMING_SNAKE_CASE convention. Got: 'not_found'

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Discovery/ErrorDefinitionData.php:178

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ErrorDefiniti…  MissingRequiredFieldException   
  details.type is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Discovery/ErrorDefinitionData.php:243

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ExamplePairingDataTest > `ExamplePairingData…   
  Expected: params cannot be empty

  To contain: at least one parameter

  at tests/Unit/Discovery/ExamplePairingDataTest.php:119
    115▕             // Arrange & Act & Assert
    116▕             expect(fn (): ExamplePairingData => new ExamplePairingData(
    117▕                 name: 'NoParams',
    118▕                 params: [],
  ➜ 119▕             ))->toThrow(InvalidArgumentException::class, 'at least one parameter');
    120▕         });
    121▕ 
    122▕         test('rejects param missing name key', function (): void {
    123▕             // Arrange & Act & Assert

  1   tests/Unit/Discovery/ExamplePairingDataTest.php:119

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ExamplePairingDataTest > `ExamplePairingData…   
  Expected: params[0].name is required

  To contain: missing required 'name' key

  at tests/Unit/Discovery/ExamplePairingDataTest.php:129
    125▕                 name: 'MissingName',
    126▕                 params: [
    127▕                     ['value' => 123], // Missing 'name'
    128▕                 ],
  ➜ 129▕             ))->toThrow(InvalidArgumentException::class, "missing required 'name' key");
    130▕         });
    131▕ 
    132▕         test('rejects param missing value key', function (): void {
    133▕             // Arrange & Act & Assert

  1   tests/Unit/Discovery/ExamplePairingDataTest.php:129

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ExamplePairingDataTest > `ExamplePairingData…   
  Expected: params[0].value is required

  To contain: missing required 'value' key

  at tests/Unit/Discovery/ExamplePairingDataTest.php:139
    135▕                 name: 'MissingValue',
    136▕                 params: [
    137▕                     ['name' => 'userId'], // Missing 'value'
    138▕                 ],
  ➜ 139▕             ))->toThrow(InvalidArgumentException::class, "missing required 'value' key");
    140▕         });
    141▕ 
    142▕         test('rejects invalid parameter name format with hyphens', function (): void {
    143▕             // Arrange & Act & Assert

  1   tests/Unit/Discovery/ExamplePairingDataTest.php:139

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ExamplePairingDataTest > `ExamplePairingData…   
  Expected: params[0] must be array, got string

  To contain: must be an array

  at tests/Unit/Discovery/ExamplePairingDataTest.php:179
    175▕                 name: 'NonArrayParam',
    176▕                 params: [
    177▕                     'not-an-array',
    178▕                 ],
  ➜ 179▕             ))->toThrow(InvalidArgumentException::class, 'must be an array');
    180▕         });
    181▕ 
    182▕         test('rejects param with non-string name', function (): void {
    183▕             // Arrange & Act & Assert

  1   tests/Unit/Discovery/ExamplePairingDataTest.php:179

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ExamplePairingDataTest > `ExamplePairingData…   
  Expected: params[0].name must be string, got integer

  To contain: must be a string

  at tests/Unit/Discovery/ExamplePairingDataTest.php:189
    185▕                 name: 'NonStringName',
    186▕                 params: [
    187▕                     ['name' => 123, 'value' => 'test'], // Name must be string
    188▕                 ],
  ➜ 189▕             ))->toThrow(InvalidArgumentException::class, 'must be a string');
    190▕         });
    191▕ 
    192▕         test('rejects result missing name key', function (): void {
    193▕             // Arrange & Act & Assert

  1   tests/Unit/Discovery/ExamplePairingDataTest.php:189

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ExamplePairingDataTest > `ExamplePairingData…   
  Expected: result.name is required

  To contain: missing required 'name' key

  at tests/Unit/Discovery/ExamplePairingDataTest.php:198
    194▕             expect(fn (): ExamplePairingData => new ExamplePairingData(
    195▕                 name: 'MissingResultName',
    196▕                 params: [['name' => 'param', 'value' => 1]],
    197▕                 result: ['value' => 'data'], // Missing 'name'
  ➜ 198▕             ))->toThrow(InvalidArgumentException::class, "missing required 'name' key");
    199▕         });
    200▕ 
    201▕         test('rejects result missing value key', function (): void {
    202▕             // Arrange & Act & Assert

  1   tests/Unit/Discovery/ExamplePairingDataTest.php:198

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ExamplePairingDataTest > `ExamplePairingData…   
  Expected: result.value is required

  To contain: missing required 'value' key

  at tests/Unit/Discovery/ExamplePairingDataTest.php:207
    203▕             expect(fn (): ExamplePairingData => new ExamplePairingData(
    204▕                 name: 'MissingResultValue',
    205▕                 params: [['name' => 'param', 'value' => 1]],
    206▕                 result: ['name' => 'result'], // Missing 'value'
  ➜ 207▕             ))->toThrow(InvalidArgumentException::class, "missing required 'value' key");
    208▕         });
    209▕ 
    210▕         test('rejects result with non-string name', function (): void {
    211▕             // Arrange & Act & Assert

  1   tests/Unit/Discovery/ExamplePairingDataTest.php:207

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ExamplePairingDataTest > `ExamplePairingData…   
  Expected: result.name must be string, got integer

  To contain: must be a string

  at tests/Unit/Discovery/ExamplePairingDataTest.php:216
    212▕             expect(fn (): ExamplePairingData => new ExamplePairingData(
    213▕                 name: 'NonStringResultName',
    214▕                 params: [['name' => 'param', 'value' => 1]],
    215▕                 result: ['name' => 123, 'value' => 'data'], // Name must be string
  ➜ 216▕             ))->toThrow(InvalidArgumentException::class, 'must be a string');
    217▕         });
    218▕     });
    219▕ 
    220▕     describe('Edge Cases', function (): void {

  1   tests/Unit/Discovery/ExamplePairingDataTest.php:216

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\FunctionDescriptorDataTest > `Functio…  Error   
  Cannot modify readonly property Cline\Forrst\Discovery\TagData::$name

  at src/Discovery/TagData.php:88
     84▕                 E_USER_WARNING,
     85▕             );
     86▕         }
     87▕ 
  ➜  88▕         $this->name = $trimmedName;
     89▕ 
     90▕         // Validate summary length
     91▕         if ($this->summary === null || mb_strlen($this->summary) <= 60) {
     92▕             return;

  1   src/Discovery/TagData.php:88
  2   tests/Unit/Discovery/FunctionDescriptorDataTest.php:69

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\FunctionDescriptorTest > `FunctionDes…  Error   
  Cannot modify readonly property Cline\Forrst\Discovery\TagData::$name

  at src/Discovery/TagData.php:88
     84▕                 E_USER_WARNING,
     85▕             );
     86▕         }
     87▕ 
  ➜  88▕         $this->name = $trimmedName;
     89▕ 
     90▕         // Validate summary length
     91▕         if ($this->summary === null || mb_strlen($this->summary) <= 60) {
     92▕             return;

  1   src/Discovery/TagData.php:88
  2   src/Discovery/FunctionDescriptor.php:334

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\FunctionDescriptorTest > `FunctionDes…  Error   
  Cannot modify readonly property Cline\Forrst\Discovery\TagData::$name

  at src/Discovery/TagData.php:88
     84▕                 E_USER_WARNING,
     85▕             );
     86▕         }
     87▕ 
  ➜  88▕         $this->name = $trimmedName;
     89▕ 
     90▕         // Validate summary length
     91▕         if ($this->summary === null || mb_strlen($this->summary) <= 60) {
     92▕             return;

  1   src/Discovery/TagData.php:88
  2   src/Discovery/FunctionDescriptor.php:334

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\FunctionDescriptorTest > `FunctionDescriptor…   
  Failed asserting that DateTimeImmutable Object #142533 (
    'date' => '2025-12-31 00:00:00.000000',
    'timezone_type' => 3,
    'timezone' => 'UTC',
) is identical to '2025-12-31'.

  at tests/Unit/Discovery/FunctionDescriptorTest.php:304
    300▕             // Assert
    301▕             $deprecated = $descriptor->getDeprecated();
    302▕             expect($deprecated)->toBeInstanceOf(DeprecatedData::class)
    303▕                 ->and($deprecated->reason)->toBe('Use v2 instead')
  ➜ 304▕                 ->and($deprecated->sunset)->toBe('2025-12-31');
    305▕         });
    306▕ 
    307▕         test('sets side effects', function (): void {
    308▕             // Act

  1   tests/Unit/Discovery/FunctionDescriptorTest.php:304

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\FunctionDescriptorTest > `Fu…  ErrorException   
  Warning: Function name 'urn:app:forrst:fn:users:get' should use dot notation (e.g., 'users.get', 'orders.create')

  at src/Discovery/LinkData.php:90
     86▕         if ($this->function === null || preg_match('/^[a-z][a-z0-9]*(?:\.[a-z][a-z0-9]*)*$/', $this->function)) {
     87▕             return;
     88▕         }
     89▕ 
  ➜  90▕         trigger_error(
     91▕             sprintf("Warning: Function name '%s' should use dot notation (e.g., 'users.get', 'orders.create')", $this->function),
     92▕             E_USER_WARNING,
     93▕         );
     94▕     }

      [2m+5 vendor frames [22m
  6   tests/Unit/Discovery/FunctionDescriptorTest.php:339

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\FunctionDescriptorTest > `FunctionDes…  Error   
  Cannot modify readonly property Cline\Forrst\Discovery\TagData::$name

  at src/Discovery/TagData.php:88
     84▕                 E_USER_WARNING,
     85▕             );
     86▕         }
     87▕ 
  ➜  88▕         $this->name = $trimmedName;
     89▕ 
     90▕         // Validate summary length
     91▕         if ($this->summary === null || mb_strlen($this->summary) <= 60) {
     92▕             return;

  1   src/Discovery/TagData.php:88
  2   src/Discovery/FunctionDescriptor.php:334

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\FunctionDescriptorTest > `FunctionDes…  Error   
  Cannot modify readonly property Cline\Forrst\Discovery\TagData::$name

  at src/Discovery/TagData.php:88
     84▕                 E_USER_WARNING,
     85▕             );
     86▕         }
     87▕ 
  ➜  88▕         $this->name = $trimmedName;
     89▕ 
     90▕         // Validate summary length
     91▕         if ($this->summary === null || mb_strlen($this->summary) <= 60) {
     92▕             return;

  1   src/Discovery/TagData.php:88
  2   src/Discovery/FunctionDescriptor.php:334

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\FunctionDescr…  MissingRequiredFieldException   
  message is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Discovery/SimulationScenarioData.php:177

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\FunctionExtensionsDataT…  EmptyFieldException   
  supported cannot be empty

  at src/Exceptions/EmptyFieldException.php:22
     18▕ final class EmptyFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s cannot be empty', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/EmptyFieldException.php:22
  2   src/Discovery/FunctionExtensionsData.php:129

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\FunctionExtensionsDataT…  EmptyFieldException   
  excluded cannot be empty

  at src/Exceptions/EmptyFieldException.php:22
     18▕ final class EmptyFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s cannot be empty', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/EmptyFieldException.php:22
  2   src/Discovery/FunctionExtensionsData.php:133

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\LinkDataTest > `LinkData` →…   ErrorException   
  Warning: Function name 'urn:cline:forrst:fn:venues:get' should use dot notation (e.g., 'users.get', 'orders.create')

  at src/Discovery/LinkData.php:90
     86▕         if ($this->function === null || preg_match('/^[a-z][a-z0-9]*(?:\.[a-z][a-z0-9]*)*$/', $this->function)) {
     87▕             return;
     88▕         }
     89▕ 
  ➜  90▕         trigger_error(
     91▕             sprintf("Warning: Function name '%s' should use dot notation (e.g., 'users.get', 'orders.create')", $this->function),
     92▕             E_USER_WARNING,
     93▕         );
     94▕     }

  1   tests/Unit/Discovery/LinkDataTest.php:32

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\LinkDataTest > `LinkData` →…   ErrorException   
  Warning: Function name 'order_items.list' should use dot notation (e.g., 'users.get', 'orders.create')

  at src/Discovery/LinkData.php:90
     86▕         if ($this->function === null || preg_match('/^[a-z][a-z0-9]*(?:\.[a-z][a-z0-9]*)*$/', $this->function)) {
     87▕             return;
     88▕         }
     89▕ 
  ➜  90▕         trigger_error(
     91▕             sprintf("Warning: Function name '%s' should use dot notation (e.g., 'users.get', 'orders.create')", $this->function),
     92▕             E_USER_WARNING,
     93▕         );
     94▕     }

  1   tests/Unit/Discovery/LinkDataTest.php:55

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\LinkDataTest > `LinkData` →…   ErrorException   
  Warning: Function name 'urn:cline:forrst:fn:customers:get' should use dot notation (e.g., 'users.get', 'orders.create')

  at src/Discovery/LinkData.php:90
     86▕         if ($this->function === null || preg_match('/^[a-z][a-z0-9]*(?:\.[a-z][a-z0-9]*)*$/', $this->function)) {
     87▕             return;
     88▕         }
     89▕ 
  ➜  90▕         trigger_error(
     91▕             sprintf("Warning: Function name '%s' should use dot notation (e.g., 'users.get', 'orders.create')", $this->function),
     92▕             E_USER_WARNING,
     93▕         );
     94▕     }

  1   tests/Unit/Discovery/LinkDataTest.php:68

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\LinkDataTest > `LinkData` →…   ErrorException   
  Warning: Function name 'urn:cline:forrst:fn:external:function' should use dot notation (e.g., 'users.get', 'orders.create')

  at src/Discovery/LinkData.php:90
     86▕         if ($this->function === null || preg_match('/^[a-z][a-z0-9]*(?:\.[a-z][a-z0-9]*)*$/', $this->function)) {
     87▕             return;
     88▕         }
     89▕ 
  ➜  90▕         trigger_error(
     91▕             sprintf("Warning: Function name '%s' should use dot notation (e.g., 'users.get', 'orders.create')", $this->function),
     92▕             E_USER_WARNING,
     93▕         );
     94▕     }

  1   tests/Unit/Discovery/LinkDataTest.php:98

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\LinkDataTest > `LinkData` →…   ErrorException   
  Warning: Function name 'urn:cline:forrst:fn:stateless:function' should use dot notation (e.g., 'users.get', 'orders.create')

  at src/Discovery/LinkData.php:90
     86▕         if ($this->function === null || preg_match('/^[a-z][a-z0-9]*(?:\.[a-z][a-z0-9]*)*$/', $this->function)) {
     87▕             return;
     88▕         }
     89▕ 
  ➜  90▕         trigger_error(
     91▕             sprintf("Warning: Function name '%s' should use dot notation (e.g., 'users.get', 'orders.create')", $this->function),
     92▕             E_USER_WARNING,
     93▕         );
     94▕     }

  1   tests/Unit/Discovery/LinkDataTest.php:135

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\LinkDataTest > `LinkData` →…   ErrorException   
  Warning: Parameter 'id' uses runtime expression but may have invalid syntax: '$result.data.items[0].id'

  at src/Discovery/LinkData.php:114
    110▕             if (!is_string($paramValue) || !str_starts_with($paramValue, '$') || preg_match('/^\$result\.[a-zA-Z_][a-zA-Z0-9_.]*$/', $paramValue)) {
    111▕                 continue;
    112▕             }
    113▕ 
  ➜ 114▕             trigger_error(
    115▕                 sprintf("Warning: Parameter '%s' uses runtime expression but may have invalid syntax: '%s'", $paramName, $paramValue),
    116▕                 E_USER_WARNING,
    117▕             );
    118▕         }

  1   src/Discovery/LinkData.php:82
  2   tests/Unit/Discovery/LinkDataTest.php:148

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\LinkDataTest > `LinkData` →…   ErrorException   
  Warning: Function name 'urn:cline:forrst:fn:mixed:function' should use dot notation (e.g., 'users.get', 'orders.create')

  at src/Discovery/LinkData.php:90
     86▕         if ($this->function === null || preg_match('/^[a-z][a-z0-9]*(?:\.[a-z][a-z0-9]*)*$/', $this->function)) {
     87▕             return;
     88▕         }
     89▕ 
  ➜  90▕         trigger_error(
     91▕             sprintf("Warning: Function name '%s' should use dot notation (e.g., 'users.get', 'orders.create')", $this->function),
     92▕             E_USER_WARNING,
     93▕         );
     94▕     }

  1   tests/Unit/Discovery/LinkDataTest.php:164

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\LinkDataTest > `L…  InvalidFieldTypeException   
  variables.version must be ServerVariableData, got array

  at src/Exceptions/InvalidFieldTypeException.php:23
     19▕ final class InvalidFieldTypeException extends ValidationException
     20▕ {
     21▕     public static function forField(string $field, string $expectedType, mixed $actualValue): self
     22▕     {
  ➜  23▕         return new self(sprintf(
     24▕             '%s must be %s, got %s',
     25▕             $field,
     26▕             $expectedType,
     27▕             gettype($actualValue),

  1   src/Exceptions/InvalidFieldTypeException.php:23
  2   src/Discovery/DiscoveryServerData.php:175

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ResultDescriptor…  InvalidFieldValueException   
  resource/schema is invalid: Cannot specify both "resource" and "schema". Use resource for resource objects or schema for custom return types, but not both.

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Discovery/ResultDescriptorData.php:59

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ResultDescrip…  MissingRequiredFieldException   
  resource or schema is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Discovery/ResultDescriptorData.php:68

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ResultDescrip…  MissingRequiredFieldException   
  resource or schema is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Discovery/ResultDescriptorData.php:68

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ResultDescrip…  MissingRequiredFieldException   
  resource or schema is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Discovery/ResultDescriptorData.php:68

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ResultDescriptor…  InvalidFieldValueException   
  resource/schema is invalid: Cannot specify both "resource" and "schema". Use resource for resource objects or schema for custom return types, but not both.

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Discovery/ResultDescriptorData.php:59

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ResultDescrip…  MissingRequiredFieldException   
  resource or schema is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Discovery/ResultDescriptorData.php:68

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ResultDescript…  InvalidResultSchemaException   
  Invalid result schema: JSON Schema must include "type" or "$ref" property

  at src/Exceptions/InvalidResultSchemaException.php:22
     18▕ final class InvalidResultSchemaException extends ValidationException
     19▕ {
     20▕     public static function forSchema(string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('Invalid result schema: %s', $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidResultSchemaException.php:22
  2   src/Discovery/ResultDescriptorData.php:96

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ResultDescrip…  MissingRequiredFieldException   
  resource or schema is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Discovery/ResultDescriptorData.php:68

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ResultDescrip…  MissingRequiredFieldException   
  resource or schema is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Discovery/ResultDescriptorData.php:68

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ResultDescrip…  MissingRequiredFieldException   
  resource or schema is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Discovery/ResultDescriptorData.php:68

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ResultDescrip…  MissingRequiredFieldException   
  resource or schema is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Discovery/ResultDescriptorData.php:68

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ServerExtensionD…  InvalidFieldValueException   
  urn is invalid: Invalid extension URN: 'urn:cline:forrst:ext:caching'. Expected format: 'urn:forrst:ext:extensionname' (e.g., 'urn:forrst:ext:async')

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Discovery/ServerExtensionDeclarationData.php:48

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ServerExtensionD…  InvalidFieldValueException   
  urn is invalid: Invalid extension URN: 'urn:vendor:product:forrst:ext:custom-feature'. Expected format: 'urn:forrst:ext:extensionname' (e.g., 'urn:forrst:ext:async')

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Discovery/ServerExtensionDeclarationData.php:48

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ServerVariableDataTest > `ServerVariableData…   
  Expected: enum cannot be empty

  To contain: Enum array cannot be empty

  at tests/Unit/Discovery/ServerVariableDataTest.php:230
    226▕             // Act & Assert
    227▕             expect(fn (): ServerVariableData => new ServerVariableData(
    228▕                 default: 'test',
    229▕                 enum: [],
  ➜ 230▕             ))->toThrow(InvalidArgumentException::class, 'Enum array cannot be empty');
    231▕         });
    232▕ 
    233▕         test('rejects non-string enum values', function (): void {
    234▕             // Act & Assert

  1   tests/Unit/Discovery/ServerVariableDataTest.php:230

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ServerVariableDataTest > `ServerVariableData…   
  Expected: enum[2] must be string, got integer

  To contain: Enum value at index 2 must be string

  at tests/Unit/Discovery/ServerVariableDataTest.php:300
    296▕             // Act & Assert
    297▕             expect(fn (): ServerVariableData => new ServerVariableData(
    298▕                 default: 'test',
    299▕                 enum: ['test', 'valid', 123, 'another'],
  ➜ 300▕             ))->toThrow(InvalidArgumentException::class, 'Enum value at index 2 must be string');
    301▕         });
    302▕ 
    303▕         test('validates enum before checking default is in enum', function (): void {
    304▕             // This test ensures that enum validation happens first

  1   tests/Unit/Discovery/ServerVariableDataTest.php:300

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\ServerVariableDataTest > `ServerVariableData…   
  Expected: enum[0] must be string, got integer

  To contain: Enum value at index 0 must be string

  at tests/Unit/Discovery/ServerVariableDataTest.php:309
    305▕             // Act & Assert
    306▕             expect(fn (): ServerVariableData => new ServerVariableData(
    307▕                 default: 'test',
    308▕                 enum: [123, 'test'],
  ➜ 309▕             ))->toThrow(InvalidArgumentException::class, 'Enum value at index 0 must be string');
    310▕         });
    311▕     });
    312▕ });
    313▕

  1   tests/Unit/Discovery/ServerVariableDataTest.php:309

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\SimulationScenar…  InvalidFieldValueException   
  output/error is invalid: Cannot specify both "output" and "error". Success scenarios use output, error scenarios use error field.

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Discovery/SimulationScenarioData.php:88

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\SimulationScenarioDataT…  EmptyArrayException   
  input cannot be empty

  at src/Exceptions/EmptyArrayException.php:22
     18▕ final class EmptyArrayException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s cannot be empty', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/EmptyArrayException.php:22
  2   src/Discovery/SimulationScenarioData.php:83

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\SimulationScenar…  InvalidFieldValueException   
  error.code is invalid: Error code must be SCREAMING_SNAKE_CASE string

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Discovery/SimulationScenarioData.php:181

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\SimulationScenar…  InvalidFieldValueException   
  error.code is invalid: Error code must be SCREAMING_SNAKE_CASE string

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Discovery/SimulationScenarioData.php:181

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Discovery\SimulationScenarioDataT…  EmptyFieldException   
  name cannot be empty

  at src/Exceptions/EmptyFieldException.php:22
     18▕ final class EmptyFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s cannot be empty', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/EmptyFieldException.php:22
  2   src/Discovery/SimulationScenarioData.php:78

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Exceptions\AbstractRequestExceptionTest > `AbstractReq…   
  Expecting […] not to have key 'details'.

  at tests/Unit/Exceptions/AbstractRequestExceptionTest.php:176
    172▕ 
    173▕             // Assert
    174▕             expect($array)->toHaveKeys(['code', 'message']);
    175▕             // Empty array should be filtered out by array_filter
  ➜ 176▕             expect($array)->not->toHaveKey('details');
    177▕         });
    178▕     });
    179▕ 
    180▕     describe('getStatusCode - Standard Error Codes', function (): void {

  1   tests/Unit/Exceptions/AbstractRequestExceptionTest.php:176

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\AsyncExtensio…  BadMethodCallException   
  Received Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find(), but no expectations were specified

  at src/Extensions/Async/AsyncExtension.php:675
    671▕         for ($attempt = 0; $attempt < $maxAttempts; ++$attempt) {
    672▕             $operationId = 'op_'.bin2hex(random_bytes(self::OPERATION_ID_BYTES));
    673▕ 
    674▕             // Check if ID already exists
  ➜ 675▕             $existing = $this->operations->find($operationId);
    676▕ 
    677▕             if (!$existing instanceof OperationData) {
    678▕                 return $operationId;
    679▕             }

  1   src/Extensions/Async/AsyncExtension.php:675
  2   src/Extensions/Async/AsyncExtension.php:367

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\AsyncExtensio…  BadMethodCallException   
  Received Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find(), but no expectations were specified

  at src/Extensions/Async/AsyncExtension.php:675
    671▕         for ($attempt = 0; $attempt < $maxAttempts; ++$attempt) {
    672▕             $operationId = 'op_'.bin2hex(random_bytes(self::OPERATION_ID_BYTES));
    673▕ 
    674▕             // Check if ID already exists
  ➜ 675▕             $existing = $this->operations->find($operationId);
    676▕ 
    677▕             if (!$existing instanceof OperationData) {
    678▕                 return $operationId;
    679▕             }

  1   src/Extensions/Async/AsyncExtension.php:675
  2   src/Extensions/Async/AsyncExtension.php:367

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\AsyncExtensio…  BadMethodCallException   
  Received Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find(), but no expectations were specified

  at src/Extensions/Async/AsyncExtension.php:675
    671▕         for ($attempt = 0; $attempt < $maxAttempts; ++$attempt) {
    672▕             $operationId = 'op_'.bin2hex(random_bytes(self::OPERATION_ID_BYTES));
    673▕ 
    674▕             // Check if ID already exists
  ➜ 675▕             $existing = $this->operations->find($operationId);
    676▕ 
    677▕             if (!$existing instanceof OperationData) {
    678▕                 return $operationId;
    679▕             }

  1   src/Extensions/Async/AsyncExtension.php:675
  2   src/Extensions/Async/AsyncExtension.php:367

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\AsyncExtensio…  BadMethodCallException   
  Received Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find(), but no expectations were specified

  at src/Extensions/Async/AsyncExtension.php:675
    671▕         for ($attempt = 0; $attempt < $maxAttempts; ++$attempt) {
    672▕             $operationId = 'op_'.bin2hex(random_bytes(self::OPERATION_ID_BYTES));
    673▕ 
    674▕             // Check if ID already exists
  ➜ 675▕             $existing = $this->operations->find($operationId);
    676▕ 
    677▕             if (!$existing instanceof OperationData) {
    678▕                 return $operationId;
    679▕             }

  1   src/Extensions/Async/AsyncExtension.php:675
  2   src/Extensions/Async/AsyncExtension.php:367

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\AsyncExtensio…  BadMethodCallException   
  Received Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find(), but no expectations were specified

  at src/Extensions/Async/AsyncExtension.php:675
    671▕         for ($attempt = 0; $attempt < $maxAttempts; ++$attempt) {
    672▕             $operationId = 'op_'.bin2hex(random_bytes(self::OPERATION_ID_BYTES));
    673▕ 
    674▕             // Check if ID already exists
  ➜ 675▕             $existing = $this->operations->find($operationId);
    676▕ 
    677▕             if (!$existing instanceof OperationData) {
    678▕                 return $operationId;
    679▕             }

  1   src/Extensions/Async/AsyncExtension.php:675
  2   src/Extensions/Async/AsyncExtension.php:367

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\AsyncE…  MissingRequiredFieldException   
  startedAt is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Data/OperationData.php:146

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\AsyncExte…  InvalidFieldValueException   
  operation_id is invalid: Invalid length: expected 27, got 11

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Extensions/Async/AsyncExtension.php:634

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\AsyncExte…  InvalidFieldValueException   
  operation_id is invalid: Invalid length: expected 27, got 11

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Extensions/Async/AsyncExtension.php:634

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\AsyncExte…  InvalidFieldValueException   
  operation_id is invalid: Invalid length: expected 27, got 11

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Extensions/Async/AsyncExtension.php:634

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\AsyncExte…  InvalidFieldValueException   
  operation_id is invalid: Invalid length: expected 27, got 11

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Extensions/Async/AsyncExtension.php:634

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\AsyncE…  MissingRequiredFieldException   
  startedAt is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Data/OperationData.php:146

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\AsyncE…  MissingRequiredFieldException   
  startedAt is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Data/OperationData.php:146

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\AsyncE…  MissingRequiredFieldException   
  startedAt is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Data/OperationData.php:146

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\AsyncExtensio…  BadMethodCallException   
  Received Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find(), but no expectations were specified

  at src/Extensions/Async/AsyncExtension.php:675
    671▕         for ($attempt = 0; $attempt < $maxAttempts; ++$attempt) {
    672▕             $operationId = 'op_'.bin2hex(random_bytes(self::OPERATION_ID_BYTES));
    673▕ 
    674▕             // Check if ID already exists
  ➜ 675▕             $existing = $this->operations->find($operationId);
    676▕ 
    677▕             if (!$existing instanceof OperationData) {
    678▕                 return $operationId;
    679▕             }

  1   src/Extensions/Async/AsyncExtension.php:675
  2   src/Extensions/Async/AsyncExtension.php:367

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\AsyncExtensio…  BadMethodCallException   
  Received Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find(), but no expectations were specified

  at src/Extensions/Async/AsyncExtension.php:675
    671▕         for ($attempt = 0; $attempt < $maxAttempts; ++$attempt) {
    672▕             $operationId = 'op_'.bin2hex(random_bytes(self::OPERATION_ID_BYTES));
    673▕ 
    674▕             // Check if ID already exists
  ➜ 675▕             $existing = $this->operations->find($operationId);
    676▕ 
    677▕             if (!$existing instanceof OperationData) {
    678▕                 return $operationId;
    679▕             }

  1   src/Extensions/Async/AsyncExtension.php:675
  2   src/Extensions/Async/AsyncExtension.php:367

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\AsyncExtensio…  BadMethodCallException   
  Received Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find(), but no expectations were specified

  at src/Extensions/Async/AsyncExtension.php:675
    671▕         for ($attempt = 0; $attempt < $maxAttempts; ++$attempt) {
    672▕             $operationId = 'op_'.bin2hex(random_bytes(self::OPERATION_ID_BYTES));
    673▕ 
    674▕             // Check if ID already exists
  ➜ 675▕             $existing = $this->operations->find($operationId);
    676▕ 
    677▕             if (!$existing instanceof OperationData) {
    678▕                 return $operationId;
    679▕             }

  1   src/Extensions/Async/AsyncExtension.php:675
  2   src/Extensions/Async/AsyncExtension.php:367

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\AsyncE…  MissingRequiredFieldException   
  startedAt is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Data/OperationData.php:146

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\AsyncE…  MissingRequiredFieldException   
  startedAt is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Data/OperationData.php:146

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\AsyncE…  MissingRequiredFieldException   
  startedAt is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Data/OperationData.php:146

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Functions\OperationCancelFunctionTest…   
  Failed asserting that two strings are identical.
  -'Operation ID to cancel'
  +'Unique operation identifier'
  

  at tests/Unit/Extensions/Async/Functions/OperationCancelFunctionTest.php:95
     91▕                 expect($result[0])->toBeInstanceOf(ArgumentData::class)
     92▕                     ->and($result[0]->name)->toBe('operation_id')
     93▕                     ->and($result[0]->schema['type'])->toBe('string')
     94▕                     ->and($result[0]->required)->toBeTrue()
  ➜  95▕                     ->and($result[0]->description)->toBe('Operation ID to cancel');
     96▕             });
     97▕         });
     98▕ 
     99▕         describe('getResult()', function (): void {

  1   tests/Unit/Extensions/Async/Functions/OperationCancelFunctionTest.php:95

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find('op-123', NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationCancelFunction.php:93
     89▕         $retries = 0;
     90▕ 
     91▕         while ($retries < self::MAX_RETRIES) {
     92▕             // Find operation with access control - returns null if not found OR unauthorized
  ➜  93▕             $operation = $this->repository->find($operationId, $userId);
     94▕ 
     95▕             if (!$operation instanceof OperationData) {
     96▕                 $this->logger->warning('Operation not found or unauthorized for cancellation', [
     97▕                     'operation_id' => $operationId,

  1   tests/Unit/Extensions/Async/Functions/OperationCancelFunctionTest.php:217

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find('op-456', NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationCancelFunction.php:93
     89▕         $retries = 0;
     90▕ 
     91▕         while ($retries < self::MAX_RETRIES) {
     92▕             // Find operation with access control - returns null if not found OR unauthorized
  ➜  93▕             $operation = $this->repository->find($operationId, $userId);
     94▕ 
     95▕             if (!$operation instanceof OperationData) {
     96▕                 $this->logger->warning('Operation not found or unauthorized for cancellation', [
     97▕                     'operation_id' => $operationId,

  1   tests/Unit/Extensions/Async/Functions/OperationCancelFunctionTest.php:260

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find('op-789', NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationCancelFunction.php:93
     89▕         $retries = 0;
     90▕ 
     91▕         while ($retries < self::MAX_RETRIES) {
     92▕             // Find operation with access control - returns null if not found OR unauthorized
  ➜  93▕             $operation = $this->repository->find($operationId, $userId);
     94▕ 
     95▕             if (!$operation instanceof OperationData) {
     96▕                 $this->logger->warning('Operation not found or unauthorized for cancellation', [
     97▕                     'operation_id' => $operationId,

  1   tests/Unit/Extensions/Async/Functions/OperationCancelFunctionTest.php:295

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find('op-999', NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationCancelFunction.php:93
     89▕         $retries = 0;
     90▕ 
     91▕         while ($retries < self::MAX_RETRIES) {
     92▕             // Find operation with access control - returns null if not found OR unauthorized
  ➜  93▕             $operation = $this->repository->find($operationId, $userId);
     94▕ 
     95▕             if (!$operation instanceof OperationData) {
     96▕                 $this->logger->warning('Operation not found or unauthorized for cancellation', [
     97▕                     'operation_id' => $operationId,

  1   tests/Unit/Extensions/Async/Functions/OperationCancelFunctionTest.php:328

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find('op-save', NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationCancelFunction.php:93
     89▕         $retries = 0;
     90▕ 
     91▕         while ($retries < self::MAX_RETRIES) {
     92▕             // Find operation with access control - returns null if not found OR unauthorized
  ➜  93▕             $operation = $this->repository->find($operationId, $userId);
     94▕ 
     95▕             if (!$operation instanceof OperationData) {
     96▕                 $this->logger->warning('Operation not found or unauthorized for cancellation', [
     97▕                     'operation_id' => $operationId,

  1   tests/Unit/Extensions/Async/Functions/OperationCancelFunctionTest.php:358

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find('op-123', NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationCancelFunction.php:93
     89▕         $retries = 0;
     90▕ 
     91▕         while ($retries < self::MAX_RETRIES) {
     92▕             // Find operation with access control - returns null if not found OR unauthorized
  ➜  93▕             $operation = $this->repository->find($operationId, $userId);
     94▕ 
     95▕             if (!$operation instanceof OperationData) {
     96▕                 $this->logger->warning('Operation not found or unauthorized for cancellation', [
     97▕                     'operation_id' => $operationId,

  1   tests/Unit/Extensions/Async/Functions/OperationCancelFunctionTest.php:394

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find('op-time', NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationCancelFunction.php:93
     89▕         $retries = 0;
     90▕ 
     91▕         while ($retries < self::MAX_RETRIES) {
     92▕             // Find operation with access control - returns null if not found OR unauthorized
  ➜  93▕             $operation = $this->repository->find($operationId, $userId);
     94▕ 
     95▕             if (!$operation instanceof OperationData) {
     96▕                 $this->logger->warning('Operation not found or unauthorized for cancellation', [
     97▕                     'operation_id' => $operationId,

  1   tests/Unit/Extensions/Async/Functions/OperationCancelFunctionTest.php:429

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Functions\OperationCancelFunctionTest…   
  Failed asserting that an instance of class Cline\Forrst\Exceptions\InvalidFieldValueException is an instance of class Cline\Forrst\Exceptions\OperationNotFoundException.

  at tests/Unit/Extensions/Async/Functions/OperationCancelFunctionTest.php:453
    449▕                 );
    450▕                 $function->setRequest($request);
    451▕ 
    452▕                 // Act & Assert
  ➜ 453▕                 expect(fn (): array => $function())->toThrow(OperationNotFoundException::class);
    454▕             });
    455▕         });
    456▕ 
    457▕         describe('cannot cancel terminal operations', function (): void {

  1   tests/Unit/Extensions/Async/Functions/OperationCancelFunctionTest.php:453

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Functions\OperationCancelFunctionTest…   
  Failed asserting that an instance of class Mockery\Exception\NoMatchingExpectationException is an instance of class Cline\Forrst\Exceptions\OperationCannotCancelException.

  at tests/Unit/Extensions/Async/Functions/OperationCancelFunctionTest.php:481
    477▕                 );
    478▕                 $function->setRequest($request);
    479▕ 
    480▕                 // Act & Assert
  ➜ 481▕                 expect(fn (): array => $function())->toThrow(OperationCannotCancelException::class);
    482▕             });
    483▕ 
    484▕             test('throws OperationException when trying to cancel failed operation', function (): void {
    485▕                 // Arrange

  1   tests/Unit/Extensions/Async/Functions/OperationCancelFunctionTest.php:481

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Functions\OperationCancelFunctionTest…   
  Failed asserting that an instance of class Mockery\Exception\NoMatchingExpectationException is an instance of class Cline\Forrst\Exceptions\OperationCannotCancelException.

  at tests/Unit/Extensions/Async/Functions/OperationCancelFunctionTest.php:507
    503▕                 );
    504▕                 $function->setRequest($request);
    505▕ 
    506▕                 // Act & Assert
  ➜ 507▕                 expect(fn (): array => $function())->toThrow(OperationCannotCancelException::class);
    508▕             });
    509▕ 
    510▕             test('throws OperationException when trying to cancel already cancelled operation', function (): void {
    511▕                 // Arrange

  1   tests/Unit/Extensions/Async/Functions/OperationCancelFunctionTest.php:507

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Functions\OperationCancelFunctionTest…   
  Failed asserting that an instance of class Mockery\Exception\NoMatchingExpectationException is an instance of class Cline\Forrst\Exceptions\OperationCannotCancelException.

  at tests/Unit/Extensions/Async/Functions/OperationCancelFunctionTest.php:532
    528▕                 );
    529▕                 $function->setRequest($request);
    530▕ 
    531▕                 // Act & Assert
  ➜ 532▕                 expect(fn (): array => $function())->toThrow(OperationCannotCancelException::class);
    533▕             });
    534▕         });
    535▕ 
    536▕         describe('repository errors', function (): void {

  1   tests/Unit/Extensions/Async/Functions/OperationCancelFunctionTest.php:532

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Functions\OperationListFunctionTest >…   
  Failed asserting that two strings are identical.
  -'Pagination cursor'
  +'Pagination cursor for retrieving next page'
  

  at tests/Unit/Extensions/Async/Functions/OperationListFunctionTest.php:151
    147▕                 expect($result[3])->toBeInstanceOf(ArgumentData::class)
    148▕                     ->and($result[3]->name)->toBe('cursor')
    149▕                     ->and($result[3]->schema['type'])->toBe('string')
    150▕                     ->and($result[3]->required)->toBeFalse()
  ➜ 151▕                     ->and($result[3]->description)->toBe('Pagination cursor');
    152▕             });
    153▕         });
    154▕ 
    155▕         describe('getResult()', function (): void {

  1   tests/Unit/Extensions/Async/Functions/OperationListFunctionTest.php:151

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Functions\OperationListFunctionTest >…   
  Failed asserting that two strings are identical.
  -'Operation list response'
  +'Paginated operation list response'
  

  at tests/Unit/Extensions/Async/Functions/OperationListFunctionTest.php:172
    168▕                 expect($array)->toHaveKey('schema')
    169▕                     ->and($array['schema'])->toHaveKey('type')
    170▕                     ->and($array['schema']['type'])->toBe('object')
    171▕                     ->and($array)->toHaveKey('description')
  ➜ 172▕                     ->and($array['description'])->toBe('Operation list response');
    173▕             });
    174▕ 
    175▕             test('schema requires operations array', function (): void {
    176▕                 // Arrange

  1   tests/Unit/Extensions/Async/Functions/OperationListFunctionTest.php:172

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Functi…  MissingRequiredFieldException   
  completedAt is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Data/OperationData.php:134

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::list('completed', NULL, 50, NULL, NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationListFunction.php:96
     92▕ 
     93▕         // Get authenticated user for access control - only list their operations
     94▕         $userId = $this->getAuthenticatedUserId();
     95▕ 
  ➜  96▕         $result = $this->repository->list($status, $function, $limit, $cursor, $userId);
     97▕ 
     98▕         $this->logger->debug('Operations listed', [
     99▕             'count' => count($result['operations']),
    100▕             'status_filter' => $status,

  1   tests/Unit/Extensions/Async/Functions/OperationListFunctionTest.php:287

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::list(NULL, 'urn:app:forrst:fn:users:create', 50, NULL, NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationListFunction.php:96
     92▕ 
     93▕         // Get authenticated user for access control - only list their operations
     94▕         $userId = $this->getAuthenticatedUserId();
     95▕ 
  ➜  96▕         $result = $this->repository->list($status, $function, $limit, $cursor, $userId);
     97▕ 
     98▕         $this->logger->debug('Operations listed', [
     99▕             'count' => count($result['operations']),
    100▕             'status_filter' => $status,

  1   tests/Unit/Extensions/Async/Functions/OperationListFunctionTest.php:309

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::list(NULL, NULL, 25, NULL, NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationListFunction.php:96
     92▕ 
     93▕         // Get authenticated user for access control - only list their operations
     94▕         $userId = $this->getAuthenticatedUserId();
     95▕ 
  ➜  96▕         $result = $this->repository->list($status, $function, $limit, $cursor, $userId);
     97▕ 
     98▕         $this->logger->debug('Operations listed', [
     99▕             'count' => count($result['operations']),
    100▕             'status_filter' => $status,

  1   tests/Unit/Extensions/Async/Functions/OperationListFunctionTest.php:331

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::list(NULL, NULL, 50, NULL, NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationListFunction.php:96
     92▕ 
     93▕         // Get authenticated user for access control - only list their operations
     94▕         $userId = $this->getAuthenticatedUserId();
     95▕ 
  ➜  96▕         $result = $this->repository->list($status, $function, $limit, $cursor, $userId);
     97▕ 
     98▕         $this->logger->debug('Operations listed', [
     99▕             'count' => count($result['operations']),
    100▕             'status_filter' => $status,

  1   tests/Unit/Extensions/Async/Functions/OperationListFunctionTest.php:350

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::list(NULL, NULL, 50, 'cursor-abc123', NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationListFunction.php:96
     92▕ 
     93▕         // Get authenticated user for access control - only list their operations
     94▕         $userId = $this->getAuthenticatedUserId();
     95▕ 
  ➜  96▕         $result = $this->repository->list($status, $function, $limit, $cursor, $userId);
     97▕ 
     98▕         $this->logger->debug('Operations listed', [
     99▕             'count' => count($result['operations']),
    100▕             'status_filter' => $status,

  1   tests/Unit/Extensions/Async/Functions/OperationListFunctionTest.php:372

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::list('processing', 'data.export', 10, 'cursor-123', NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationListFunction.php:96
     92▕ 
     93▕         // Get authenticated user for access control - only list their operations
     94▕         $userId = $this->getAuthenticatedUserId();
     95▕ 
  ➜  96▕         $result = $this->repository->list($status, $function, $limit, $cursor, $userId);
     97▕ 
     98▕         $this->logger->debug('Operations listed', [
     99▕             'count' => count($result['operations']),
    100▕             'status_filter' => $status,

  1   tests/Unit/Extensions/Async/Functions/OperationListFunctionTest.php:444

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::list(NULL, NULL, 1, NULL, NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationListFunction.php:96
     92▕ 
     93▕         // Get authenticated user for access control - only list their operations
     94▕         $userId = $this->getAuthenticatedUserId();
     95▕ 
  ➜  96▕         $result = $this->repository->list($status, $function, $limit, $cursor, $userId);
     97▕ 
     98▕         $this->logger->debug('Operations listed', [
     99▕             'count' => count($result['operations']),
    100▕             'status_filter' => $status,

  1   tests/Unit/Extensions/Async/Functions/OperationListFunctionTest.php:539

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::list(NULL, NULL, 50, NULL, NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationListFunction.php:96
     92▕ 
     93▕         // Get authenticated user for access control - only list their operations
     94▕         $userId = $this->getAuthenticatedUserId();
     95▕ 
  ➜  96▕         $result = $this->repository->list($status, $function, $limit, $cursor, $userId);
     97▕ 
     98▕         $this->logger->debug('Operations listed', [
     99▕             'count' => count($result['operations']),
    100▕             'status_filter' => $status,

  1   tests/Unit/Extensions/Async/Functions/OperationListFunctionTest.php:561

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Functions\OperationStatusFunctionTest…   
  Failed asserting that two strings are identical.
  -'Operation ID to check'
  +'Unique operation identifier'
  

  at tests/Unit/Extensions/Async/Functions/OperationStatusFunctionTest.php:96
     92▕                 expect($result[0])->toBeInstanceOf(ArgumentData::class)
     93▕                     ->and($result[0]->name)->toBe('operation_id')
     94▕                     ->and($result[0]->schema['type'])->toBe('string')
     95▕                     ->and($result[0]->required)->toBeTrue()
  ➜  96▕                     ->and($result[0]->description)->toBe('Operation ID to check');
     97▕             });
     98▕         });
     99▕ 
    100▕         describe('getResult()', function (): void {

  1   tests/Unit/Extensions/Async/Functions/OperationStatusFunctionTest.php:96

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find('op-123', NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationStatusFunction.php:76
     72▕         // Get authenticated user for access control
     73▕         $userId = $this->getAuthenticatedUserId();
     74▕ 
     75▕         // Find operation with access control - returns null if not found OR unauthorized
  ➜  76▕         $operation = $this->repository->find($operationId, $userId);
     77▕ 
     78▕         if (!$operation instanceof OperationData) {
     79▕             $this->logger->warning('Operation not found or unauthorized', [
     80▕                 'operation_id' => $operationId,

  1   tests/Unit/Extensions/Async/Functions/OperationStatusFunctionTest.php:200

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find('op-456', NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationStatusFunction.php:76
     72▕         // Get authenticated user for access control
     73▕         $userId = $this->getAuthenticatedUserId();
     74▕ 
     75▕         // Find operation with access control - returns null if not found OR unauthorized
  ➜  76▕         $operation = $this->repository->find($operationId, $userId);
     77▕ 
     78▕         if (!$operation instanceof OperationData) {
     79▕             $this->logger->warning('Operation not found or unauthorized', [
     80▕                 'operation_id' => $operationId,

  1   tests/Unit/Extensions/Async/Functions/OperationStatusFunctionTest.php:234

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find('op-789', NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationStatusFunction.php:76
     72▕         // Get authenticated user for access control
     73▕         $userId = $this->getAuthenticatedUserId();
     74▕ 
     75▕         // Find operation with access control - returns null if not found OR unauthorized
  ➜  76▕         $operation = $this->repository->find($operationId, $userId);
     77▕ 
     78▕         if (!$operation instanceof OperationData) {
     79▕             $this->logger->warning('Operation not found or unauthorized', [
     80▕                 'operation_id' => $operationId,

  1   tests/Unit/Extensions/Async/Functions/OperationStatusFunctionTest.php:266

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find('op-999', NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationStatusFunction.php:76
     72▕         // Get authenticated user for access control
     73▕         $userId = $this->getAuthenticatedUserId();
     74▕ 
     75▕         // Find operation with access control - returns null if not found OR unauthorized
  ➜  76▕         $operation = $this->repository->find($operationId, $userId);
     77▕ 
     78▕         if (!$operation instanceof OperationData) {
     79▕             $this->logger->warning('Operation not found or unauthorized', [
     80▕                 'operation_id' => $operationId,

  1   tests/Unit/Extensions/Async/Functions/OperationStatusFunctionTest.php:305

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find('op-111', NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationStatusFunction.php:76
     72▕         // Get authenticated user for access control
     73▕         $userId = $this->getAuthenticatedUserId();
     74▕ 
     75▕         // Find operation with access control - returns null if not found OR unauthorized
  ➜  76▕         $operation = $this->repository->find($operationId, $userId);
     77▕ 
     78▕         if (!$operation instanceof OperationData) {
     79▕             $this->logger->warning('Operation not found or unauthorized', [
     80▕                 'operation_id' => $operationId,

  1   tests/Unit/Extensions/Async/Functions/OperationStatusFunctionTest.php:338

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find('op-min', NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationStatusFunction.php:76
     72▕         // Get authenticated user for access control
     73▕         $userId = $this->getAuthenticatedUserId();
     74▕ 
     75▕         // Find operation with access control - returns null if not found OR unauthorized
  ➜  76▕         $operation = $this->repository->find($operationId, $userId);
     77▕ 
     78▕         if (!$operation instanceof OperationData) {
     79▕             $this->logger->warning('Operation not found or unauthorized', [
     80▕                 'operation_id' => $operationId,

  1   tests/Unit/Extensions/Async/Functions/OperationStatusFunctionTest.php:369

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Funct…  NoMatchingExpectationException   
  No matching handler found for Mockery_5_Cline_Forrst_Contracts_OperationRepositoryInterface::find('op-full', NULL). Either the method was unexpected or its arguments matched no expected argument list for this method

  at src/Extensions/Async/Functions/OperationStatusFunction.php:76
     72▕         // Get authenticated user for access control
     73▕         $userId = $this->getAuthenticatedUserId();
     74▕ 
     75▕         // Find operation with access control - returns null if not found OR unauthorized
  ➜  76▕         $operation = $this->repository->find($operationId, $userId);
     77▕ 
     78▕         if (!$operation instanceof OperationData) {
     79▕             $this->logger->warning('Operation not found or unauthorized', [
     80▕                 'operation_id' => $operationId,

  1   tests/Unit/Extensions/Async/Functions/OperationStatusFunctionTest.php:406

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Functions\OperationStatusFunctionTest…   
  Failed asserting that an instance of class Cline\Forrst\Exceptions\InvalidFieldValueException is an instance of class Cline\Forrst\Exceptions\OperationNotFoundException.

  at tests/Unit/Extensions/Async/Functions/OperationStatusFunctionTest.php:435
    431▕                 );
    432▕                 $function->setRequest($request);
    433▕ 
    434▕                 // Act & Assert
  ➜ 435▕                 expect(fn (): array => $function())->toThrow(OperationNotFoundException::class);
    436▕             });
    437▕ 
    438▕             test('exception message includes operation ID', function (): void {
    439▕                 // Arrange

  1   tests/Unit/Extensions/Async/Functions/OperationStatusFunctionTest.php:435

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Async\Functions…  InvalidFieldValueException   
  operation_id is invalid: Operation ID must be a valid UUID, ULID, or prefixed format (op_/op- followed by alphanumeric)

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Extensions/Async/Functions/OperationStatusFunction.php:131

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\AtomicLockExtensionT…  InvalidCountException   
  Method forget(<Any Arguments>) from Mockery_7_Illuminate_Cache_CacheManager should be called
 exactly 3 times but called 0 times.

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\CachingExtensio…  InvalidFieldValueException   
  Extension urn is invalid: must follow format 'urn:vendor:forrst:ext:name', got: urn:custom:ext

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Validation/UrnValidator.php:49

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\CachingExtensionTest > `CachingExtension` →…   
  Expected: forrst_cache:urn_cline_forrst_fn_test_function:1:e43abcf3375244839c012f9633f95862d232a95b00d5bc7348b3098b9fed7f32

  To contain: urn:cline:forrst:fn:test:function

  at tests/Unit/Extensions/CachingExtensionTest.php:281
    277▕             $cacheKey = $extension->buildCacheKey($request);
    278▕ 
    279▕             // Assert
    280▕             expect($cacheKey)->toContain('forrst_cache')
  ➜ 281▕                 ->and($cacheKey)->toContain('urn:cline:forrst:fn:test:function')
    282▕                 ->and($cacheKey)->toContain('1');
    283▕         });
    284▕ 
    285▕         test('buildCacheKey creates different keys for different arguments', function (): void {

  1   tests/Unit/Extensions/CachingExtensionTest.php:281

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\CancellationExtensionTest > `CancellationEx…   
  Failed asserting that false is true.

  at tests/Unit/Extensions/CancellationExtensionTest.php:619
    615▕             // Act
    616▕             $extension->onRequestValidated($event);
    617▕ 
    618▕             // Assert
  ➜ 619▕             expect($extension->isActive($specialToken))->toBeTrue()
    620▕                 ->and($extension->cancel($specialToken))->toBeTrue()
    621▕                 ->and($extension->isCancelled($specialToken))->toBeTrue();
    622▕         });
    623▕

  1   tests/Unit/Extensions/CancellationExtensionTest.php:619

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\CancellationExtensionTest > `CancellationEx…   
  Failed asserting that false is true.

  at tests/Unit/Extensions/CancellationExtensionTest.php:642
    638▕             // Act
    639▕             $extension->onRequestValidated($event);
    640▕ 
    641▕             // Assert
  ➜ 642▕             expect($extension->isActive($longToken))->toBeTrue()
    643▕                 ->and($extension->cancel($longToken))->toBeTrue()
    644▕                 ->and($extension->isCancelled($longToken))->toBeTrue();
    645▕         });
    646▕

  1   tests/Unit/Extensions/CancellationExtensionTest.php:642

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\DeadlineExtensio…  DeadlineExceededException   
  Deadline cannot exceed 1 hour from now

  at src/Exceptions/DeadlineExceededException.php:22
     18▕ final class DeadlineExceededException extends ValidationException
     19▕ {
     20▕     public static function exceedsMaximum(string $maximum): self
     21▕     {
  ➜  22▕         return new self(sprintf('Deadline cannot exceed %s from now', $maximum));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/DeadlineExceededException.php:22
  2   src/Extensions/DeadlineExtension.php:281

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\DeadlineExtensio…  DeadlineExceededException   
  Deadline cannot exceed 1 hour from now

  at src/Exceptions/DeadlineExceededException.php:22
     18▕ final class DeadlineExceededException extends ValidationException
     19▕ {
     20▕     public static function exceedsMaximum(string $maximum): self
     21▕     {
  ➜  22▕         return new self(sprintf('Deadline cannot exceed %s from now', $maximum));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/DeadlineExceededException.php:22
  2   src/Extensions/DeadlineExtension.php:281

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\DeadlineExtensi…  InvalidFieldValueException   
  Extension urn is invalid: must follow format 'urn:vendor:forrst:ext:name', got: urn:custom:ext

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Validation/UrnValidator.php:49

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\DeprecationExtensionTest > `DeprecationExte…   
  Failed asserting that two variables reference the same object.

  at tests/Unit/Extensions/DeprecationExtensionTest.php:182
    178▕             $extension->onFunctionExecuted($event);
    179▕             $result = $event->getResponse();
    180▕ 
    181▕             // Assert
  ➜ 182▕             expect($result)->toBe($response);
    183▕         });
    184▕ 
    185▕         test('afterExecute includes all warning fields', function (): void {
    186▕             // Arrange

  1   tests/Unit/Extensions/DeprecationExtensionTest.php:182

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\DeprecationExtensionTest >…   ErrorException   
  Trying to access array offset on null

  at tests/Unit/Extensions/DeprecationExtensionTest.php:241
    237▕             $extension->onFunctionExecuted($event);
    238▕             $result = $event->getResponse();
    239▕ 
    240▕             // Assert
  ➜ 241▕             $warning = $result->extensions[0]->data['warnings'][0];
    242▕             expect($warning['replacement']['function'])->toBe('new.function')
    243▕                 ->and($warning['replacement']['version'])->toBe('2');
    244▕         });
    245▕

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\DeprecationExtensionTest > `DeprecationExte…   
  Failed asserting that two strings are identical.
  -'test.function@1'
  +'urn:cline:forrst:fn:test:function@1'
  

  at tests/Unit/Extensions/DeprecationExtensionTest.php:275
    271▕ 
    272▕             // Assert
    273▕             expect($result->extensions)->toHaveCount(1)
    274▕                 ->and($result->extensions[0]->data['warnings'][0]['type'])->toBe(DeprecationExtension::TYPE_VERSION)
  ➜ 275▕                 ->and($result->extensions[0]->data['warnings'][0]['target'])->toBe('test.function@1');
    276▕         });
    277▕ 
    278▕         test('afterExecute preserves response data', function (): void {
    279▕             // Arrange

  1   tests/Unit/Extensions/DeprecationExtensionTest.php:275

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\DeprecationExtensionTest >…   ErrorException   
  Trying to access array offset on null

  at tests/Unit/Extensions/DeprecationExtensionTest.php:367
    363▕             $extension->onFunctionExecuted($event);
    364▕             $result = $event->getResponse();
    365▕ 
    366▕             // Assert
  ➜ 367▕             $warning = $result->extensions[0]->data['warnings'][0];
    368▕             expect($warning['replacement']['function'])->toBe('new.function')
    369▕                 ->and($warning['replacement'])->not->toHaveKey('version');
    370▕         });
    371▕

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\DeprecationExte…  InvalidFieldValueException   
  Extension urn is invalid: must follow format 'urn:vendor:forrst:ext:name', got: urn:custom:ext

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Validation/UrnValidator.php:49

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Discovery\DescribeFunctionTest > `DescribeF…   
  Failed asserting that the string value matches its snapshot (tests/.pest/snapshots/Unit/Extensions/Discovery/DescribeFunctionTest/_DescribeFunction__→__Snapshot_Tests__→_health_descriptor_matches_snapshot.snap).
Failed asserting that two strings are identical.
           {
               "name": "component",
               "schema": {
  -                "type": "string"
  +                "type": "string",
  +                "description": "Specific component to check. Use \"self\" for basic server ping without running component checks."
               },
               "required": false,
               "summary": null,
  -            "description": "Check specific component only",
  +            "description": "Check specific component only (use \"self\" for basic ping)",
               "default": null,
               "deprecated": null,
               "examples": null
  

  at tests/Unit/Extensions/Discovery/DescribeFunctionTest.php:644
    640▕                     'arguments' => ['function' => FunctionUrn::Health->value],
    641▕                 ],
    642▕             ]));
    643▕ 
  ➜ 644▕             expect($response->json())->toMatchSnapshot();
    645▕         });
    646▕ 
    647▕         test('cancel descriptor matches snapshot', function (): void {
    648▕             $response = $this->call('POST', '/rpc', [], [], [], [], json_encode([

  1   tests/Unit/Extensions/Discovery/DescribeFunctionTest.php:644

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Discovery\DescribeFunctionTest > `DescribeF…   
  Failed asserting that the string value matches its snapshot (tests/.pest/snapshots/Unit/Extensions/Discovery/DescribeFunctionTest/_DescribeFunction__→__Snapshot_Tests__→_lock_status_descriptor_matches_snapshot.snap).
Failed asserting that two strings are identical.
           {
               "name": "key",
               "schema": {
  -                "type": "string"
  +                "type": "string",
  +                "minLength": 1,
  +                "maxLength": 200,
  +                "pattern": "^[a-zA-Z0-9\\-_:.]+$"
               },
               "required": true,
               "summary": null,
  -            "description": "Lock key (with scope prefix if applicable)",
  +            "description": "Lock key (with scope prefix if applicable). Must contain only alphanumeric characters, dash, underscore, colon, and dot.",
               "default": null,
               "deprecated": null,
               "examples": null
  @@ @@
           {
               "code": "RATE_LIMITED",
               "message": "Rate limited"
  +        },
  +        {
  +            "code": "INVALID_ARGUMENTS",
  +            "message": "Invalid or missing key",
  +            "description": "The lock key is required and must be a non-empty string",
  +            "details": null
           }
       ]
   }'
  

  at tests/Unit/Extensions/Discovery/DescribeFunctionTest.php:696
    692▕                     'arguments' => ['function' => FunctionUrn::LocksStatus->value],
    693▕                 ],
    694▕             ]));
    695▕ 
  ➜ 696▕             expect($response->json())->toMatchSnapshot();
    697▕         });
    698▕ 
    699▕         test('lock release descriptor matches snapshot', function (): void {
    700▕             $response = $this->call('POST', '/rpc', [], [], [], [], json_encode([

  1   tests/Unit/Extensions/Discovery/DescribeFunctionTest.php:696

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Discovery\DescribeFunctionTest > `DescribeF…   
  Failed asserting that the string value matches its snapshot (tests/.pest/snapshots/Unit/Extensions/Discovery/DescribeFunctionTest/_DescribeFunction__→__Snapshot_Tests__→_lock_release_descriptor_matches_snapshot.snap).
Failed asserting that two strings are identical.
           {
               "name": "key",
               "schema": {
  -                "type": "string"
  +                "type": "string",
  +                "minLength": 1,
  +                "maxLength": 200,
  +                "pattern": "^[a-zA-Z0-9\\-_:.]+$"
               },
               "required": true,
               "summary": null,
  -            "description": "Lock key (with scope prefix if applicable)",
  +            "description": "Lock key (with scope prefix if applicable). Must contain only alphanumeric characters, dash, underscore, colon, and dot.",
               "default": null,
               "deprecated": null,
               "examples": null
  @@ @@
           {
               "name": "owner",
               "schema": {
  -                "type": "string"
  +                "type": "string",
  +                "minLength": 1,
  +                "format": "uuid"
               },
               "required": true,
               "summary": null,
  -            "description": "Owner token from lock acquisition",
  +            "description": "Owner token from lock acquisition (UUID format)",
               "default": null,
               "deprecated": null,
               "examples": null
  

  at tests/Unit/Extensions/Discovery/DescribeFunctionTest.php:709
    705▕                     'arguments' => ['function' => FunctionUrn::LocksRelease->value],
    706▕                 ],
    707▕             ]));
    708▕ 
  ➜ 709▕             expect($response->json())->toMatchSnapshot();
    710▕         });
    711▕ 
    712▕         test('lock force release descriptor matches snapshot', function (): void {
    713▕             $response = $this->call('POST', '/rpc', [], [], [], [], json_encode([

  1   tests/Unit/Extensions/Discovery/DescribeFunctionTest.php:709

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Discovery\DescribeFunctionTest > `DescribeF…   
  Failed asserting that the string value matches its snapshot (tests/.pest/snapshots/Unit/Extensions/Discovery/DescribeFunctionTest/_DescribeFunction__→__Snapshot_Tests__→_lock_force_release_descriptor_matches_snapshot.snap).
Failed asserting that two strings are identical.
       "name": "urn:cline:forrst:ext:atomic-lock:fn:force-release",
       "version": "1.0.0",
       "stability": "stable",
  -    "summary": "Force release a lock without ownership check (admin)",
  +    "summary": "Force release a lock without ownership check (admin only)",
  +    "description": "Administratively releases a lock without verifying ownership. This is a privileged operation that should be restricted to administrative users or automated cleanup processes. Regular applications should use forrst.locks.release instead. WARNING: Improper use can cause data corruption in critical sections.",
       "arguments": [
           {
               "name": "key",
               "schema": {
  -                "type": "string"
  +                "type": "string",
  +                "minLength": 1,
  +                "maxLength": 200,
  +                "pattern": "^[a-zA-Z0-9\\-_:.]+$"
               },
               "required": true,
               "summary": null,
  -            "description": "Lock key (with scope prefix if applicable)",
  +            "description": "Full lock key including scope prefix (e.g., \"forrst_lock:function_name:my_key\"). Must contain only alphanumeric characters, dash, underscore, colon, and dot.",
               "default": null,
               "deprecated": null,
               "examples": null
  @@ @@
                   },
                   "key": {
                       "type": "string",
  -                    "description": "The lock key"
  +                    "description": "The lock key that was released"
                   },
                   "forced": {
                       "type": "boolean",
  -                    "description": "Always true for force release"
  +                    "description": "Always true for force release operations"
                   }
               },
               "required": [
  @@ @@
           {
               "code": "LOCK_NOT_FOUND",
               "message": "Lock does not exist",
  -            "description": "The specified lock does not exist",
  +            "description": "The specified lock does not exist or has already been released",
  +            "details": null
  +        },
  +        {
  +            "code": "UNAUTHORIZED",
  +            "message": "Unauthorized",
  +            "description": "Force release requires administrative privileges",
               "details": null
           }
       ]
   }'
  

  at tests/Unit/Extensions/Discovery/DescribeFunctionTest.php:722
    718▕                     'arguments' => ['function' => FunctionUrn::LocksForceRelease->value],
    719▕                 ],
    720▕             ]));
    721▕ 
  ➜ 722▕             expect($response->json())->toMatchSnapshot();
    723▕         });
    724▕ 
    725▕         test('operation status descriptor matches snapshot', function (): void {
    726▕             $response = $this->call('POST', '/rpc', [], [], [], [], json_encode([

  1   tests/Unit/Extensions/Discovery/DescribeFunctionTest.php:722

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Discovery\DescribeFunctionTest > `DescribeF…   
  Failed asserting that the string value matches its snapshot (tests/.pest/snapshots/Unit/Extensions/Discovery/DescribeFunctionTest/_DescribeFunction__→__Snapshot_Tests__→_operation_status_descriptor_matches_snapshot.snap).
Failed asserting that two strings are identical.
           {
               "name": "operation_id",
               "schema": {
  -                "type": "string"
  +                "type": "string",
  +                "pattern": "^op_[a-f0-9]{24}$",
  +                "minLength": 27,
  +                "maxLength": 27,
  +                "description": "Operation identifier (format: op_ followed by 24 hex characters)"
               },
               "required": true,
               "summary": null,
  -            "description": "Operation ID to check",
  +            "description": "Unique operation identifier",
               "default": null,
               "deprecated": null,
               "examples": null
  @@ @@
                   },
                   "progress": {
                       "type": "number",
  +                    "minimum": 0,
  +                    "maximum": 1,
                       "description": "Progress percentage (0-1)"
                   },
                   "result": {
  

  at tests/Unit/Extensions/Discovery/DescribeFunctionTest.php:735
    731▕                     'arguments' => ['function' => FunctionUrn::OperationStatus->value],
    732▕                 ],
    733▕             ]));
    734▕ 
  ➜ 735▕             expect($response->json())->toMatchSnapshot();
    736▕         });
    737▕ 
    738▕         test('operation list descriptor matches snapshot', function (): void {
    739▕             $response = $this->call('POST', '/rpc', [], [], [], [], json_encode([

  1   tests/Unit/Extensions/Discovery/DescribeFunctionTest.php:735

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Discovery\DescribeFunctionTest > `DescribeF…   
  Failed asserting that the string value matches its snapshot (tests/.pest/snapshots/Unit/Extensions/Discovery/DescribeFunctionTest/_DescribeFunction__→__Snapshot_Tests__→_operation_list_descriptor_matches_snapshot.snap).
Failed asserting that two strings are identical.
           {
               "name": "cursor",
               "schema": {
  -                "type": "string"
  +                "type": "string",
  +                "pattern": "^[a-zA-Z0-9+\/=_-]+$",
  +                "description": "Opaque pagination cursor from previous response"
               },
               "required": false,
               "summary": null,
  -            "description": "Pagination cursor",
  +            "description": "Pagination cursor for retrieving next page",
               "default": null,
               "deprecated": null,
               "examples": null
  @@ @@
                           "type": "object",
                           "properties": {
                               "id": {
  -                                "type": "string"
  +                                "type": "string",
  +                                "pattern": "^op_[a-f0-9]{24}$",
  +                                "description": "Unique operation identifier"
                               },
                               "function": {
  -                                "type": "string"
  +                                "type": "string",
  +                                "description": "Function URN that was called"
                               },
                               "version": {
  -                                "type": "string"
  +                                "type": "string",
  +                                "pattern": "^\\d+$",
  +                                "description": "Function version"
                               },
                               "status": {
  -                                "type": "string"
  +                                "type": "string",
  +                                "enum": [
  +                                    "pending",
  +                                    "processing",
  +                                    "completed",
  +                                    "failed",
  +                                    "cancelled"
  +                                ],
  +                                "description": "Current operation status"
                               },
                               "progress": {
  -                                "type": "number"
  +                                "type": "number",
  +                                "minimum": 0,
  +                                "maximum": 1,
  +                                "description": "Progress percentage (0-1)"
                               },
                               "started_at": {
  -                                "type": "string",
  -                                "format": "date-time"
  +                                "type": [
  +                                    "string",
  +                                    "null"
  +                                ],
  +                                "format": "date-time",
  +                                "description": "When operation started processing"
                               }
  -                        }
  +                        },
  +                        "required": [
  +                            "id",
  +                            "function",
  +                            "version",
  +                            "status"
  +                        ]
                       },
  -                    "description": "List of operations"
  +                    "description": "List of operations matching filter criteria"
                   },
                   "next_cursor": {
                       "type": "string",
  -                    "description": "Pagination cursor for next page"
  +                    "description": "Opaque cursor for fetching next page"
                   }
               },
               "required": [
                   "operations"
  -            ]
  +            ],
  +            "additionalProperties": false
           },
           "collection": false,
  -        "description": "Operation list response"
  +        "description": "Paginated operation list response"
       },
       "errors": [
           {
  

  at tests/Unit/Extensions/Discovery/DescribeFunctionTest.php:748
    744▕                     'arguments' => ['function' => FunctionUrn::OperationList->value],
    745▕                 ],
    746▕             ]));
    747▕ 
  ➜ 748▕             expect($response->json())->toMatchSnapshot();
    749▕         });
    750▕ 
    751▕         test('operation cancel descriptor matches snapshot', function (): void {
    752▕             $response = $this->call('POST', '/rpc', [], [], [], [], json_encode([

  1   tests/Unit/Extensions/Discovery/DescribeFunctionTest.php:748

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\Discovery\DescribeFunctionTest > `DescribeF…   
  Failed asserting that the string value matches its snapshot (tests/.pest/snapshots/Unit/Extensions/Discovery/DescribeFunctionTest/_DescribeFunction__→__Snapshot_Tests__→_operation_cancel_descriptor_matches_snapshot.snap).
Failed asserting that two strings are identical.
           {
               "name": "operation_id",
               "schema": {
  -                "type": "string"
  +                "type": "string",
  +                "pattern": "^op_[a-f0-9]{24}$",
  +                "minLength": 27,
  +                "maxLength": 27,
  +                "description": "Operation identifier (format: op_ followed by 24 hex characters)"
               },
               "required": true,
               "summary": null,
  -            "description": "Operation ID to cancel",
  +            "description": "Unique operation identifier",
               "default": null,
               "deprecated": null,
               "examples": null
  

  at tests/Unit/Extensions/Discovery/DescribeFunctionTest.php:761
    757▕                     'arguments' => ['function' => FunctionUrn::OperationCancel->value],
    758▕                 ],
    759▕             ]));
    760▕ 
  ➜ 761▕             expect($response->json())->toMatchSnapshot();
    762▕         });
    763▕     });
    764▕ });
    765▕

  1   tests/Unit/Extensions/Discovery/DescribeFunctionTest.php:761

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\ExtensionRegistryTe…  BadMethodCallException   
  Received Mockery_10_Cline_Forrst_Contracts_ExtensionInterface::getSubscribedEvents(), but no expectations were specified

  at src/Extensions/ExtensionRegistry.php:62
     58▕      */
     59▕     public function register(ExtensionInterface $extension): void
     60▕     {
     61▕         // Validate event subscriptions
  ➜  62▕         foreach ($extension->getSubscribedEvents() as $eventClass => $config) {
     63▕             // Validate event class exists
     64▕             if (!class_exists($eventClass)) {
     65▕                 throw InvalidFieldValueException::forField('eventClass', sprintf('class %s does not exist', $eventClass));
     66▕             }

  1   src/Extensions/ExtensionRegistry.php:62
  2   tests/Unit/Extensions/ExtensionRegistryTest.php:26

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\ExtensionRegistryTe…  BadMethodCallException   
  Received Mockery_10_Cline_Forrst_Contracts_ExtensionInterface::getSubscribedEvents(), but no expectations were specified

  at src/Extensions/ExtensionRegistry.php:62
     58▕      */
     59▕     public function register(ExtensionInterface $extension): void
     60▕     {
     61▕         // Validate event subscriptions
  ➜  62▕         foreach ($extension->getSubscribedEvents() as $eventClass => $config) {
     63▕             // Validate event class exists
     64▕             if (!class_exists($eventClass)) {
     65▕                 throw InvalidFieldValueException::forField('eventClass', sprintf('class %s does not exist', $eventClass));
     66▕             }

  1   src/Extensions/ExtensionRegistry.php:62
  2   tests/Unit/Extensions/ExtensionRegistryTest.php:36

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\ExtensionRegistryTe…  BadMethodCallException   
  Received Mockery_10_Cline_Forrst_Contracts_ExtensionInterface::getSubscribedEvents(), but no expectations were specified

  at src/Extensions/ExtensionRegistry.php:62
     58▕      */
     59▕     public function register(ExtensionInterface $extension): void
     60▕     {
     61▕         // Validate event subscriptions
  ➜  62▕         foreach ($extension->getSubscribedEvents() as $eventClass => $config) {
     63▕             // Validate event class exists
     64▕             if (!class_exists($eventClass)) {
     65▕                 throw InvalidFieldValueException::forField('eventClass', sprintf('class %s does not exist', $eventClass));
     66▕             }

  1   src/Extensions/ExtensionRegistry.php:62
  2   tests/Unit/Extensions/ExtensionRegistryTest.php:49

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\ExtensionRegistryTe…  BadMethodCallException   
  Received Mockery_10_Cline_Forrst_Contracts_ExtensionInterface::getSubscribedEvents(), but no expectations were specified

  at src/Extensions/ExtensionRegistry.php:62
     58▕      */
     59▕     public function register(ExtensionInterface $extension): void
     60▕     {
     61▕         // Validate event subscriptions
  ➜  62▕         foreach ($extension->getSubscribedEvents() as $eventClass => $config) {
     63▕             // Validate event class exists
     64▕             if (!class_exists($eventClass)) {
     65▕                 throw InvalidFieldValueException::forField('eventClass', sprintf('class %s does not exist', $eventClass));
     66▕             }

  1   src/Extensions/ExtensionRegistry.php:62
  2   tests/Unit/Extensions/ExtensionRegistryTest.php:65

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\ExtensionRegistryTe…  BadMethodCallException   
  Received Mockery_10_Cline_Forrst_Contracts_ExtensionInterface::getSubscribedEvents(), but no expectations were specified

  at src/Extensions/ExtensionRegistry.php:62
     58▕      */
     59▕     public function register(ExtensionInterface $extension): void
     60▕     {
     61▕         // Validate event subscriptions
  ➜  62▕         foreach ($extension->getSubscribedEvents() as $eventClass => $config) {
     63▕             // Validate event class exists
     64▕             if (!class_exists($eventClass)) {
     65▕                 throw InvalidFieldValueException::forField('eventClass', sprintf('class %s does not exist', $eventClass));
     66▕             }

  1   src/Extensions/ExtensionRegistry.php:62
  2   tests/Unit/Extensions/ExtensionRegistryTest.php:88

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\ExtensionRegistryTe…  BadMethodCallException   
  Received Mockery_10_Cline_Forrst_Contracts_ExtensionInterface::getSubscribedEvents(), but no expectations were specified

  at src/Extensions/ExtensionRegistry.php:62
     58▕      */
     59▕     public function register(ExtensionInterface $extension): void
     60▕     {
     61▕         // Validate event subscriptions
  ➜  62▕         foreach ($extension->getSubscribedEvents() as $eventClass => $config) {
     63▕             // Validate event class exists
     64▕             if (!class_exists($eventClass)) {
     65▕                 throw InvalidFieldValueException::forField('eventClass', sprintf('class %s does not exist', $eventClass));
     66▕             }

  1   src/Extensions/ExtensionRegistry.php:62
  2   tests/Unit/Extensions/ExtensionRegistryTest.php:117

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\ExtensionRegistryTe…  BadMethodCallException   
  Received Mockery_10_Cline_Forrst_Contracts_ExtensionInterface::getSubscribedEvents(), but no expectations were specified

  at src/Extensions/ExtensionRegistry.php:62
     58▕      */
     59▕     public function register(ExtensionInterface $extension): void
     60▕     {
     61▕         // Validate event subscriptions
  ➜  62▕         foreach ($extension->getSubscribedEvents() as $eventClass => $config) {
     63▕             // Validate event class exists
     64▕             if (!class_exists($eventClass)) {
     65▕                 throw InvalidFieldValueException::forField('eventClass', sprintf('class %s does not exist', $eventClass));
     66▕             }

  1   src/Extensions/ExtensionRegistry.php:62
  2   tests/Unit/Extensions/ExtensionRegistryTest.php:138

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\ExtensionRegistryTe…  BadMethodCallException   
  Received Mockery_10_Cline_Forrst_Contracts_ExtensionInterface::getSubscribedEvents(), but no expectations were specified

  at src/Extensions/ExtensionRegistry.php:62
     58▕      */
     59▕     public function register(ExtensionInterface $extension): void
     60▕     {
     61▕         // Validate event subscriptions
  ➜  62▕         foreach ($extension->getSubscribedEvents() as $eventClass => $config) {
     63▕             // Validate event class exists
     64▕             if (!class_exists($eventClass)) {
     65▕                 throw InvalidFieldValueException::forField('eventClass', sprintf('class %s does not exist', $eventClass));
     66▕             }

  1   src/Extensions/ExtensionRegistry.php:62
  2   tests/Unit/Extensions/ExtensionRegistryTest.php:154

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\ExtensionRegistryTe…  BadMethodCallException   
  Received Mockery_10_Cline_Forrst_Contracts_ExtensionInterface::getSubscribedEvents(), but no expectations were specified

  at src/Extensions/ExtensionRegistry.php:62
     58▕      */
     59▕     public function register(ExtensionInterface $extension): void
     60▕     {
     61▕         // Validate event subscriptions
  ➜  62▕         foreach ($extension->getSubscribedEvents() as $eventClass => $config) {
     63▕             // Validate event class exists
     64▕             if (!class_exists($eventClass)) {
     65▕                 throw InvalidFieldValueException::forField('eventClass', sprintf('class %s does not exist', $eventClass));
     66▕             }

  1   src/Extensions/ExtensionRegistry.php:62
  2   tests/Unit/Extensions/ExtensionRegistryTest.php:218

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\ExtensionRegistryTe…  BadMethodCallException   
  Received Mockery_10_Cline_Forrst_Contracts_ExtensionInterface::getSubscribedEvents(), but no expectations were specified

  at src/Extensions/ExtensionRegistry.php:62
     58▕      */
     59▕     public function register(ExtensionInterface $extension): void
     60▕     {
     61▕         // Validate event subscriptions
  ➜  62▕         foreach ($extension->getSubscribedEvents() as $eventClass => $config) {
     63▕             // Validate event class exists
     64▕             if (!class_exists($eventClass)) {
     65▕                 throw InvalidFieldValueException::forField('eventClass', sprintf('class %s does not exist', $eventClass));
     66▕             }

  1   src/Extensions/ExtensionRegistry.php:62
  2   tests/Unit/Extensions/ExtensionRegistryTest.php:238

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\ExtensionRegistryTe…  BadMethodCallException   
  Received Mockery_10_Cline_Forrst_Contracts_ExtensionInterface::getSubscribedEvents(), but no expectations were specified

  at src/Extensions/ExtensionRegistry.php:62
     58▕      */
     59▕     public function register(ExtensionInterface $extension): void
     60▕     {
     61▕         // Validate event subscriptions
  ➜  62▕         foreach ($extension->getSubscribedEvents() as $eventClass => $config) {
     63▕             // Validate event class exists
     64▕             if (!class_exists($eventClass)) {
     65▕                 throw InvalidFieldValueException::forField('eventClass', sprintf('class %s does not exist', $eventClass));
     66▕             }

  1   src/Extensions/ExtensionRegistry.php:62
  2   tests/Unit/Extensions/ExtensionRegistryTest.php:256

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\ExtensionRegistryTe…  BadMethodCallException   
  Received Mockery_10_Cline_Forrst_Contracts_ExtensionInterface::getSubscribedEvents(), but no expectations were specified

  at src/Extensions/ExtensionRegistry.php:62
     58▕      */
     59▕     public function register(ExtensionInterface $extension): void
     60▕     {
     61▕         // Validate event subscriptions
  ➜  62▕         foreach ($extension->getSubscribedEvents() as $eventClass => $config) {
     63▕             // Validate event class exists
     64▕             if (!class_exists($eventClass)) {
     65▕                 throw InvalidFieldValueException::forField('eventClass', sprintf('class %s does not exist', $eventClass));
     66▕             }

  1   src/Extensions/ExtensionRegistry.php:62
  2   tests/Unit/Extensions/ExtensionRegistryTest.php:277

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\ExtensionRegistryTe…  BadMethodCallException   
  Received Mockery_10_Cline_Forrst_Contracts_ExtensionInterface::getSubscribedEvents(), but no expectations were specified

  at src/Extensions/ExtensionRegistry.php:62
     58▕      */
     59▕     public function register(ExtensionInterface $extension): void
     60▕     {
     61▕         // Validate event subscriptions
  ➜  62▕         foreach ($extension->getSubscribedEvents() as $eventClass => $config) {
     63▕             // Validate event class exists
     64▕             if (!class_exists($eventClass)) {
     65▕                 throw InvalidFieldValueException::forField('eventClass', sprintf('class %s does not exist', $eventClass));
     66▕             }

  1   src/Extensions/ExtensionRegistry.php:62
  2   tests/Unit/Extensions/ExtensionRegistryTest.php:297

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\ExtensionRegistryTe…  BadMethodCallException   
  Received Mockery_10_Cline_Forrst_Contracts_ExtensionInterface::getSubscribedEvents(), but no expectations were specified

  at src/Extensions/ExtensionRegistry.php:62
     58▕      */
     59▕     public function register(ExtensionInterface $extension): void
     60▕     {
     61▕         // Validate event subscriptions
  ➜  62▕         foreach ($extension->getSubscribedEvents() as $eventClass => $config) {
     63▕             // Validate event class exists
     64▕             if (!class_exists($eventClass)) {
     65▕                 throw InvalidFieldValueException::forField('eventClass', sprintf('class %s does not exist', $eventClass));
     66▕             }

  1   src/Extensions/ExtensionRegistry.php:62
  2   tests/Unit/Extensions/ExtensionRegistryTest.php:313

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\IdempotencyExtension…  InvalidCountException   
  Method put(<Any Arguments>) from Mockery_8_Illuminate_Contracts_Cache_Repository should be called
 exactly 1 times but called 0 times.

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\IdempotencyExtension…  InvalidCountException   
  Method put(<Any Arguments>) from Mockery_8_Illuminate_Contracts_Cache_Repository should be called
 exactly 2 times but called 1 times.

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\IdempotencyExtensi…  MustBePositiveException   
  ttl must be positive

  at src/Exceptions/MustBePositiveException.php:22
     18▕ final class MustBePositiveException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s must be positive', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MustBePositiveException.php:22
  2   src/Extensions/IdempotencyExtension.php:357

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\IdempotencyExtension…  InvalidCountException   
  Method put(<Pattern>, <Array>, 30) from Mockery_8_Illuminate_Contracts_Cache_Repository should be called
 exactly 1 times but called 0 times.

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\IdempotencyExtensionTest > `IdempotencyExte…   
  Failed asserting that null is an instance of class Cline\Forrst\Data\ResponseData.

  at tests/Unit/Extensions/IdempotencyExtensionTest.php:336
    332▕             $extension->onExecutingFunction($event);
    333▕ 
    334▕             // Assert
    335▕             $result = $event->getResponse();
  ➜ 336▕             expect($result)->toBeInstanceOf(ResponseData::class)
    337▕                 ->and($result->isFailed())->toBeTrue()
    338▕                 ->and($event->isPropagationStopped())->toBeTrue();
    339▕ 
    340▕             $error = $result->getFirstError();

  1   tests/Unit/Extensions/IdempotencyExtensionTest.php:336

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\IdempotencyExtensi…  MustBePositiveException   
  ttl must be positive

  at src/Exceptions/MustBePositiveException.php:22
     18▕ final class MustBePositiveException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s must be positive', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MustBePositiveException.php:22
  2   src/Extensions/IdempotencyExtension.php:357

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\IdempotencyExtension…  InvalidCountException   
  Method put(<Pattern>, <Array>, 30) from Mockery_8_Illuminate_Contracts_Cache_Repository should be called
 exactly 1 times but called 0 times.

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\IdempotencyExtension…  InvalidCountException   
  Method put(<Any Arguments>) from Mockery_8_Illuminate_Contracts_Cache_Repository should be called
 exactly 2 times but called 1 times.

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\IdempotencyExtensionTest > `Idempote…  Error   
  Call to a member function getFirstError() on null

  at tests/Unit/Extensions/IdempotencyExtensionTest.php:564
    560▕             $extension->onExecutingFunction($event);
    561▕ 
    562▕             // Assert
    563▕             $result = $event->getResponse();
  ➜ 564▕             $error = $result->getFirstError();
    565▕             expect($error->details)->toHaveKey('retry_after')
    566▕                 ->and($error->details['retry_after'])->toBe(['value' => 1, 'unit' => 'second']);
    567▕         });
    568▕     });

  1   tests/Unit/Extensions/IdempotencyExtensionTest.php:564

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that two strings are identical.
  -'de'
  +'en'
  

  at tests/Unit/Extensions/LocaleExtensionTest.php:256
    252▕                 $event = new RequestValidated($request);
    253▕                 $extension->onRequestValidated($event);
    254▕ 
    255▕                 // Assert
  ➜ 256▕                 expect($extension->getLanguage())->toBe('de')
    257▕                     ->and($extension->getTimezone())->toBe('Europe/Berlin')
    258▕                     ->and($extension->getCurrency())->toBe('EUR')
    259▕                     ->and($extension->wasFallbackUsed())->toBeFalse();
    260▕             });

  1   tests/Unit/Extensions/LocaleExtensionTest.php:256

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that two strings are identical.
  -'zh-Hans'
  +'en'
  

  at tests/Unit/Extensions/LocaleExtensionTest.php:281
    277▕                 $event = new RequestValidated($request);
    278▕                 $extension->onRequestValidated($event);
    279▕ 
    280▕                 // Assert
  ➜ 281▕                 expect($extension->getLanguage())->toBe('zh-Hans')
    282▕                     ->and($extension->wasFallbackUsed())->toBeFalse();
    283▕             });
    284▕ 
    285▕             test('onRequestValidated does nothing when extension not present', function (): void {

  1   tests/Unit/Extensions/LocaleExtensionTest.php:281

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtension…  InvalidFieldValueException   
  Extension urn is invalid: must follow format 'urn:vendor:forrst:ext:name', got: urn:custom:ext

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Validation/UrnValidator.php:49

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that false is true.

  at tests/Unit/Extensions/LocaleExtensionTest.php:474
    470▕                 $extension->onRequestValidated($event);
    471▕ 
    472▕                 // Assert
    473▕                 expect($extension->getLanguage())->toBe('en')
  ➜ 474▕                     ->and($extension->wasFallbackUsed())->toBeTrue();
    475▕             });
    476▕ 
    477▕             test('onRequestValidated rejects invalid timezone', function (): void {
    478▕                 // Arrange

  1   tests/Unit/Extensions/LocaleExtensionTest.php:474

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that null is identical to 'USD'.

  at tests/Unit/Extensions/LocaleExtensionTest.php:543
    539▕                 $event = new RequestValidated($request);
    540▕                 $extension->onRequestValidated($event);
    541▕ 
    542▕                 // Assert
  ➜ 543▕                 expect($extension->getCurrency())->toBe('USD');
    544▕             });
    545▕         });
    546▕ 
    547▕         describe('Edge Cases', function (): void {

  1   tests/Unit/Extensions/LocaleExtensionTest.php:543

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that false is true.

  at tests/Unit/Extensions/LocaleExtensionTest.php:566
    562▕                 $extension->onRequestValidated($event);
    563▕ 
    564▕                 // Assert
    565▕                 expect($extension->getLanguage())->toBe('en')
  ➜ 566▕                     ->and($extension->wasFallbackUsed())->toBeTrue()
    567▕                     ->and($extension->getTimezone())->toBeNull()
    568▕                     ->and($extension->getCurrency())->toBeNull();
    569▕             });
    570▕

  1   tests/Unit/Extensions/LocaleExtensionTest.php:566

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that false is true.

  at tests/Unit/Extensions/LocaleExtensionTest.php:589
    585▕                 $extension->onRequestValidated($event);
    586▕ 
    587▕                 // Assert
    588▕                 expect($extension->getLanguage())->toBe('en')
  ➜ 589▕                     ->and($extension->wasFallbackUsed())->toBeTrue();
    590▕             });
    591▕ 
    592▕             test('onRequestValidated accepts null for optional timezone', function (): void {
    593▕                 // Arrange

  1   tests/Unit/Extensions/LocaleExtensionTest.php:589

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that two strings are identical.
  -'de'
  +'en'
  

  at tests/Unit/Extensions/LocaleExtensionTest.php:661
    657▕                 $event = new RequestValidated($request);
    658▕                 $extension->onRequestValidated($event);
    659▕ 
    660▕                 // Assert
  ➜ 661▕                 expect($extension->getLanguage())->toBe('de')
    662▕                     ->and($extension->wasFallbackUsed())->toBeFalse();
    663▕             });
    664▕ 
    665▕             test('resolves base language when specific variant not supported', function (): void {

  1   tests/Unit/Extensions/LocaleExtensionTest.php:661

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that two strings are identical.
  -'de-DE'
  +'en'
  

  at tests/Unit/Extensions/LocaleExtensionTest.php:684
    680▕                 $event = new RequestValidated($request);
    681▕                 $extension->onRequestValidated($event);
    682▕ 
    683▕                 // Assert - base language 'de' matches, so 'de-DE' is accepted as-is
  ➜ 684▕                 expect($extension->getLanguage())->toBe('de-DE')
    685▕                     ->and($extension->wasFallbackUsed())->toBeFalse();
    686▕             });
    687▕ 
    688▕             test('resolves progressively shorter language tags', function (): void {

  1   tests/Unit/Extensions/LocaleExtensionTest.php:684

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that two strings are identical.
  -'zh-Hans'
  +'en'
  

  at tests/Unit/Extensions/LocaleExtensionTest.php:707
    703▕                 $event = new RequestValidated($request);
    704▕                 $extension->onRequestValidated($event);
    705▕ 
    706▕                 // Assert
  ➜ 707▕                 expect($extension->getLanguage())->toBe('zh-Hans')
    708▕                     ->and($extension->wasFallbackUsed())->toBeTrue();
    709▕             });
    710▕ 
    711▕             test('uses first fallback language when requested language not supported', function (): void {

  1   tests/Unit/Extensions/LocaleExtensionTest.php:707

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that two strings are identical.
  -'fr'
  +'en'
  

  at tests/Unit/Extensions/LocaleExtensionTest.php:731
    727▕                 $event = new RequestValidated($request);
    728▕                 $extension->onRequestValidated($event);
    729▕ 
    730▕                 // Assert
  ➜ 731▕                 expect($extension->getLanguage())->toBe('fr')
    732▕                     ->and($extension->wasFallbackUsed())->toBeTrue();
    733▕             });
    734▕ 
    735▕             test('tries multiple fallback languages until match found', function (): void {

  1   tests/Unit/Extensions/LocaleExtensionTest.php:731

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that two strings are identical.
  -'es'
  +'en'
  

  at tests/Unit/Extensions/LocaleExtensionTest.php:755
    751▕                 $event = new RequestValidated($request);
    752▕                 $extension->onRequestValidated($event);
    753▕ 
    754▕                 // Assert
  ➜ 755▕                 expect($extension->getLanguage())->toBe('es')
    756▕                     ->and($extension->wasFallbackUsed())->toBeTrue();
    757▕             });
    758▕ 
    759▕             test('uses shorter version of fallback language when exact not supported', function (): void {

  1   tests/Unit/Extensions/LocaleExtensionTest.php:755

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that two strings are identical.
  -'de-DE'
  +'en'
  

  at tests/Unit/Extensions/LocaleExtensionTest.php:779
    775▕                 $event = new RequestValidated($request);
    776▕                 $extension->onRequestValidated($event);
    777▕ 
    778▕                 // Assert - base language 'de' matches, so fallback 'de-DE' is used as-is
  ➜ 779▕                 expect($extension->getLanguage())->toBe('de-DE')
    780▕                     ->and($extension->wasFallbackUsed())->toBeTrue();
    781▕             });
    782▕ 
    783▕             test('defaults to en when no languages match', function (): void {

  1   tests/Unit/Extensions/LocaleExtensionTest.php:779

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that false is true.

  at tests/Unit/Extensions/LocaleExtensionTest.php:804
    800▕                 $extension->onRequestValidated($event);
    801▕ 
    802▕                 // Assert
    803▕                 expect($extension->getLanguage())->toBe('en')
  ➜ 804▕                     ->and($extension->wasFallbackUsed())->toBeTrue();
    805▕             });
    806▕         });
    807▕ 
    808▕         describe('Edge Cases', function (): void {

  1   tests/Unit/Extensions/LocaleExtensionTest.php:804

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that false is true.

  at tests/Unit/Extensions/LocaleExtensionTest.php:830
    826▕                 $extension->onRequestValidated($event);
    827▕ 
    828▕                 // Assert
    829▕                 expect($extension->getLanguage())->toBe('en')
  ➜ 830▕                     ->and($extension->wasFallbackUsed())->toBeTrue();
    831▕             });
    832▕ 
    833▕             test('handles single-character language code', function (): void {
    834▕                 // Arrange

  1   tests/Unit/Extensions/LocaleExtensionTest.php:830

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that false is true.

  at tests/Unit/Extensions/LocaleExtensionTest.php:853
    849▕                 $extension->onRequestValidated($event);
    850▕ 
    851▕                 // Assert
    852▕                 expect($extension->getLanguage())->toBe('en')
  ➜ 853▕                     ->and($extension->wasFallbackUsed())->toBeTrue();
    854▕             });
    855▕ 
    856▕             test('handles language tag with multiple hyphens', function (): void {
    857▕                 // Arrange

  1   tests/Unit/Extensions/LocaleExtensionTest.php:853

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that two strings are identical.
  -'de-DE-u-co-phonebk'
  +'en'
  

  at tests/Unit/Extensions/LocaleExtensionTest.php:875
    871▕                 $event = new RequestValidated($request);
    872▕                 $extension->onRequestValidated($event);
    873▕ 
    874▕                 // Assert - base language 'de' matches, so full tag is accepted as-is
  ➜ 875▕                 expect($extension->getLanguage())->toBe('de-DE-u-co-phonebk')
    876▕                     ->and($extension->wasFallbackUsed())->toBeFalse();
    877▕             });
    878▕         });
    879▕     });

  1   tests/Unit/Extensions/LocaleExtensionTest.php:875

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that null is identical to 'America/New_York'.

  at tests/Unit/Extensions/LocaleExtensionTest.php:912
    908▕ 
    909▕                     $event = new RequestValidated($request);
    910▕                     $extension->onRequestValidated($event);
    911▕ 
  ➜ 912▕                     expect($extension->getTimezone())->toBe($timezone);
    913▕                 }
    914▕             });
    915▕ 
    916▕             test('validates timezone with offset format', function (): void {

  1   tests/Unit/Extensions/LocaleExtensionTest.php:912

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that null is identical to 'Etc/GMT+5'.

  at tests/Unit/Extensions/LocaleExtensionTest.php:936
    932▕                 $event = new RequestValidated($request);
    933▕                 $extension->onRequestValidated($event);
    934▕ 
    935▕                 // Assert
  ➜ 936▕                 expect($extension->getTimezone())->toBe('Etc/GMT+5');
    937▕             });
    938▕         });
    939▕ 
    940▕         describe('Sad Paths', function (): void {

  1   tests/Unit/Extensions/LocaleExtensionTest.php:936

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that null is identical to 'US/Eastern'.

  at tests/Unit/Extensions/LocaleExtensionTest.php:1032
    1028▕                 $event = new RequestValidated($request);
    1029▕                 $extension->onRequestValidated($event);
    1030▕ 
    1031▕                 // Assert - Deprecated but still valid
  ➜ 1032▕                 expect($extension->getTimezone())->toBe('US/Eastern');
    1033▕             });
    1034▕         });
    1035▕     });
    1036▕

  1   tests/Unit/Extensions/LocaleExtensionTest.php:1032

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that null is identical to 'USD'.

  at tests/Unit/Extensions/LocaleExtensionTest.php:1068
    1064▕ 
    1065▕                     $event = new RequestValidated($request);
    1066▕                     $extension->onRequestValidated($event);
    1067▕ 
  ➜ 1068▕                     expect($extension->getCurrency())->toBe($expected);
    1069▕                 }
    1070▕             });
    1071▕ 
    1072▕             test('normalizes lowercase currency codes to uppercase', function (): void {

  1   tests/Unit/Extensions/LocaleExtensionTest.php:1068

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that null is identical to 'EUR'.

  at tests/Unit/Extensions/LocaleExtensionTest.php:1092
    1088▕                 $event = new RequestValidated($request);
    1089▕                 $extension->onRequestValidated($event);
    1090▕ 
    1091▕                 // Assert
  ➜ 1092▕                 expect($extension->getCurrency())->toBe('EUR');
    1093▕             });
    1094▕ 
    1095▕             test('normalizes mixed-case currency codes to uppercase', function (): void {
    1096▕                 // Arrange

  1   tests/Unit/Extensions/LocaleExtensionTest.php:1092

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that null is identical to 'GBP'.

  at tests/Unit/Extensions/LocaleExtensionTest.php:1115
    1111▕                 $event = new RequestValidated($request);
    1112▕                 $extension->onRequestValidated($event);
    1113▕ 
    1114▕                 // Assert
  ➜ 1115▕                 expect($extension->getCurrency())->toBe('GBP');
    1116▕             });
    1117▕         });
    1118▕ 
    1119▕         describe('Sad Paths', function (): void {

  1   tests/Unit/Extensions/LocaleExtensionTest.php:1115

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that null is identical to 'XAF'.

  at tests/Unit/Extensions/LocaleExtensionTest.php:1280
    1276▕                 $event = new RequestValidated($request);
    1277▕                 $extension->onRequestValidated($event);
    1278▕ 
    1279▕                 // Assert
  ➜ 1280▕                 expect($extension->getCurrency())->toBe('XAF');
    1281▕             });
    1282▕ 
    1283▕             test('validates Swiss Franc currency code', function (): void {
    1284▕                 // Arrange

  1   tests/Unit/Extensions/LocaleExtensionTest.php:1280

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\LocaleExtensionTest > `LocaleExtension` → `…   
  Failed asserting that null is identical to 'CHF'.

  at tests/Unit/Extensions/LocaleExtensionTest.php:1303
    1299▕                 $event = new RequestValidated($request);
    1300▕                 $extension->onRequestValidated($event);
    1301▕ 
    1302▕                 // Assert - CHF is valid ISO 4217 code for Swiss Franc
  ➜ 1303▕                 expect($extension->getCurrency())->toBe('CHF');
    1304▕             });
    1305▕         });
    1306▕     });
    1307▕ });

  1   tests/Unit/Extensions/LocaleExtensionTest.php:1303

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\MaintenanceExtensionTest > `MaintenanceExte…   
  Failed asserting that two strings are equal.
  -'reports.generate'
  +'urn:cline:forrst:fn:reports:generate'
  

  at tests/Unit/Extensions/MaintenanceExtensionTest.php:128
    124▕             );
    125▕ 
    126▕             // Assert
    127▕             expect($data)->toHaveKey('scope', MaintenanceExtension::SCOPE_FUNCTION)
  ➜ 128▕                 ->and($data)->toHaveKey('function', 'reports.generate')
    129▕                 ->and($data)->toHaveKey('reason', 'Report engine upgrade')
    130▕                 ->and($data)->toHaveKey('started_at', '2024-01-15T10:00:00+00:00')
    131▕                 ->and($data)->toHaveKey('until', '2024-01-15T11:00:00+00:00')
    132▕                 ->and($data)->toHaveKey('retry_after', ['value' => 15, 'unit' => 'minute']);

  1   tests/Unit/Extensions/MaintenanceExtensionTest.php:128

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\MaintenanceExtensionTest > `MaintenanceExte…   
  Failed asserting that two strings are equal.
  -'search.query'
  +'urn:cline:forrst:fn:search:query'
  

  at tests/Unit/Extensions/MaintenanceExtensionTest.php:170
    166▕                 startedAt: $startedAt,
    167▕             );
    168▕ 
    169▕             // Assert
  ➜ 170▕             expect($details)->toHaveKey('function', 'search.query')
    171▕                 ->and($details)->toHaveKey('reason', 'Search index rebuild')
    172▕                 ->and($details)->toHaveKey('started_at')
    173▕                 ->and($details)->not->toHaveKey('until');
    174▕         });

  1   tests/Unit/Extensions/MaintenanceExtensionTest.php:170

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\ReplayExtensionTest > `Repl…  ErrorException   
  The float 9.223372036854776E+18 is not representable as an int, cast occurred

  at src/Enums/TimeUnit.php:141
    137▕             self::Day => 86_400,
    138▕         };
    139▕ 
    140▕         // PHP_INT_MAX / multiplier gives the maximum safe value before overflow
  ➜ 141▕         $maxSafeValue = (int) floor(PHP_INT_MAX / $multiplier);
    142▕ 
    143▕         if ($value > $maxSafeValue) {
    144▕             throw OverflowException::forOperation(sprintf('toSeconds conversion (%d %s)', $value, $this->value));
    145▕         }

  1   src/Extensions/ReplayExtension.php:344
  2   tests/Unit/Extensions/ReplayExtensionTest.php:260

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\ReplayExtensionTest > `Repl…  ErrorException   
  The float 9.223372036854776E+18 is not representable as an int, cast occurred

  at src/Enums/TimeUnit.php:141
    137▕             self::Day => 86_400,
    138▕         };
    139▕ 
    140▕         // PHP_INT_MAX / multiplier gives the maximum safe value before overflow
  ➜ 141▕         $maxSafeValue = (int) floor(PHP_INT_MAX / $multiplier);
    142▕ 
    143▕         if ($value > $maxSafeValue) {
    144▕             throw OverflowException::forOperation(sprintf('toSeconds conversion (%d %s)', $value, $this->value));
    145▕         }

  1   tests/Unit/Extensions/ReplayExtensionTest.php:457

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\SimulationExtensionTes…  EmptyArrayException   
  input cannot be empty

  at src/Exceptions/EmptyArrayException.php:22
     18▕ final class EmptyArrayException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s cannot be empty', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/EmptyArrayException.php:22
  2   src/Discovery/SimulationScenarioData.php:83

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Extensions\SimulationExtensionTes…  EmptyArrayException   
  input cannot be empty

  at src/Exceptions/EmptyArrayException.php:22
     18▕ final class EmptyArrayException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s cannot be empty', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/EmptyArrayException.php:22
  2   src/Discovery/SimulationScenarioData.php:83

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\FunctionConditionCoverageTest > `Function Condition Co…   
  Failed asserting that 5 is identical to 4.

  at tests/Unit/FunctionConditionCoverageTest.php:112
    108▕         // and represents the false branch coverage of line 19
    109▕ 
    110▕         // Additional check: verify the function signature is correct
    111▕         $reflection = new ReflectionFunction('Cline\Forrst\post_forrst');
  ➜ 112▕         expect($reflection->getNumberOfParameters())->toBe(4);
    113▕         expect($reflection->getParameters()[0]->getName())->toBe('function');
    114▕         expect($reflection->getParameters()[1]->getName())->toBe('arguments');
    115▕         expect($reflection->getParameters()[2]->getName())->toBe('version');
    116▕         expect($reflection->getParameters()[3]->getName())->toBe('id');

  1   tests/Unit/FunctionConditionCoverageTest.php:112

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\AbstractListFunctionTest > `Abstr…  TypeError   
  Cline\Forrst\Functions\AbstractListFunction::beforePagination(): Argument #1 ($query) must be of type Illuminate\Database\Eloquent\Builder, Cline\Forrst\QueryBuilders\QueryBuilder given, called in /Users/brian/Developer/cline/forrst/src/Functions/AbstractListFunction.php on line 77

  at src/Functions/AbstractListFunction.php:168
    164▕      * @param Builder $query The query builder to modify
    165▕      *
    166▕      * @return Builder The modified query builder
    167▕      */
  ➜ 168▕     protected function beforePagination(Builder $query): Builder
    169▕     {
    170▕         return $query;
    171▕     }
    172▕

  1   src/Functions/AbstractListFunction.php:168
  2   src/Functions/AbstractListFunction.php:77

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\DescribeFunction…  InvalidFieldValueException   
  version is invalid: Invalid semantic version: '1'. Must follow semver format (e.g., '1.0.0')

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Discovery/FunctionDescriptorData.php:155

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\DescribeFunctionTest >…   EmptyArrayException   
  functions cannot be empty

  at src/Exceptions/EmptyArrayException.php:22
     18▕ final class EmptyArrayException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s cannot be empty', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/EmptyArrayException.php:22
  2   src/Discovery/DiscoveryData.php:101

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\DescribeFuncti…  InvalidFunctionNameException   
  Invalid function name "function.one": Expected format: 'urn:namespace:forrst:ext:extension:fn:name' or 'urn:namespace:forrst:fn:name'

  at src/Exceptions/InvalidFunctionNameException.php:22
     18▕ final class InvalidFunctionNameException extends ValidationException
     19▕ {
     20▕     public static function forName(string $name, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('Invalid function name "%s": %s', $name, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFunctionNameException.php:22
  2   src/Discovery/FunctionDescriptorData.php:142

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\DescribeFunctionTest >…   EmptyArrayException   
  functions cannot be empty

  at src/Exceptions/EmptyArrayException.php:22
     18▕ final class EmptyArrayException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s cannot be empty', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/EmptyArrayException.php:22
  2   src/Discovery/DiscoveryData.php:101

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\DescribeFunctionTest >…   EmptyArrayException   
  functions cannot be empty

  at src/Exceptions/EmptyArrayException.php:22
     18▕ final class EmptyArrayException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s cannot be empty', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/EmptyArrayException.php:22
  2   src/Discovery/DiscoveryData.php:101

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\DescribeFunction…  InvalidFieldValueException   
  version is invalid: Invalid semantic version: '1'. Must follow semver format (e.g., '1.0.0')

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Discovery/FunctionDescriptorData.php:155

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\DescribeFunctionTest >…   EmptyArrayException   
  functions cannot be empty

  at src/Exceptions/EmptyArrayException.php:22
     18▕ final class EmptyArrayException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s cannot be empty', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/EmptyArrayException.php:22
  2   src/Discovery/DiscoveryData.php:101

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\DescribeFunctionTest >…   EmptyArrayException   
  functions cannot be empty

  at src/Exceptions/EmptyArrayException.php:22
     18▕ final class EmptyArrayException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s cannot be empty', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/EmptyArrayException.php:22
  2   src/Discovery/DiscoveryData.php:101

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\DescribeFunction…  InvalidFieldValueException   
  version is invalid: Invalid semantic version: '1'. Must follow semver format (e.g., '1.0.0')

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Discovery/FunctionDescriptorData.php:155

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\DescribeFunction…  InvalidFieldValueException   
  version is invalid: Invalid semantic version: '1'. Must follow semver format (e.g., '1.0.0')

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Discovery/FunctionDescriptorData.php:155

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\System\HealthFunctionTest > `HealthFunction`…   
  Failed asserting that two strings are identical.
  -'Check specific component only'
  +'Check specific component only (use "self" for basic ping)'
  

  at tests/Unit/Functions/System/HealthFunctionTest.php:84
     80▕                 expect($result[0])->toBeInstanceOf(ArgumentData::class)
     81▕                     ->and($result[0]->name)->toBe('component')
     82▕                     ->and($result[0]->schema['type'])->toBe('string')
     83▕                     ->and($result[0]->required)->toBeFalse()
  ➜  84▕                     ->and($result[0]->description)->toBe('Check specific component only');
     85▕             });
     86▕ 
     87▕             test('include_details argument is optional boolean with default true', function (): void {
     88▕                 // Arrange

  1   tests/Unit/Functions/System/HealthFunctionTest.php:84

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\System\HealthFunction…  UnauthorizedException   
  Unauthorized

  at src/Exceptions/AbstractRequestException.php:244
    240▕         // PHPStan cannot infer that 'new static' returns 'static' type in abstract classes
    241▕         // This is a known limitation when using LSB (Late Static Binding) with abstract constructors
    242▕         // Safe to suppress as all subclasses must call parent constructor accepting ErrorData
    243▕         // @phpstan-ignore-next-line
  ➜ 244▕         return new static(
    245▕             new ErrorData(
    246▕                 code: $code,
    247▕                 message: $message,
    248▕                 source: $source,

  1   src/Exceptions/AbstractRequestException.php:244
  2   src/Exceptions/UnauthorizedException.php:62

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\System\HealthFunction…  UnauthorizedException   
  Unauthorized

  at src/Exceptions/AbstractRequestException.php:244
    240▕         // PHPStan cannot infer that 'new static' returns 'static' type in abstract classes
    241▕         // This is a known limitation when using LSB (Late Static Binding) with abstract constructors
    242▕         // Safe to suppress as all subclasses must call parent constructor accepting ErrorData
    243▕         // @phpstan-ignore-next-line
  ➜ 244▕         return new static(
    245▕             new ErrorData(
    246▕                 code: $code,
    247▕                 message: $message,
    248▕                 source: $source,

  1   src/Exceptions/AbstractRequestException.php:244
  2   src/Exceptions/UnauthorizedException.php:62

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\System\HealthFunction…  UnauthorizedException   
  Unauthorized

  at src/Exceptions/AbstractRequestException.php:244
    240▕         // PHPStan cannot infer that 'new static' returns 'static' type in abstract classes
    241▕         // This is a known limitation when using LSB (Late Static Binding) with abstract constructors
    242▕         // Safe to suppress as all subclasses must call parent constructor accepting ErrorData
    243▕         // @phpstan-ignore-next-line
  ➜ 244▕         return new static(
    245▕             new ErrorData(
    246▕                 code: $code,
    247▕                 message: $message,
    248▕                 source: $source,

  1   src/Exceptions/AbstractRequestException.php:244
  2   src/Exceptions/UnauthorizedException.php:62

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\System\HealthFunction…  UnauthorizedException   
  Unauthorized

  at src/Exceptions/AbstractRequestException.php:244
    240▕         // PHPStan cannot infer that 'new static' returns 'static' type in abstract classes
    241▕         // This is a known limitation when using LSB (Late Static Binding) with abstract constructors
    242▕         // Safe to suppress as all subclasses must call parent constructor accepting ErrorData
    243▕         // @phpstan-ignore-next-line
  ➜ 244▕         return new static(
    245▕             new ErrorData(
    246▕                 code: $code,
    247▕                 message: $message,
    248▕                 source: $source,

  1   src/Exceptions/AbstractRequestException.php:244
  2   src/Exceptions/UnauthorizedException.php:62

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\System\HealthFunction…  UnauthorizedException   
  Unauthorized

  at src/Exceptions/AbstractRequestException.php:244
    240▕         // PHPStan cannot infer that 'new static' returns 'static' type in abstract classes
    241▕         // This is a known limitation when using LSB (Late Static Binding) with abstract constructors
    242▕         // Safe to suppress as all subclasses must call parent constructor accepting ErrorData
    243▕         // @phpstan-ignore-next-line
  ➜ 244▕         return new static(
    245▕             new ErrorData(
    246▕                 code: $code,
    247▕                 message: $message,
    248▕                 source: $source,

  1   src/Exceptions/AbstractRequestException.php:244
  2   src/Exceptions/UnauthorizedException.php:62

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\System\HealthFunction…  UnauthorizedException   
  Unauthorized

  at src/Exceptions/AbstractRequestException.php:244
    240▕         // PHPStan cannot infer that 'new static' returns 'static' type in abstract classes
    241▕         // This is a known limitation when using LSB (Late Static Binding) with abstract constructors
    242▕         // Safe to suppress as all subclasses must call parent constructor accepting ErrorData
    243▕         // @phpstan-ignore-next-line
  ➜ 244▕         return new static(
    245▕             new ErrorData(
    246▕                 code: $code,
    247▕                 message: $message,
    248▕                 source: $source,

  1   src/Exceptions/AbstractRequestException.php:244
  2   src/Exceptions/UnauthorizedException.php:62

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\System\HealthFunction…  UnauthorizedException   
  Unauthorized

  at src/Exceptions/AbstractRequestException.php:244
    240▕         // PHPStan cannot infer that 'new static' returns 'static' type in abstract classes
    241▕         // This is a known limitation when using LSB (Late Static Binding) with abstract constructors
    242▕         // Safe to suppress as all subclasses must call parent constructor accepting ErrorData
    243▕         // @phpstan-ignore-next-line
  ➜ 244▕         return new static(
    245▕             new ErrorData(
    246▕                 code: $code,
    247▕                 message: $message,
    248▕                 source: $source,

  1   src/Exceptions/AbstractRequestException.php:244
  2   src/Exceptions/UnauthorizedException.php:62

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\System\HealthFunction…  UnauthorizedException   
  Unauthorized

  at src/Exceptions/AbstractRequestException.php:244
    240▕         // PHPStan cannot infer that 'new static' returns 'static' type in abstract classes
    241▕         // This is a known limitation when using LSB (Late Static Binding) with abstract constructors
    242▕         // Safe to suppress as all subclasses must call parent constructor accepting ErrorData
    243▕         // @phpstan-ignore-next-line
  ➜ 244▕         return new static(
    245▕             new ErrorData(
    246▕                 code: $code,
    247▕                 message: $message,
    248▕                 source: $source,

  1   src/Exceptions/AbstractRequestException.php:244
  2   src/Exceptions/UnauthorizedException.php:62

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\System\HealthFunction…  UnauthorizedException   
  Unauthorized

  at src/Exceptions/AbstractRequestException.php:244
    240▕         // PHPStan cannot infer that 'new static' returns 'static' type in abstract classes
    241▕         // This is a known limitation when using LSB (Late Static Binding) with abstract constructors
    242▕         // Safe to suppress as all subclasses must call parent constructor accepting ErrorData
    243▕         // @phpstan-ignore-next-line
  ➜ 244▕         return new static(
    245▕             new ErrorData(
    246▕                 code: $code,
    247▕                 message: $message,
    248▕                 source: $source,

  1   src/Exceptions/AbstractRequestException.php:244
  2   src/Exceptions/UnauthorizedException.php:62

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\System\HealthFunction…  UnauthorizedException   
  Unauthorized

  at src/Exceptions/AbstractRequestException.php:244
    240▕         // PHPStan cannot infer that 'new static' returns 'static' type in abstract classes
    241▕         // This is a known limitation when using LSB (Late Static Binding) with abstract constructors
    242▕         // Safe to suppress as all subclasses must call parent constructor accepting ErrorData
    243▕         // @phpstan-ignore-next-line
  ➜ 244▕         return new static(
    245▕             new ErrorData(
    246▕                 code: $code,
    247▕                 message: $message,
    248▕                 source: $source,

  1   src/Exceptions/AbstractRequestException.php:244
  2   src/Exceptions/UnauthorizedException.php:62

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\System\HealthFunction…  UnauthorizedException   
  Unauthorized

  at src/Exceptions/AbstractRequestException.php:244
    240▕         // PHPStan cannot infer that 'new static' returns 'static' type in abstract classes
    241▕         // This is a known limitation when using LSB (Late Static Binding) with abstract constructors
    242▕         // Safe to suppress as all subclasses must call parent constructor accepting ErrorData
    243▕         // @phpstan-ignore-next-line
  ➜ 244▕         return new static(
    245▕             new ErrorData(
    246▕                 code: $code,
    247▕                 message: $message,
    248▕                 source: $source,

  1   src/Exceptions/AbstractRequestException.php:244
  2   src/Exceptions/UnauthorizedException.php:62

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\System\HealthFun…  InvalidFieldValueException   
  component is invalid: Valid components: database

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Extensions/Diagnostics/Functions/HealthFunction.php:239

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\System\HealthFunctionTest > `HealthFunction`…   
  Failed asserting that an instance of class Cline\Forrst\Exceptions\UnauthorizedException is an instance of class RuntimeException.

  at tests/Unit/Functions/System/HealthFunctionTest.php:479
    475▕             $request = RequestObjectData::asRequest('urn:cline:forrst:ext:diagnostics:fn:health', []);
    476▕             $function->setRequest($request);
    477▕ 
    478▕             // Act & Assert - should propagate exception
  ➜ 479▕             expect(fn (): array => $function())->toThrow(RuntimeException::class);
    480▕         });
    481▕     });
    482▕ });
    483▕

  1   tests/Unit/Functions/System/HealthFunctionTest.php:479

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\System\LockForceReleaseFunctionTest > `LockF…   
  Failed asserting that two strings are identical.
  -'Force release a lock without ownership check (admin)'
  +'Force release a lock without ownership check (admin only)'
  

  at tests/Unit/Functions/System/LockForceReleaseFunctionTest.php:121
    117▕                 // Act
    118▕                 $result = $function->getSummary();
    119▕ 
    120▕                 // Assert
  ➜ 121▕                 expect($result)->toBe('Force release a lock without ownership check (admin)');
    122▕             });
    123▕         });
    124▕ 
    125▕         describe('getArguments()', function (): void {

  1   tests/Unit/Functions/System/LockForceReleaseFunctionTest.php:121

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\System\LockForceReleaseFunctionTest > `LockF…   
  Failed asserting that actual size 2 matches expected size 1.

  at tests/Unit/Functions/System/LockForceReleaseFunctionTest.php:215
    211▕                 $result = $function->getErrors();
    212▕ 
    213▕                 // Assert
    214▕                 expect($result)->toBeArray()
  ➜ 215▕                     ->and($result)->toHaveCount(1)
    216▕                     ->and($result[0])->toBeInstanceOf(ErrorDefinitionData::class);
    217▕             });
    218▕ 
    219▕             test('defines LockNotFound error', function (): void {

  1   tests/Unit/Functions/System/LockForceReleaseFunctionTest.php:215

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Functions\System\LockStatusFunctionTest > `LockStatusF…   
  Failed asserting that an array is empty.

  at tests/Unit/Functions/System/LockStatusFunctionTest.php:218
    214▕                 $result = $function->getErrors();
    215▕ 
    216▕                 // Assert
    217▕                 expect($result)->toBeArray()
  ➜ 218▕                     ->and($result)->toBeEmpty();
    219▕             });
    220▕         });
    221▕     });
    222▕

  1   tests/Unit/Functions/System/LockStatusFunctionTest.php:218

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\FunctionsTest > `Functions` → `Happy Paths` → sends Fo…   
  Failed asserting that two strings are equal.
  -'01J34641TE5SF58ZX3N9HPT1BA'
  +'01KD7JPZ4WS7091H04WCYKTWGE'
  

  at tests/Unit/FunctionsTest.php:56
     52▕ 
     53▕             expect($payload)
     54▕                 ->toHaveKey('protocol')
     55▕                 ->toHaveKey('call')
  ➜  56▕                 ->toHaveKey('id', '01J34641TE5SF58ZX3N9HPT1BA')
     57▕                 ->and($payload['call'])->toHaveKey('function', 'urn:app:forrst:fn:users:list')
     58▕                 ->not->toHaveKey('arguments'); // null params should be filtered out
     59▕         });
     60▕

  1   tests/Unit/FunctionsTest.php:56

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\FunctionsTest > `Functions` → `Happy Paths` → sends Fo…   
  Failed asserting that two strings are equal.
  -'01J34641TE5SF58ZX3N9HPT1BA'
  +'01KD7JPZ51XD9PGRGN4ZSVFWYW'
  

  at tests/Unit/FunctionsTest.php:82
     78▕ 
     79▕             expect($payload)
     80▕                 ->toHaveKey('protocol')
     81▕                 ->toHaveKey('call')
  ➜  82▕                 ->toHaveKey('id', '01J34641TE5SF58ZX3N9HPT1BA')
     83▕                 ->and($payload['call'])->toHaveKey('function', 'urn:app:forrst:fn:users:find')
     84▕                 ->toHaveKey('arguments', $params);
     85▕         });
     86▕

  1   tests/Unit/FunctionsTest.php:82

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\FunctionsTest > `Functions` → `Edge Cases` → handles U…   
  Failed asserting that two strings are equal.
  -'01J34641TE5SF58ZX3N9HPT1BA'
  +'01KD7JPZ8JV8NKXZKS3C0JQE7C'
  

  at tests/Unit/FunctionsTest.php:535
    531▕             $request = $response->baseResponse->exception?->getRequest() ?? request();
    532▕             $payload = $request->json()->all();
    533▕ 
    534▕             expect($payload)
  ➜ 535▕                 ->toHaveKey('id', '01J34641TE5SF58ZX3N9HPT1BA')
    536▕                 ->and($payload['id'])->toBeString()
    537▕                 ->and($payload['id'])->toHaveLength(26); // ULIDs are 26 characters
    538▕         });
    539▕

  1   tests/Unit/FunctionsTest.php:535

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Jobs\CallFunctionTest > `CallFunction` → `Sad Paths` →…   
  Failed asserting that two strings are identical.
  -'INVALID_ARGUMENTS'
  +'INTERNAL_ERROR'
  

  at tests/Unit/Jobs/CallFunctionTest.php:591
    587▕ 
    588▕             // Assert - Should get error response due to validation failure
    589▕             expect($response)->toBeInstanceOf(ResponseData::class)
    590▕                 ->and($response->getFirstError())->toBeInstanceOf(ErrorData::class)
  ➜ 591▕                 ->and($response->getFirstError()->code)->toBe(ErrorCode::InvalidArguments->value)
    592▕                 ->and($response->getFirstError()->message)->toBe('Invalid arguments')
    593▕                 ->and($response->result)->toBeNull();
    594▕         });
    595▕

  1   tests/Unit/Jobs/CallFunctionTest.php:591

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Jobs\CallFunctionTest > `CallFunction` → `Sad Paths` →…   
  Failed asserting that two strings are identical.
  -'INVALID_ARGUMENTS'
  +'INTERNAL_ERROR'
  

  at tests/Unit/Jobs/CallFunctionTest.php:625
    621▕ 
    622▕             // Assert - Should get error response due to missing required field
    623▕             expect($response)->toBeInstanceOf(ResponseData::class)
    624▕                 ->and($response->getFirstError())->toBeInstanceOf(ErrorData::class)
  ➜ 625▕                 ->and($response->getFirstError()->code)->toBe(ErrorCode::InvalidArguments->value)
    626▕                 ->and($response->result)->toBeNull();
    627▕         });
    628▕ 
    629▕         test('handles validation failure for multiple Data parameters', function (): void {

  1   tests/Unit/Jobs/CallFunctionTest.php:625

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Jobs\CallFunctionTest > `CallFunction` → `Sad Paths` →…   
  Failed asserting that two strings are identical.
  -'INVALID_ARGUMENTS'
  +'INTERNAL_ERROR'
  

  at tests/Unit/Jobs/CallFunctionTest.php:667
    663▕ 
    664▕             // Assert - First Data validation failure should trigger error
    665▕             expect($response)->toBeInstanceOf(ResponseData::class)
    666▕                 ->and($response->getFirstError())->toBeInstanceOf(ErrorData::class)
  ➜ 667▕                 ->and($response->getFirstError()->code)->toBe(ErrorCode::InvalidArguments->value);
    668▕         });
    669▕     });
    670▕ 
    671▕     describe('Edge Cases', function (): void {

  1   tests/Unit/Jobs/CallFunctionTest.php:667

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Jobs\CallFunctionTest > `CallFunction` → `Edge Cases`…    
  Failed asserting that two arrays are identical.
   Array &0 [
       'enabled' => false,
       'active' => true,
  -    'count' => null,
  -    'name' => null,
  +    'count' => 0,
  +    'name' => '',
   ]
  

  at tests/Unit/Jobs/CallFunctionTest.php:1044
    1040▕             $job = new CallFunction($method, $requestObject);
    1041▕             $response = $job->handle();
    1042▕ 
    1043▕             // Assert - False, 0, and empty string are filtered out by array_filter
  ➜ 1044▕             expect($response->result)->toBe([
    1045▕                 'enabled' => false,
    1046▕                 'active' => true,
    1047▕                 'count' => null,
    1048▕                 'name' => null,

  1   tests/Unit/Jobs/CallFunctionTest.php:1044

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Jobs\CallFunctionTest > `CallFunction` → `Edge Cases`…    
  Failed asserting that two strings are identical.
  -'INVALID_ARGUMENTS'
  +'INTERNAL_ERROR'
  

  at tests/Unit/Jobs/CallFunctionTest.php:1084
    1080▕ 
    1081▕             // Assert - Should get validation error for missing required fields
    1082▕             expect($response)->toBeInstanceOf(ResponseData::class)
    1083▕                 ->and($response->getFirstError())->toBeInstanceOf(ErrorData::class)
  ➜ 1084▕                 ->and($response->getFirstError()->code)->toBe(ErrorCode::InvalidArguments->value)
    1085▕                 ->and($response->result)->toBeNull();
    1086▕         });
    1087▕ 
    1088▕         test('handles Data object with partial valid data', function (): void {

  1   tests/Unit/Jobs/CallFunctionTest.php:1084

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Jobs\CallFunctionTest > `CallFunction` → `Regressions`…   
  Failed asserting that two strings are identical.
  -'INVALID_ARGUMENTS'
  +'INTERNAL_ERROR'
  

  at tests/Unit/Jobs/CallFunctionTest.php:1302
    1298▕ 
    1299▕             // Assert - ValidationException should be caught and wrapped in InvalidDataException
    1300▕             expect($response)->toBeInstanceOf(ResponseData::class)
    1301▕                 ->and($response->getFirstError())->toBeInstanceOf(ErrorData::class)
  ➜ 1302▕                 ->and($response->getFirstError()->code)->toBe(ErrorCode::InvalidArguments->value)
    1303▕                 ->and($response->getFirstError()->message)->toBe('Invalid arguments')
    1304▕                 ->and($response->result)->toBeNull();
    1305▕         });
    1306▕     });

  1   tests/Unit/Jobs/CallFunctionTest.php:1302

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Models\OperationTest >…   MissingRequiredFieldException   
  startedAt is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Data/OperationData.php:146

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Models\OperationTest >…   MissingRequiredFieldException   
  startedAt is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Data/OperationData.php:146

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Models\OperationTest > `Op…  InvalidFieldValueException   
  id is invalid: Operation ID must be a valid UUID, ULID, or prefixed format (op_/op- followed by alphanumeric), got: op-multi-error

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/OperationData.php:118

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Normalizers\NormalizationR…  InvalidFieldValueException   
  type is invalid: must be lowercase and contain only letters, numbers, hyphens, or underscores

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/ResourceObjectData.php:72

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Repositories\DatabaseOpera…  InvalidFieldValueException   
  id is invalid: Operation ID must be a valid UUID, ULID, or prefixed format (op_/op- followed by alphanumeric), got: op-find-1

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/OperationData.php:118

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Repositories\DatabaseOpera…  InvalidFieldValueException   
  id is invalid: Operation ID must be a valid UUID, ULID, or prefixed format (op_/op- followed by alphanumeric), got: op-new-1

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/OperationData.php:118

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Repositories\DatabaseOpera…  InvalidFieldValueException   
  id is invalid: Operation ID must be a valid UUID, ULID, or prefixed format (op_/op- followed by alphanumeric), got: op-new-2

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/OperationData.php:118

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Repositories\DatabaseOpera…  InvalidFieldValueException   
  id is invalid: Operation ID must be a valid UUID, ULID, or prefixed format (op_/op- followed by alphanumeric), got: op-update-1

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/OperationData.php:118

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Repositories\DatabaseOpera…  InvalidFieldValueException   
  id is invalid: Operation ID must be a valid UUID, ULID, or prefixed format (op_/op- followed by alphanumeric), got: op-update-2

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/OperationData.php:118

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Repositories\DatabaseOpera…  InvalidFieldValueException   
  id is invalid: Operation ID must be a valid UUID, ULID, or prefixed format (op_/op- followed by alphanumeric), got: op-update-3

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/OperationData.php:118

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Repositories\DatabaseOpera…  InvalidFieldValueException   
  id is invalid: Operation ID must be a valid UUID, ULID, or prefixed format (op_/op- followed by alphanumeric), got: op-update-4

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/OperationData.php:118

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Repositories\DatabaseOpera…  InvalidFieldValueException   
  id is invalid: Operation ID must be a valid UUID, ULID, or prefixed format (op_/op- followed by alphanumeric), got: op-list-1

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/OperationData.php:118

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Repositories\DatabaseOp…  MissingRequiredFieldException   
  completedAt is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Data/OperationData.php:134

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Repositories\DatabaseOpera…  InvalidFieldValueException   
  id is invalid: Operation ID must be a valid UUID, ULID, or prefixed format (op_/op- followed by alphanumeric), got: op-limit-1

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/OperationData.php:118

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Repositories\DatabaseOpera…  InvalidFieldValueException   
  id is invalid: Operation ID must be a valid UUID, ULID, or prefixed format (op_/op- followed by alphanumeric), got: op-page-10

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/OperationData.php:118

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Repositories\DatabaseOpera…  InvalidFieldValueException   
  id is invalid: Operation ID must be a valid UUID, ULID, or prefixed format (op_/op- followed by alphanumeric), got: op-caller-1

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/OperationData.php:118

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Repositories\DatabaseOp…  MissingRequiredFieldException   
  startedAt is required

  at src/Exceptions/MissingRequiredFieldException.php:22
     18▕ final class MissingRequiredFieldException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is required', $field));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/MissingRequiredFieldException.php:22
  2   src/Data/OperationData.php:146

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Repositories\DatabaseOpera…  InvalidFieldValueException   
  id is invalid: Operation ID must be a valid UUID, ULID, or prefixed format (op_/op- followed by alphanumeric), got: op-exact-1

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/OperationData.php:118

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Servers\ConfigurationServe…  InvalidFieldValueException   
  route is invalid: Route "rpc" must start with "/"

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/Configuration/ServerData.php:168

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Servers\ConfigurationServe…  InvalidFieldValueException   
  route is invalid: Route "rpc" must start with "/"

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/Configuration/ServerData.php:168

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Servers\ConfigurationServe…  InvalidFieldValueException   
  route is invalid: Route "rpc" must start with "/"

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/Configuration/ServerData.php:168

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Servers\ConfigurationServe…  InvalidFieldValueException   
  route is invalid: Route "rpc" must start with "/"

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/Configuration/ServerData.php:168

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Servers\ConfigurationServe…  InvalidFieldValueException   
  route is invalid: Route "rpc" must start with "/"

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/Configuration/ServerData.php:168

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Servers\ConfigurationServe…  InvalidFieldValueException   
  route is invalid: Route "rpc" must start with "/"

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/Configuration/ServerData.php:168

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Servers\ConfigurationServe…  InvalidFieldValueException   
  route is invalid: Route "rpc" must start with "/"

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/Configuration/ServerData.php:168

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Servers\ConfigurationServe…  InvalidFieldValueException   
  route is invalid: Route "rpc" must start with "/"

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/Configuration/ServerData.php:168

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Servers\ConfigurationServe…  InvalidFieldValueException   
  route is invalid: Route "rpc" must start with "/"

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/Configuration/ServerData.php:168

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Servers\ConfigurationServe…  InvalidFieldValueException   
  route is invalid: Route "rpc" must start with "/"

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/Configuration/ServerData.php:168

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Servers\ConfigurationServe…  InvalidFieldValueException   
  route is invalid: Route "rpc" must start with "/"

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/Configuration/ServerData.php:168

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Servers\ConfigurationServe…  InvalidFieldValueException   
  route is invalid: Route "rpc" must start with "/"

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/Configuration/ServerData.php:168

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Servers\ConfigurationServe…  InvalidFieldValueException   
  route is invalid: Route "rpc" must start with "/"

  at src/Exceptions/InvalidFieldValueException.php:22
     18▕ final class InvalidFieldValueException extends ValidationException
     19▕ {
     20▕     public static function forField(string $field, string $reason): self
     21▕     {
  ➜  22▕         return new self(sprintf('%s is invalid: %s', $field, $reason));
     23▕     }
     24▕ }
     25▕

  1   src/Exceptions/InvalidFieldValueException.php:22
  2   src/Data/Configuration/ServerData.php:168


  Tests:    257 failed, 2167 passed (6046 assertions)
  Duration: 15.58s

